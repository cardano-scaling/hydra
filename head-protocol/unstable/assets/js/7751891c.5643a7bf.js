"use strict";(self.webpackChunkhydra_head_protocol_docs=self.webpackChunkhydra_head_protocol_docs||[]).push([[8014],{26986:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>d,contentTitle:()=>l,default:()=>h,frontMatter:()=>r,metadata:()=>o,toc:()=>c});var o=t(75327),i=t(74848),s=t(28453);const r={slug:9,title:"9. Simplify Logging\n",authors:[],tags:["Accepted"]},l=void 0,d={authorsImageUrls:[]},c=[{value:"Status",id:"status",level:2},{value:"Context",id:"context",level:2},{value:"Decision",id:"decision",level:2},{value:"Consequences",id:"consequences",level:2}];function a(e){const n={code:"code",em:"em",h2:"h2",li:"li",p:"p",strong:"strong",ul:"ul",...(0,s.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.h2,{id:"status",children:"Status"}),"\n",(0,i.jsx)(n.p,{children:"Accepted"}),"\n",(0,i.jsx)(n.h2,{id:"context",children:"Context"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Logs are critical to provide ",(0,i.jsx)(n.em,{children:"observability"})," to Hydra nodes' operators"]}),"\n",(0,i.jsx)(n.li,{children:"Providing the needed components and tools to be able to configure logging and monitoring to each operator's liking should not be the responibility of the Hydra node, and requires complex machinery that will need to be maintained and evolved"}),"\n",(0,i.jsxs)(n.li,{children:["When a problem occurs in production, if the process is not verbose enough it can be very hard to analyse the problem","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Enabling dynamic changes of verbosity in logs is both complex to implement and comes too late"}),"\n",(0,i.jsxs)(n.li,{children:['Deciding in the code on what\'s the right "severity" for a log entry leads to dropping important information on ',(0,i.jsx)(n.em,{children:"how"})," some error occurred"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"decision",children:"Decision"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.em,{children:"Therefore"})}),"\n",(0,i.jsx)(n.p,{children:"Hydra node provides a very simplified logging mechanism whereby:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"All logs are emitted as JSON-encoded structures providing some metadata (timestamp, threadId) around well-defined data"}),"\n",(0,i.jsxs)(n.li,{children:["Each ",(0,i.jsx)(n.em,{children:"log entry"})," is written to the ",(0,i.jsx)(n.code,{children:"hydra-node"})," process' ",(0,i.jsx)(n.em,{children:"stdout"})," port, one line per entry"]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Note"}),": Proper redaction of sensitive information contained in log entries should still be handled in the code."]}),"\n",(0,i.jsx)(n.h2,{id:"consequences",children:"Consequences"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"It is the responsibility of the node operator to filter severity or otherwise post-process the logs"}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(a,{...e})}):a(e)}},28453:(e,n,t)=>{t.d(n,{R:()=>r,x:()=>l});var o=t(96540);const i={},s=o.createContext(i);function r(e){const n=o.useContext(s);return o.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:r(e.components),o.createElement(s.Provider,{value:n},e.children)}},75327:e=>{e.exports=JSON.parse('{"permalink":"/head-protocol/unstable/adr/9","source":"@site/adr/2021-08-19_009-simplify-logging.md","title":"9. Simplify Logging\\n","description":"Status","date":"2021-08-19T00:00:00.000Z","tags":[{"inline":true,"label":"Accepted","permalink":"/head-protocol/unstable/adr/tags/accepted"}],"readingTime":1,"hasTruncateMarker":false,"authors":[],"frontMatter":{"slug":"9","title":"9. Simplify Logging\\n","authors":[],"tags":["Accepted"]},"unlisted":false,"prevItem":{"title":"8. Custom Prelude\\n","permalink":"/head-protocol/unstable/adr/8"},"nextItem":{"title":"10. Use direct connection to `cardano-node`\\n","permalink":"/head-protocol/unstable/adr/10"}}')}}]);