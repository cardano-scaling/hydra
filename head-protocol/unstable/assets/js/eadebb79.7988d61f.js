"use strict";(self.webpackChunkhydra_head_protocol_docs=self.webpackChunkhydra_head_protocol_docs||[]).push([[9224],{10488:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>o,default:()=>h,frontMatter:()=>r,metadata:()=>s,toc:()=>d});var s=t(7512),i=t(74848),a=t(28453);const r={slug:11,title:"11. Use cardano-api\n",authors:[],tags:["Accepted"]},o=void 0,c={authorsImageUrls:[]},d=[{value:"Status",id:"status",level:2},{value:"Context",id:"context",level:2},{value:"Decision",id:"decision",level:2},{value:"Consequences",id:"consequences",level:2}];function l(e){const n={a:"a",code:"code",em:"em",h2:"h2",li:"li",p:"p",ul:"ul",...(0,a.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.h2,{id:"status",children:"Status"}),"\n",(0,i.jsx)(n.p,{children:"Accepted"}),"\n",(0,i.jsx)(n.h2,{id:"context",children:"Context"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["To implement Hydra Head's ledger we have been working with the ",(0,i.jsx)(n.a,{href:"https://github.com/input-output-hk/cardano-ledger-specs",children:"ledger-specs"})," packages which provide a low-level interface to work with transactions and ledgers","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"We also use a lightly wrapped ledger-specs API as our interface for Off-chain transaction submission. This introduced some boilerplate in order to align with cardano-api and provide JSON serialisation."}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["In our initial experiments ",(0,i.jsx)(n.a,{href:"/adr/10",children:"connecting directly"})," to a cardano node we have also been using the ledger API for building transactions for want of some scripts-related features in the cardano-api"]}),"\n",(0,i.jsx)(n.li,{children:"cardano-api is expected to be the supported entrypoint for clients to interact with Cardano chain while ledger-specs is reserved for internal use and direct interactions with ledgers"}),"\n",(0,i.jsx)(n.li,{children:"cardano-api now provides all the features we need to run our on-chain validators"}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"decision",children:"Decision"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.em,{children:"Therefore"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Use cardano-api types and functions instead of ledger-specs in ",(0,i.jsx)(n.code,{children:"Hydra.Chain.Direct"})," component"]}),"\n",(0,i.jsxs)(n.li,{children:["Use cardano-api types instead of custom ones in ",(0,i.jsx)(n.code,{children:"Hydra.Ledger.Cardano"})," component"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"consequences",children:"Consequences"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Removes the boilerplate in ",(0,i.jsx)(n.code,{children:"Hydra.Ledger.Cardano"})," required to map cardano-api types sent by clients to builtin and ledger-specs types"]}),"\n",(0,i.jsxs)(n.li,{children:["Simplifies the  ",(0,i.jsx)(n.code,{children:"Hydra.Chain.Direct"})," component:","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Replaces custom transaction building in ",(0,i.jsx)(n.code,{children:"Tx"})]}),"\n",(0,i.jsxs)(n.li,{children:["Replaces custom transaction fees calculation and balancing in ",(0,i.jsx)(n.code,{children:"Wallet"})]}),"\n",(0,i.jsx)(n.li,{children:"Replace low-level connection establishment using cardano-api functions connecting to the node (keeping the chain sync subscription)"}),"\n"]}),"\n"]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(l,{...e})}):l(e)}},28453:(e,n,t)=>{t.d(n,{R:()=>r,x:()=>o});var s=t(96540);const i={},a=s.createContext(i);function r(e){const n=s.useContext(a);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:r(e.components),s.createElement(a.Provider,{value:n},e.children)}},7512:e=>{e.exports=JSON.parse('{"permalink":"/head-protocol/unstable/adr/11","source":"@site/adr/2021-11-18_011-use-cardano-api.md","title":"11. Use cardano-api\\n","description":"Status","date":"2021-11-18T00:00:00.000Z","tags":[{"inline":true,"label":"Accepted","permalink":"/head-protocol/unstable/adr/tags/accepted"}],"readingTime":1.095,"hasTruncateMarker":false,"authors":[],"frontMatter":{"slug":"11","title":"11. Use cardano-api\\n","authors":[],"tags":["Accepted"]},"unlisted":false,"prevItem":{"title":"10. Use direct connection to `cardano-node`\\n","permalink":"/head-protocol/unstable/adr/10"},"nextItem":{"title":"12. Top-down Test-driven Design\\n","permalink":"/head-protocol/unstable/adr/12"}}')}}]);