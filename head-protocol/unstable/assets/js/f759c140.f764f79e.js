"use strict";(self.webpackChunkhydra_head_protocol_docs=self.webpackChunkhydra_head_protocol_docs||[]).push([[7344],{86797:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>_a,contentTitle:()=>Na,default:()=>Aa,frontMatter:()=>Ta,metadata:()=>a,toc:()=>Ca});const a=JSON.parse('{"id":"dev/architecture/index","title":"Architecture","description":"This document describes the architecture of the current implementation","source":"@site/docs/dev/architecture/index.md","sourceDirName":"dev/architecture","slug":"/dev/architecture/","permalink":"/head-protocol/unstable/docs/dev/architecture/","draft":false,"unlisted":false,"editUrl":"https://github.com/cardano-scaling/hydra/tree/master/docs/docs/dev/architecture/index.md","tags":[],"version":"current","frontMatter":{},"sidebar":"developerDocumentation","previous":{"title":"About Hydra","permalink":"/head-protocol/unstable/docs/dev/"},"next":{"title":"Event sourcing","permalink":"/head-protocol/unstable/docs/dev/architecture/event-sourcing"}}');var i,s,l,o,r,f,c,x,h,y,m,d,g,F,E,S,z,L,p,u,k,b,v,W,w,j,H,T,N,_,C,M,A,P,B,D,I,R,O,q,J,U,X,$,G,K,Q,V,Y,Z,ee,te,ne,ae,ie,se,le,oe,re,fe,ce,xe,he,ye,me,de,ge,Fe,Ee,Se,ze,Le,pe,ue,ke,be,ve,We,we,je,He,Te,Ne,_e,Ce,Me,Ae,Pe,Be,De,Ie,Re,Oe,qe,Je,Ue,Xe,$e,Ge,Ke,Qe,Ve,Ye,Ze,et,tt,nt,at,it,st,lt,ot,rt,ft,ct,xt,ht,yt,mt,dt,gt,Ft,Et,St,zt,Lt,pt,ut,kt,bt,vt,Wt,wt,jt,Ht,Tt,Nt,_t,Ct,Mt,At,Pt,Bt,Dt,It,Rt,Ot,qt,Jt,Ut,Xt,$t,Gt,Kt,Qt,Vt,Yt,Zt,en,tn,nn,an,sn,ln,on,rn,fn,cn,xn,hn,yn,mn,dn,gn,Fn,En,Sn,zn,Ln,pn,un,kn,bn,vn,Wn,wn,jn,Hn,Tn,Nn,_n,Cn,Mn,An,Pn,Bn,Dn,In,Rn,On,qn,Jn,Un,Xn,$n,Gn,Kn,Qn,Vn,Yn,Zn,ea,ta,na,aa,ia,sa,la,oa,ra,fa,ca,xa,ha,ya,ma,da,ga,Fa,Ea,Sa,za,La,pa,ua,ka,ba,va=n(74848),Wa=n(28453),wa=n(96540);function ja(){return ja=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},ja.apply(null,arguments)}const Ha=e=>{let{title:t,titleId:n,...a}=e;return wa.createElement("svg",ja({xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:1482,height:831,"data-diagram-type":"DESCRIPTION",preserveAspectRatio:"none",style:{width:1482,height:831,background:"#fff"},viewBox:"0 0 1482 831","aria-labelledby":n},a),void 0===t?wa.createElement("title",{id:n},"Hydra Components"):t?wa.createElement("title",{id:n},t):null,i||(i=wa.createElement("text",{x:665.059,y:23.535,fontFamily:"sans-serif",fontSize:14,fontWeight:"bold",textLength:138.462},"Hydra Components")),wa.createElement("g",{className:"cluster","data-entity":"hydra_node","data-source-line":1593,"data-uid":"ent0002"},wa.createElement("rect",{width:899,height:575.95,x:330.31,y:44.488,fill:"none",rx:2.5,ry:2.5,style:{stroke:"#444",strokeWidth:1,strokeDasharray:"7,7"}}),s||(s=wa.createElement("text",{x:731.38,y:81.957,fill:"#444",fontFamily:"sans-serif",fontSize:16,fontWeight:"bold",textLength:96.859},"Hydra Node")),l||(l=wa.createElement("text",{x:746.303,y:96.934,fill:"#444",fontFamily:"sans-serif",fontSize:12,fontWeight:"bold",textLength:67.014},"[container]"))),wa.createElement("a",{xlinkActuate:"onRequest",xlinkHref:"https://github.com/cardano-scaling/hydra/blob/master/hydra-node/src/Hydra/Events.hs",xlinkShow:"new",xlinkTitle:"https://github.com/cardano-scaling/hydra/blob/master/hydra-node/src/Hydra/Events.hs",xlinkType:"simple",className:"entity","data-entity":"events","data-source-line":68,"data-uid":"ent0003",target:"_top"},wa.createElement("rect",{width:168.258,height:85.953,x:1045.18,y:130.798,fill:"#85BBF0",rx:2.5,ry:2.5,style:{stroke:"#78a8d8",strokeWidth:.5}}),o||(o=wa.createElement("text",{x:1090.165,y:152.4,fontFamily:"sans-serif",fontSize:12,fontStyle:"italic",textLength:78.287},"\xabcomponent\xbb")),r||(r=wa.createElement("text",{x:1102.051,y:170.4,fontFamily:"sans-serif",fontSize:16,fontWeight:"bold",textLength:54.516},"Events")),f||(f=wa.createElement("text",{x:1127.094,y:187.31,fontFamily:"sans-serif",fontSize:14,textLength:4.43})),c||(c=wa.createElement("text",{x:1055.18,y:203.798,fontFamily:"sans-serif",fontSize:14,textLength:36.559},"Event")),x||(x=wa.createElement("text",{x:1091.739,y:203.798,fontFamily:"sans-serif",fontSize:14,textLength:4.43})),h||(h=wa.createElement("text",{x:1096.168,y:203.798,fontFamily:"sans-serif",fontSize:14,textLength:45.124},"source")),y||(y=wa.createElement("text",{x:1141.292,y:203.798,fontFamily:"sans-serif",fontSize:14,textLength:4.43})),m||(m=wa.createElement("text",{x:1145.722,y:203.798,fontFamily:"sans-serif",fontSize:14,textLength:25.231},"and")),d||(d=wa.createElement("text",{x:1170.953,y:203.798,fontFamily:"sans-serif",fontSize:14,textLength:4.43})),g||(g=wa.createElement("text",{x:1175.383,y:203.798,fontFamily:"sans-serif",fontSize:14,textLength:28.055},"sink"))),wa.createElement("a",{xlinkActuate:"onRequest",xlinkHref:"https://github.com/cardano-scaling/hydra/blob/master/hydra-node/src/Hydra/Persistence.hs",xlinkShow:"new",xlinkTitle:"https://github.com/cardano-scaling/hydra/blob/master/hydra-node/src/Hydra/Persistence.hs",xlinkType:"simple",className:"entity","data-entity":"persistence","data-source-line":68,"data-uid":"ent0004",target:"_top"},wa.createElement("rect",{width:213.04,height:116.574,x:796.79,y:115.488,fill:"#85BBF0",rx:2.5,ry:2.5,style:{stroke:"#78a8d8",strokeWidth:.5}}),F||(F=wa.createElement("text",{x:864.167,y:137.09,fontFamily:"sans-serif",fontSize:12,fontStyle:"italic",textLength:78.287},"\xabcomponent\xbb")),E||(E=wa.createElement("text",{x:856.302,y:155.09,fontFamily:"sans-serif",fontSize:16,fontWeight:"bold",textLength:94.016},"Persistence")),S||(S=wa.createElement("text",{x:875.621,y:170.066,fontFamily:"sans-serif",fontSize:12,fontStyle:"italic",textLength:55.377},"[JSON/FS]")),z||(z=wa.createElement("text",{x:901.095,y:186.133,fontFamily:"sans-serif",fontSize:14,textLength:4.43})),L||(L=wa.createElement("text",{x:806.79,y:202.621,fontFamily:"sans-serif",fontSize:14,textLength:51.96},"Persists")),p||(p=wa.createElement("text",{x:858.75,y:202.621,fontFamily:"sans-serif",fontSize:14,textLength:4.43})),u||(u=wa.createElement("text",{x:863.18,y:202.621,fontFamily:"sans-serif",fontSize:14,textLength:33.141},"state")),k||(k=wa.createElement("text",{x:896.32,y:202.621,fontFamily:"sans-serif",fontSize:14,textLength:4.43})),b||(b=wa.createElement("text",{x:900.75,y:202.621,fontFamily:"sans-serif",fontSize:14,textLength:13.747},"of")),v||(v=wa.createElement("text",{x:914.497,y:202.621,fontFamily:"sans-serif",fontSize:14,textLength:4.43})),W||(W=wa.createElement("text",{x:918.927,y:202.621,fontFamily:"sans-serif",fontSize:14,textLength:21.725},"the")),w||(w=wa.createElement("text",{x:940.651,y:202.621,fontFamily:"sans-serif",fontSize:14,textLength:4.43})),j||(j=wa.createElement("text",{x:945.081,y:202.621,fontFamily:"sans-serif",fontSize:14,textLength:33.031},"head")),H||(H=wa.createElement("text",{x:978.112,y:202.621,fontFamily:"sans-serif",fontSize:14,textLength:4.43})),T||(T=wa.createElement("text",{x:982.542,y:202.621,fontFamily:"sans-serif",fontSize:14,textLength:17.288},"on")),N||(N=wa.createElement("text",{x:889.221,y:219.109,fontFamily:"sans-serif",fontSize:14,textLength:28.178},"disk"))),wa.createElement("a",{xlinkActuate:"onRequest",xlinkHref:"https://github.com/cardano-scaling/hydra/blob/master/hydra-node/src/Hydra/HeadLogic.hs",xlinkShow:"new",xlinkTitle:"https://github.com/cardano-scaling/hydra/blob/master/hydra-node/src/Hydra/HeadLogic.hs",xlinkType:"simple",className:"entity","data-entity":"head_logic","data-source-line":68,"data-uid":"ent0005",target:"_top"},wa.createElement("rect",{width:218.393,height:102.441,x:672.11,y:293.068,fill:"#85BBF0",rx:2.5,ry:2.5,style:{stroke:"#78a8d8",strokeWidth:.5}}),_||(_=wa.createElement("text",{x:742.163,y:314.67,fontFamily:"sans-serif",fontSize:12,fontStyle:"italic",textLength:78.287},"\xabcomponent\xbb")),C||(C=wa.createElement("text",{x:735.837,y:332.67,fontFamily:"sans-serif",fontSize:16,fontWeight:"bold",textLength:41.867},"Head")),M||(M=wa.createElement("text",{x:777.705,y:332.67,fontFamily:"sans-serif",fontSize:16,fontWeight:"bold",textLength:5.273})),A||(A=wa.createElement("text",{x:782.978,y:332.67,fontFamily:"sans-serif",fontSize:16,fontWeight:"bold",textLength:43.797},"Logic")),P||(P=wa.createElement("text",{x:779.091,y:349.58,fontFamily:"sans-serif",fontSize:14,textLength:4.43})),B||(B=wa.createElement("text",{x:682.11,y:366.068,fontFamily:"sans-serif",fontSize:14,textLength:65.365},"Maintains")),D||(D=wa.createElement("text",{x:747.475,y:366.068,fontFamily:"sans-serif",fontSize:14,textLength:4.43})),I||(I=wa.createElement("text",{x:751.905,y:366.068,fontFamily:"sans-serif",fontSize:14,textLength:51.967},"internal")),R||(R=wa.createElement("text",{x:803.872,y:366.068,fontFamily:"sans-serif",fontSize:14,textLength:4.43})),O||(O=wa.createElement("text",{x:808.301,y:366.068,fontFamily:"sans-serif",fontSize:14,textLength:34.631},"Head")),q||(q=wa.createElement("text",{x:842.932,y:366.068,fontFamily:"sans-serif",fontSize:14,textLength:4.43})),J||(J=wa.createElement("text",{x:847.362,y:366.068,fontFamily:"sans-serif",fontSize:14,textLength:33.141},"state")),U||(U=wa.createElement("text",{x:708.647,y:382.557,fontFamily:"sans-serif",fontSize:14,textLength:25.231},"and")),X||(X=wa.createElement("text",{x:733.879,y:382.557,fontFamily:"sans-serif",fontSize:14,textLength:4.43})),$||($=wa.createElement("text",{x:738.308,y:382.557,fontFamily:"sans-serif",fontSize:14,textLength:67.32},"processes")),G||(G=wa.createElement("text",{x:805.629,y:382.557,fontFamily:"sans-serif",fontSize:14,textLength:4.43})),K||(K=wa.createElement("text",{x:810.058,y:382.557,fontFamily:"sans-serif",fontSize:14,textLength:43.907},"events"))),wa.createElement("a",{xlinkActuate:"onRequest",xlinkHref:"https://github.com/cardano-scaling/hydra/blob/master/hydra-node/src/Hydra/API/Server.hs",xlinkShow:"new",xlinkTitle:"https://github.com/cardano-scaling/hydra/blob/master/hydra-node/src/Hydra/API/Server.hs",xlinkType:"simple",className:"entity","data-entity":"api_server","data-source-line":68,"data-uid":"ent0006",target:"_top"},wa.createElement("rect",{width:203.777,height:102.441,x:1009.42,y:293.068,fill:"#85BBF0",rx:2.5,ry:2.5,style:{stroke:"#78a8d8",strokeWidth:.5}}),Q||(Q=wa.createElement("text",{x:1072.165,y:314.67,fontFamily:"sans-serif",fontSize:12,fontStyle:"italic",textLength:78.287},"\xabcomponent\xbb")),V||(V=wa.createElement("text",{x:1069.258,y:332.67,fontFamily:"sans-serif",fontSize:16,fontWeight:"bold",textLength:26.898},"API")),Y||(Y=wa.createElement("text",{x:1096.156,y:332.67,fontFamily:"sans-serif",fontSize:16,fontWeight:"bold",textLength:5.273})),Z||(Z=wa.createElement("text",{x:1101.43,y:332.67,fontFamily:"sans-serif",fontSize:16,fontWeight:"bold",textLength:51.93},"Server")),ee||(ee=wa.createElement("text",{x:1109.094,y:349.58,fontFamily:"sans-serif",fontSize:14,textLength:4.43})),te||(te=wa.createElement("text",{x:1020.466,y:366.068,fontFamily:"sans-serif",fontSize:14,textLength:47.366},"Handle")),ne||(ne=wa.createElement("text",{x:1067.832,y:366.068,fontFamily:"sans-serif",fontSize:14,textLength:4.43})),ae||(ae=wa.createElement("text",{x:1072.262,y:366.068,fontFamily:"sans-serif",fontSize:14,textLength:36.989},"client")),ie||(ie=wa.createElement("text",{x:1109.251,y:366.068,fontFamily:"sans-serif",fontSize:14,textLength:4.43})),se||(se=wa.createElement("text",{x:1113.681,y:366.068,fontFamily:"sans-serif",fontSize:14,textLength:74.279},"commands")),le||(le=wa.createElement("text",{x:1187.96,y:366.068,fontFamily:"sans-serif",fontSize:14,textLength:4.43})),oe||(oe=wa.createElement("text",{x:1192.39,y:366.068,fontFamily:"sans-serif",fontSize:14,textLength:9.762},"&")),re||(re=wa.createElement("text",{x:1019.42,y:382.557,fontFamily:"sans-serif",fontSize:14,textLength:50.012},"queries")),fe||(fe=wa.createElement("text",{x:1069.432,y:382.557,fontFamily:"sans-serif",fontSize:14,textLength:4.43})),ce||(ce=wa.createElement("text",{x:1073.861,y:382.557,fontFamily:"sans-serif",fontSize:14,textLength:25.231},"and")),xe||(xe=wa.createElement("text",{x:1099.093,y:382.557,fontFamily:"sans-serif",fontSize:14,textLength:4.43})),he||(he=wa.createElement("text",{x:1103.523,y:382.557,fontFamily:"sans-serif",fontSize:14,textLength:42.848},"serves")),ye||(ye=wa.createElement("text",{x:1146.37,y:382.557,fontFamily:"sans-serif",fontSize:14,textLength:4.43})),me||(me=wa.createElement("text",{x:1150.8,y:382.557,fontFamily:"sans-serif",fontSize:14,textLength:52.398},"outputs"))),wa.createElement("a",{xlinkActuate:"onRequest",xlinkHref:"https://github.com/cardano-scaling/hydra/blob/master/hydra-node/src/Hydra/Chain.hs",xlinkShow:"new",xlinkTitle:"https://github.com/cardano-scaling/hydra/blob/master/hydra-node/src/Hydra/Chain.hs",xlinkType:"simple",className:"entity","data-entity":"chain","data-source-line":68,"data-uid":"ent0007",target:"_top"},wa.createElement("rect",{width:196.593,height:118.93,x:683.01,y:485.508,fill:"#85BBF0",rx:2.5,ry:2.5,style:{stroke:"#78a8d8",strokeWidth:.5}}),de||(de=wa.createElement("text",{x:742.163,y:507.11,fontFamily:"sans-serif",fontSize:12,fontStyle:"italic",textLength:78.287},"\xabcomponent\xbb")),ge||(ge=wa.createElement("text",{x:757.795,y:525.11,fontFamily:"sans-serif",fontSize:16,fontWeight:"bold",textLength:47.023},"Chain")),Fe||(Fe=wa.createElement("text",{x:779.091,y:542.02,fontFamily:"sans-serif",fontSize:14,textLength:4.43})),Ee||(Ee=wa.createElement("text",{x:702.867,y:558.508,fontFamily:"sans-serif",fontSize:14,textLength:77.205},"Connection")),Se||(Se=wa.createElement("text",{x:780.072,y:558.508,fontFamily:"sans-serif",fontSize:14,textLength:4.43})),ze||(ze=wa.createElement("text",{x:784.502,y:558.508,fontFamily:"sans-serif",fontSize:14,textLength:13.836},"to")),Le||(Le=wa.createElement("text",{x:798.338,y:558.508,fontFamily:"sans-serif",fontSize:14,textLength:4.43})),pe||(pe=wa.createElement("text",{x:802.768,y:558.508,fontFamily:"sans-serif",fontSize:14,textLength:56.977},"Cardano")),ue||(ue=wa.createElement("text",{x:693.01,y:574.997,fontFamily:"sans-serif",fontSize:14,textLength:55.398},"Observe")),ke||(ke=wa.createElement("text",{x:748.408,y:574.997,fontFamily:"sans-serif",fontSize:14,textLength:4.43})),be||(be=wa.createElement("text",{x:752.838,y:574.997,fontFamily:"sans-serif",fontSize:14,textLength:20.959},"txs")),ve||(ve=wa.createElement("text",{x:773.797,y:574.997,fontFamily:"sans-serif",fontSize:14,textLength:4.43})),We||(We=wa.createElement("text",{x:778.227,y:574.997,fontFamily:"sans-serif",fontSize:14,textLength:61.715},"on-chain")),we||(we=wa.createElement("text",{x:839.942,y:574.997,fontFamily:"sans-serif",fontSize:14,textLength:4.43})),je||(je=wa.createElement("text",{x:844.371,y:574.997,fontFamily:"sans-serif",fontSize:14,textLength:25.231},"and")),He||(He=wa.createElement("text",{x:727.778,y:591.485,fontFamily:"sans-serif",fontSize:14,textLength:29.784},"post")),Te||(Te=wa.createElement("text",{x:757.562,y:591.485,fontFamily:"sans-serif",fontSize:14,textLength:4.43})),Ne||(Ne=wa.createElement("text",{x:761.991,y:591.485,fontFamily:"sans-serif",fontSize:14,textLength:13.822},"tx")),_e||(_e=wa.createElement("text",{x:775.814,y:591.485,fontFamily:"sans-serif",fontSize:14,textLength:4.43})),Ce||(Ce=wa.createElement("text",{x:780.243,y:591.485,fontFamily:"sans-serif",fontSize:14,textLength:13.836},"to")),Me||(Me=wa.createElement("text",{x:794.079,y:591.485,fontFamily:"sans-serif",fontSize:14,textLength:4.43})),Ae||(Ae=wa.createElement("text",{x:798.509,y:591.485,fontFamily:"sans-serif",fontSize:14,textLength:36.326},"chain"))),wa.createElement("a",{xlinkActuate:"onRequest",xlinkHref:"https://github.com/cardano-scaling/hydra/blob/master/hydra-node/src/Hydra/Chain/Direct/Wallet.hs",xlinkShow:"new",xlinkTitle:"https://github.com/cardano-scaling/hydra/blob/master/hydra-node/src/Hydra/Chain/Direct/Wallet.hs",xlinkType:"simple",className:"entity","data-entity":"wallet","data-source-line":68,"data-uid":"ent0008",target:"_top"},wa.createElement("rect",{width:193.394,height:102.441,x:346.61,y:493.748,fill:"#85BBF0",rx:2.5,ry:2.5,style:{stroke:"#78a8d8",strokeWidth:.5}}),Pe||(Pe=wa.createElement("text",{x:404.163,y:515.35,fontFamily:"sans-serif",fontSize:12,fontStyle:"italic",textLength:78.287},"\xabcomponent\xbb")),Be||(Be=wa.createElement("text",{x:418.24,y:533.35,fontFamily:"sans-serif",fontSize:16,fontWeight:"bold",textLength:50.133},"Wallet")),De||(De=wa.createElement("text",{x:441.092,y:550.26,fontFamily:"sans-serif",fontSize:14,textLength:4.43})),Ie||(Ie=wa.createElement("text",{x:359.273,y:566.748,fontFamily:"sans-serif",fontSize:14,textLength:71.504},"Embedded")),Re||(Re=wa.createElement("text",{x:430.776,y:566.748,fontFamily:"sans-serif",fontSize:14,textLength:4.43})),Oe||(Oe=wa.createElement("text",{x:435.206,y:566.748,fontFamily:"sans-serif",fontSize:14,textLength:40.838},"Wallet")),qe||(qe=wa.createElement("text",{x:476.044,y:566.748,fontFamily:"sans-serif",fontSize:14,textLength:4.43})),Je||(Je=wa.createElement("text",{x:480.474,y:566.748,fontFamily:"sans-serif",fontSize:14,textLength:13.836},"to")),Ue||(Ue=wa.createElement("text",{x:494.31,y:566.748,fontFamily:"sans-serif",fontSize:14,textLength:4.43})),Xe||(Xe=wa.createElement("text",{x:498.739,y:566.748,fontFamily:"sans-serif",fontSize:14,textLength:28.602},"sign")),$e||($e=wa.createElement("text",{x:356.61,y:583.237,fontFamily:"sans-serif",fontSize:14,textLength:83.132},"transactions")),Ge||(Ge=wa.createElement("text",{x:439.742,y:583.237,fontFamily:"sans-serif",fontSize:14,textLength:4.43})),Ke||(Ke=wa.createElement("text",{x:444.171,y:583.237,fontFamily:"sans-serif",fontSize:14,textLength:25.231},"and")),Qe||(Qe=wa.createElement("text",{x:469.403,y:583.237,fontFamily:"sans-serif",fontSize:14,textLength:4.43})),Ve||(Ve=wa.createElement("text",{x:473.833,y:583.237,fontFamily:"sans-serif",fontSize:14,textLength:23.857},"pay")),Ye||(Ye=wa.createElement("text",{x:497.69,y:583.237,fontFamily:"sans-serif",fontSize:14,textLength:4.43})),Ze||(Ze=wa.createElement("text",{x:502.12,y:583.237,fontFamily:"sans-serif",fontSize:14,textLength:27.884},"fees"))),wa.createElement("a",{xlinkActuate:"onRequest",xlinkHref:"https://github.com/cardano-scaling/hydra/blob/master/hydra-node/src/Hydra/Network.hs",xlinkShow:"new",xlinkTitle:"https://github.com/cardano-scaling/hydra/blob/master/hydra-node/src/Hydra/Network.hs",xlinkType:"simple",className:"entity","data-entity":"network","data-source-line":68,"data-uid":"ent0009",target:"_top"},wa.createElement("rect",{width:184.398,height:102.441,x:360.11,y:293.068,fill:"#85BBF0",rx:2.5,ry:2.5,style:{stroke:"#78a8d8",strokeWidth:.5}}),et||(et=wa.createElement("text",{x:413.165,y:314.67,fontFamily:"sans-serif",fontSize:12,fontStyle:"italic",textLength:78.287},"\xabcomponent\xbb")),tt||(tt=wa.createElement("text",{x:417.52,y:332.67,fontFamily:"sans-serif",fontSize:16,fontWeight:"bold",textLength:69.578},"Network")),nt||(nt=wa.createElement("text",{x:450.094,y:349.58,fontFamily:"sans-serif",fontSize:14,textLength:4.43})),at||(at=wa.createElement("text",{x:370.11,y:366.068,fontFamily:"sans-serif",fontSize:14,textLength:59.876},"Manages")),it||(it=wa.createElement("text",{x:429.986,y:366.068,fontFamily:"sans-serif",fontSize:14,textLength:4.43})),st||(st=wa.createElement("text",{x:434.416,y:366.068,fontFamily:"sans-serif",fontSize:14,textLength:81.826},"connections")),lt||(lt=wa.createElement("text",{x:516.242,y:366.068,fontFamily:"sans-serif",fontSize:14,textLength:4.43})),ot||(ot=wa.createElement("text",{x:520.672,y:366.068,fontFamily:"sans-serif",fontSize:14,textLength:13.836},"to")),rt||(rt=wa.createElement("text",{x:433.671,y:382.557,fontFamily:"sans-serif",fontSize:14,textLength:37.276},"peers"))),wa.createElement("a",{xlinkActuate:"onRequest",xlinkHref:"https://github.com/cardano-scaling/hydra/blob/master/hydra-node/src/Hydra/Logging.hs",xlinkShow:"new",xlinkTitle:"https://github.com/cardano-scaling/hydra/blob/master/hydra-node/src/Hydra/Logging.hs",xlinkType:"simple",className:"entity","data-entity":"logging","data-source-line":68,"data-uid":"ent0010",target:"_top"},wa.createElement("rect",{width:165.004,height:85.953,x:596.81,y:130.798,fill:"#85BBF0",rx:2.5,ry:2.5,style:{stroke:"#78a8d8",strokeWidth:.5}}),ft||(ft=wa.createElement("text",{x:640.168,y:152.4,fontFamily:"sans-serif",fontSize:12,fontStyle:"italic",textLength:78.287},"\xabcomponent\xbb")),ct||(ct=wa.createElement("text",{x:645.863,y:170.4,fontFamily:"sans-serif",fontSize:16,fontWeight:"bold",textLength:66.898},"Logging")),xt||(xt=wa.createElement("text",{x:677.097,y:187.31,fontFamily:"sans-serif",fontSize:14,textLength:4.43})),ht||(ht=wa.createElement("text",{x:606.81,y:203.798,fontFamily:"sans-serif",fontSize:14,textLength:41.057},"Dump")),yt||(yt=wa.createElement("text",{x:647.867,y:203.798,fontFamily:"sans-serif",fontSize:14,textLength:4.43})),mt||(mt=wa.createElement("text",{x:652.296,y:203.798,fontFamily:"sans-serif",fontSize:14,textLength:33.113},"JSON")),dt||(dt=wa.createElement("text",{x:685.41,y:203.798,fontFamily:"sans-serif",fontSize:14,textLength:4.43})),gt||(gt=wa.createElement("text",{x:689.839,y:203.798,fontFamily:"sans-serif",fontSize:14,textLength:13.836},"to")),Ft||(Ft=wa.createElement("text",{x:703.675,y:203.798,fontFamily:"sans-serif",fontSize:14,textLength:4.43})),Et||(Et=wa.createElement("text",{x:708.105,y:203.798,fontFamily:"sans-serif",fontSize:14,textLength:43.709},"stdout"))),wa.createElement("a",{xlinkActuate:"onRequest",xlinkHref:"https://github.com/cardano-scaling/hydra/blob/master/hydra-node/src/Hydra/Logging/Monitoring.hs",xlinkShow:"new",xlinkTitle:"https://github.com/cardano-scaling/hydra/blob/master/hydra-node/src/Hydra/Logging/Monitoring.hs",xlinkType:"simple",className:"entity","data-entity":"monitoring","data-source-line":68,"data-uid":"ent0011",target:"_top"},wa.createElement("rect",{width:215.193,height:85.953,x:346.71,y:130.798,fill:"#85BBF0",rx:2.5,ry:2.5,style:{stroke:"#78a8d8",strokeWidth:.5}}),St||(St=wa.createElement("text",{x:415.163,y:152.4,fontFamily:"sans-serif",fontSize:12,fontStyle:"italic",textLength:78.287},"\xabcomponent\xbb")),zt||(zt=wa.createElement("text",{x:408.959,y:170.4,fontFamily:"sans-serif",fontSize:16,fontWeight:"bold",textLength:90.695},"Monitoring")),Lt||(Lt=wa.createElement("text",{x:452.092,y:187.31,fontFamily:"sans-serif",fontSize:14,textLength:4.43})),pt||(pt=wa.createElement("text",{x:356.71,y:203.798,fontFamily:"sans-serif",fontSize:14,textLength:55.658},"Exposes")),ut||(ut=wa.createElement("text",{x:412.368,y:203.798,fontFamily:"sans-serif",fontSize:14,textLength:4.43})),kt||(kt=wa.createElement("text",{x:416.798,y:203.798,fontFamily:"sans-serif",fontSize:14,textLength:80.486},"Prometheus")),bt||(bt=wa.createElement("text",{x:497.284,y:203.798,fontFamily:"sans-serif",fontSize:14,textLength:4.43})),vt||(vt=wa.createElement("text",{x:501.714,y:203.798,fontFamily:"sans-serif",fontSize:14,textLength:50.19},"metrics"))),wa.createElement("g",{className:"entity","data-entity":"ledger","data-source-line":68,"data-uid":"ent0012"},wa.createElement("rect",{width:177.09,height:100.086,x:914.76,y:494.928,fill:"#23AA12",rx:2.5,ry:2.5,style:{stroke:"#78a8d8",strokeWidth:.5}}),Wt||(Wt=wa.createElement("text",{x:973.182,y:516.53,fontFamily:"sans-serif",fontSize:12,fontStyle:"italic",textLength:60.246},"\xabexternal\xbb")),wt||(wt=wa.createElement("text",{x:964.161,y:530.663,fontFamily:"sans-serif",fontSize:12,fontStyle:"italic",textLength:78.287},"\xabcomponent\xbb")),jt||(jt=wa.createElement("text",{x:938.02,y:548.663,fontFamily:"sans-serif",fontSize:16,fontWeight:"bold",textLength:68.813},"Cardano")),Ht||(Ht=wa.createElement("text",{x:1006.832,y:548.663,fontFamily:"sans-serif",fontSize:16,fontWeight:"bold",textLength:5.273})),Tt||(Tt=wa.createElement("text",{x:1012.106,y:548.663,fontFamily:"sans-serif",fontSize:16,fontWeight:"bold",textLength:56.484},"Ledger")),Nt||(Nt=wa.createElement("text",{x:1001.09,y:565.573,fontFamily:"sans-serif",fontSize:14,textLength:4.43})),_t||(_t=wa.createElement("text",{x:924.76,y:582.061,fontFamily:"sans-serif",fontSize:14,textLength:65.365},"Maintains")),Ct||(Ct=wa.createElement("text",{x:990.125,y:582.061,fontFamily:"sans-serif",fontSize:14,textLength:4.43})),Mt||(Mt=wa.createElement("text",{x:994.555,y:582.061,fontFamily:"sans-serif",fontSize:14,textLength:36.039},"Layer")),At||(At=wa.createElement("text",{x:1030.594,y:582.061,fontFamily:"sans-serif",fontSize:14,textLength:4.43})),Pt||(Pt=wa.createElement("text",{x:1035.024,y:582.061,fontFamily:"sans-serif",fontSize:14,textLength:8.852},"2")),Bt||(Bt=wa.createElement("text",{x:1043.876,y:582.061,fontFamily:"sans-serif",fontSize:14,textLength:4.43})),Dt||(Dt=wa.createElement("text",{x:1048.306,y:582.061,fontFamily:"sans-serif",fontSize:14,textLength:33.544},"State"))),wa.createElement("g",{className:"entity","data-entity":"hydra_node_peer","data-source-line":76,"data-uid":"ent0028"},wa.createElement("rect",{width:170.617,height:67.109,x:7,y:310.728,fill:"#438DD5",rx:2.5,ry:2.5,style:{stroke:"#3c7fc0",strokeWidth:.5}}),It||(It=wa.createElement("text",{x:58.726,y:332.33,fill:"#FFF",fontFamily:"sans-serif",fontSize:12,fontStyle:"italic",textLength:67.166},"\xabcontainer\xbb")),Rt||(Rt=wa.createElement("text",{x:17,y:350.33,fill:"#FFF",fontFamily:"sans-serif",fontSize:16,fontWeight:"bold",textLength:49.094},"Hydra")),Ot||(Ot=wa.createElement("text",{x:66.094,y:350.33,fill:"#FFF",fontFamily:"sans-serif",fontSize:16,fontWeight:"bold",textLength:5.273})),qt||(qt=wa.createElement("text",{x:71.367,y:350.33,fill:"#FFF",fontFamily:"sans-serif",fontSize:16,fontWeight:"bold",textLength:42.492},"Node")),Jt||(Jt=wa.createElement("text",{x:113.859,y:350.33,fill:"#FFF",fontFamily:"sans-serif",fontSize:16,fontWeight:"bold",textLength:5.273})),Ut||(Ut=wa.createElement("text",{x:119.133,y:350.33,fill:"#FFF",fontFamily:"sans-serif",fontSize:16,fontWeight:"bold",textLength:48.484},"(peer)")),Xt||(Xt=wa.createElement("text",{x:30.161,y:365.306,fill:"#FFF",fontFamily:"sans-serif",fontSize:12,fontStyle:"italic",textLength:33.914},"[Local")),$t||($t=wa.createElement("text",{x:64.075,y:365.306,fill:"#FFF",fontFamily:"sans-serif",fontSize:12,fontStyle:"italic",textLength:3.797})),Gt||(Gt=wa.createElement("text",{x:67.872,y:365.306,fill:"#FFF",fontFamily:"sans-serif",fontSize:12,fontStyle:"italic",textLength:86.584},"cardano-node]"))),wa.createElement("g",{className:"entity","data-entity":"cardano_node","data-source-line":76,"data-uid":"ent0029"},wa.createElement("rect",{width:139.385,height:67.109,x:479.62,y:725.408,fill:"#438DD5",rx:2.5,ry:2.5,style:{stroke:"#3c7fc0",strokeWidth:.5}}),Kt||(Kt=wa.createElement("text",{x:515.729,y:747.01,fill:"#FFF",fontFamily:"sans-serif",fontSize:12,fontStyle:"italic",textLength:67.166},"\xabcontainer\xbb")),Qt||(Qt=wa.createElement("text",{x:491.023,y:765.01,fill:"#FFF",fontFamily:"sans-serif",fontSize:16,fontWeight:"bold",textLength:68.813},"Cardano")),Vt||(Vt=wa.createElement("text",{x:559.836,y:765.01,fill:"#FFF",fontFamily:"sans-serif",fontSize:16,fontWeight:"bold",textLength:5.273})),Yt||(Yt=wa.createElement("text",{x:565.109,y:765.01,fill:"#FFF",fontFamily:"sans-serif",fontSize:16,fontWeight:"bold",textLength:42.492},"Node")),Zt||(Zt=wa.createElement("text",{x:489.62,y:779.986,fill:"#FFF",fontFamily:"sans-serif",fontSize:12,fontStyle:"italic",textLength:33.914},"[Local")),en||(en=wa.createElement("text",{x:523.534,y:779.986,fill:"#FFF",fontFamily:"sans-serif",fontSize:12,fontStyle:"italic",textLength:3.797})),tn||(tn=wa.createElement("text",{x:527.331,y:779.986,fill:"#FFF",fontFamily:"sans-serif",fontSize:12,fontStyle:"italic",textLength:81.674},"cadano-node]"))),wa.createElement("g",{className:"entity","data-entity":"cardano_node_peer","data-source-line":76,"data-uid":"ent0030"},wa.createElement("rect",{width:190.336,height:67.109,x:90.14,y:511.418,fill:"#438DD5",rx:2.5,ry:2.5,style:{stroke:"#3c7fc0",strokeWidth:.5}}),nn||(nn=wa.createElement("text",{x:151.725,y:533.02,fill:"#FFF",fontFamily:"sans-serif",fontSize:12,fontStyle:"italic",textLength:67.166},"\xabcontainer\xbb")),an||(an=wa.createElement("text",{x:100.14,y:551.02,fill:"#FFF",fontFamily:"sans-serif",fontSize:16,fontWeight:"bold",textLength:68.813},"Cardano")),sn||(sn=wa.createElement("text",{x:168.952,y:551.02,fill:"#FFF",fontFamily:"sans-serif",fontSize:16,fontWeight:"bold",textLength:5.273})),ln||(ln=wa.createElement("text",{x:174.226,y:551.02,fill:"#FFF",fontFamily:"sans-serif",fontSize:16,fontWeight:"bold",textLength:42.492},"Node")),on||(on=wa.createElement("text",{x:216.718,y:551.02,fill:"#FFF",fontFamily:"sans-serif",fontSize:16,fontWeight:"bold",textLength:5.273})),rn||(rn=wa.createElement("text",{x:221.992,y:551.02,fill:"#FFF",fontFamily:"sans-serif",fontSize:16,fontWeight:"bold",textLength:48.484},"(peer)")),fn||(fn=wa.createElement("text",{x:123.16,y:565.996,fill:"#FFF",fontFamily:"sans-serif",fontSize:12,fontStyle:"italic",textLength:33.914},"[Local")),cn||(cn=wa.createElement("text",{x:157.075,y:565.996,fill:"#FFF",fontFamily:"sans-serif",fontSize:12,fontStyle:"italic",textLength:3.797})),xn||(xn=wa.createElement("text",{x:160.871,y:565.996,fill:"#FFF",fontFamily:"sans-serif",fontSize:12,fontStyle:"italic",textLength:86.584},"cardano-node]"))),wa.createElement("g",{className:"entity","data-entity":"hydra_client","data-source-line":76,"data-uid":"ent0031"},wa.createElement("rect",{width:122.539,height:52.977,x:1354.04,y:317.798,fill:"#438DD5",rx:2.5,ry:2.5,style:{stroke:"#3c7fc0",strokeWidth:.5}}),hn||(hn=wa.createElement("text",{x:1381.726,y:339.4,fill:"#FFF",fontFamily:"sans-serif",fontSize:12,fontStyle:"italic",textLength:67.166},"\xabcontainer\xbb")),yn||(yn=wa.createElement("text",{x:1364.04,y:357.4,fill:"#FFF",fontFamily:"sans-serif",fontSize:16,fontWeight:"bold",textLength:49.094},"Hydra")),mn||(mn=wa.createElement("text",{x:1413.134,y:357.4,fill:"#FFF",fontFamily:"sans-serif",fontSize:16,fontWeight:"bold",textLength:5.273})),dn||(dn=wa.createElement("text",{x:1418.407,y:357.4,fill:"#FFF",fontFamily:"sans-serif",fontSize:16,fontWeight:"bold",textLength:48.172},"Client"))),wa.createElement("a",{xlinkActuate:"onRequest",xlinkHref:"https://github.com/cardano-scaling/hydra/tree/master/hydra-plutus",xlinkShow:"new",xlinkTitle:"https://github.com/cardano-scaling/hydra/tree/master/hydra-plutus",xlinkType:"simple",className:"entity","data-entity":"smart_contracts","data-source-line":68,"data-uid":"ent0032",target:"_top"},wa.createElement("rect",{width:209.684,height:133.063,x:676.47,y:692.438,fill:"#85BBF0",rx:2.5,ry:2.5,style:{stroke:"#78a8d8",strokeWidth:.5}}),gn||(gn=wa.createElement("text",{x:742.168,y:714.04,fontFamily:"sans-serif",fontSize:12,fontStyle:"italic",textLength:78.287},"\xabcomponent\xbb")),Fn||(Fn=wa.createElement("text",{x:687.913,y:732.04,fontFamily:"sans-serif",fontSize:16,fontWeight:"bold",textLength:49.094},"Hydra")),En||(En=wa.createElement("text",{x:737.007,y:732.04,fontFamily:"sans-serif",fontSize:16,fontWeight:"bold",textLength:5.273})),Sn||(Sn=wa.createElement("text",{x:742.28,y:732.04,fontFamily:"sans-serif",fontSize:16,fontWeight:"bold",textLength:47.82},"Smart")),zn||(zn=wa.createElement("text",{x:790.101,y:732.04,fontFamily:"sans-serif",fontSize:16,fontWeight:"bold",textLength:5.273})),Ln||(Ln=wa.createElement("text",{x:795.374,y:732.04,fontFamily:"sans-serif",fontSize:16,fontWeight:"bold",textLength:79.336},"Contracts")),pn||(pn=wa.createElement("text",{x:759.609,y:747.016,fontFamily:"sans-serif",fontSize:12,fontStyle:"italic",textLength:43.406},"[Plutus]")),un||(un=wa.createElement("text",{x:779.097,y:763.083,fontFamily:"sans-serif",fontSize:14,textLength:4.43})),kn||(kn=wa.createElement("text",{x:694.085,y:779.571,fontFamily:"sans-serif",fontSize:14,textLength:63.991},"On-chain")),bn||(bn=wa.createElement("text",{x:758.076,y:779.571,fontFamily:"sans-serif",fontSize:14,textLength:4.43})),vn||(vn=wa.createElement("text",{x:762.506,y:779.571,fontFamily:"sans-serif",fontSize:14,textLength:38.903},"smart")),Wn||(Wn=wa.createElement("text",{x:801.409,y:779.571,fontFamily:"sans-serif",fontSize:14,textLength:4.43})),wn||(wn=wa.createElement("text",{x:805.839,y:779.571,fontFamily:"sans-serif",fontSize:14,textLength:62.699},"contracts")),jn||(jn=wa.createElement("text",{x:686.47,y:796.059,fontFamily:"sans-serif",fontSize:14,textLength:73.582},"controlling")),Hn||(Hn=wa.createElement("text",{x:760.052,y:796.059,fontFamily:"sans-serif",fontSize:14,textLength:4.43})),Tn||(Tn=wa.createElement("text",{x:764.482,y:796.059,fontFamily:"sans-serif",fontSize:14,textLength:21.725},"the")),Nn||(Nn=wa.createElement("text",{x:786.206,y:796.059,fontFamily:"sans-serif",fontSize:14,textLength:4.43})),_n||(_n=wa.createElement("text",{x:790.636,y:796.059,fontFamily:"sans-serif",fontSize:14,textLength:67.341},"behaviour")),Cn||(Cn=wa.createElement("text",{x:857.977,y:796.059,fontFamily:"sans-serif",fontSize:14,textLength:4.43})),Mn||(Mn=wa.createElement("text",{x:862.407,y:796.059,fontFamily:"sans-serif",fontSize:14,textLength:13.747},"of")),An||(An=wa.createElement("text",{x:706.766,y:812.548,fontFamily:"sans-serif",fontSize:14,textLength:21.725},"the")),Pn||(Pn=wa.createElement("text",{x:728.49,y:812.548,fontFamily:"sans-serif",fontSize:14,textLength:4.43})),Bn||(Bn=wa.createElement("text",{x:732.92,y:812.548,fontFamily:"sans-serif",fontSize:14,textLength:56.793},"protocol")),Dn||(Dn=wa.createElement("text",{x:789.713,y:812.548,fontFamily:"sans-serif",fontSize:14,textLength:4.43})),In||(In=wa.createElement("text",{x:794.143,y:812.548,fontFamily:"sans-serif",fontSize:14,textLength:61.715},"on-chain"))),wa.createElement("g",{className:"link","data-entity-1":"network","data-entity-2":"head_logic","data-source-line":1765,"data-uid":"lnk22"},wa.createElement("path",{fill:"none",d:"M552.83 344.288h110.89",style:{stroke:"#666",strokeWidth:1}}),wa.createElement("path",{fill:"#666",d:"m544.83 344.288 8 3v-6zM671.72 344.288l-8-3v6z",style:{stroke:"#666",strokeWidth:1}}),Rn||(Rn=wa.createElement("text",{x:562.81,y:323.89,fill:"#666",fontFamily:"sans-serif",fontSize:12,fontWeight:"bold",textLength:36.82},"Hydra")),On||(On=wa.createElement("text",{x:599.63,y:323.89,fill:"#666",fontFamily:"sans-serif",fontSize:12,fontWeight:"bold",textLength:3.955})),qn||(qn=wa.createElement("text",{x:603.585,y:323.89,fill:"#666",fontFamily:"sans-serif",fontSize:12,fontWeight:"bold",textLength:50.959},"Protocol")),Jn||(Jn=wa.createElement("text",{x:578.537,y:338.023,fill:"#666",fontFamily:"sans-serif",fontSize:12,fontWeight:"bold",textLength:60.281},"Messages"))),wa.createElement("g",{className:"link","data-entity-1":"head_logic","data-entity-2":"api_server","data-source-line":1779,"data-uid":"lnk23"},wa.createElement("path",{fill:"none",d:"M898.74 344.288h102.42",style:{stroke:"#666",strokeWidth:1}}),wa.createElement("path",{fill:"#666",d:"m890.74 344.288 8 3v-6zM1009.16 344.288l-8-3v6z",style:{stroke:"#666",strokeWidth:1}}),Un||(Un=wa.createElement("text",{x:909.306,y:323.89,fill:"#666",fontFamily:"sans-serif",fontSize:12,fontWeight:"bold",textLength:68.684},"ClientInput")),Xn||(Xn=wa.createElement("text",{x:977.989,y:323.89,fill:"#666",fontFamily:"sans-serif",fontSize:12,fontWeight:"bold",textLength:3.955})),$n||($n=wa.createElement("text",{x:981.944,y:323.89,fill:"#666",fontFamily:"sans-serif",fontSize:12,fontWeight:"bold",textLength:8.935},"&")),Gn||(Gn=wa.createElement("text",{x:908.96,y:338.023,fill:"#666",fontFamily:"sans-serif",fontSize:12,fontWeight:"bold",textLength:82.266},"ServerOutput"))),wa.createElement("g",{className:"link","data-entity-1":"head_logic","data-entity-2":"chain","data-source-line":1737,"data-uid":"lnk24"},wa.createElement("path",{fill:"none",d:"M781.31 403.938v73.37",style:{stroke:"#666",strokeWidth:1}}),wa.createElement("path",{fill:"#666",d:"m781.31 395.938-3 8h6zM781.31 485.308l3-8h-6z",style:{stroke:"#666",strokeWidth:1}}),Kn||(Kn=wa.createElement("text",{x:782.31,y:438.11,fill:"#666",fontFamily:"sans-serif",fontSize:12,fontWeight:"bold",textLength:75.586},"Observation")),Qn||(Qn=wa.createElement("text",{x:857.896,y:438.11,fill:"#666",fontFamily:"sans-serif",fontSize:12,fontWeight:"bold",textLength:3.955})),Vn||(Vn=wa.createElement("text",{x:861.851,y:438.11,fill:"#666",fontFamily:"sans-serif",fontSize:12,fontWeight:"bold",textLength:8.935},"&")),Yn||(Yn=wa.createElement("text",{x:792.35,y:452.243,fill:"#666",fontFamily:"sans-serif",fontSize:12,fontWeight:"bold",textLength:68.397},"OnChainTx"))),wa.createElement("g",{className:"link","data-entity-1":"head_logic","data-entity-2":"ledger","data-source-line":1730,"data-uid":"lnk25"},wa.createElement("path",{fill:"none",d:"M844.64 395.938c11.66 9.66 23.63 19.81 34.67 29.57 24.97 22.09 46.085 41.963 68.395 63.583",style:{stroke:"#666",strokeWidth:1}}),wa.createElement("path",{fill:"#666",d:"m953.45 494.658-3.657-7.721-4.176 4.308z",style:{stroke:"#666",strokeWidth:1}}),Zn||(Zn=wa.createElement("text",{x:911.64,y:445.11,fill:"#666",fontFamily:"sans-serif",fontSize:12,fontWeight:"bold",textLength:35.637},"Apply")),ea||(ea=wa.createElement("text",{x:947.277,y:445.11,fill:"#666",fontFamily:"sans-serif",fontSize:12,fontWeight:"bold",textLength:3.955})),ta||(ta=wa.createElement("text",{x:951.232,y:445.11,fill:"#666",fontFamily:"sans-serif",fontSize:12,fontWeight:"bold",textLength:15.369},"Tx"))),wa.createElement("g",{className:"link","data-entity-1":"wallet","data-entity-2":"chain","data-source-line":1758,"data-uid":"lnk27"},wa.createElement("path",{fill:"none",d:"M548.17 544.968h134.51",style:{stroke:"#666",strokeWidth:1}}),wa.createElement("path",{fill:"#666",d:"m540.17 544.968 8 3v-6z",style:{stroke:"#666",strokeWidth:1}}),na||(na=wa.createElement("text",{x:558.01,y:538.57,fill:"#666",fontFamily:"sans-serif",fontSize:12,fontWeight:"bold",textLength:26.555},"Sign")),aa||(aa=wa.createElement("text",{x:584.565,y:538.57,fill:"#666",fontFamily:"sans-serif",fontSize:12,fontWeight:"bold",textLength:3.955})),ia||(ia=wa.createElement("text",{x:588.52,y:538.57,fill:"#666",fontFamily:"sans-serif",fontSize:12,fontWeight:"bold",textLength:76.576},"transactions"))),wa.createElement("g",{className:"link","data-entity-1":"chain","data-entity-2":"smart_contracts","data-source-line":1706,"data-uid":"lnk33"},wa.createElement("path",{fill:"none",d:"M781.31 604.738v79.25",style:{stroke:"#666",strokeWidth:1}}),wa.createElement("path",{fill:"#666",d:"m781.31 691.988 3-8h-6z",style:{stroke:"#666",strokeWidth:1}}),sa||(sa=wa.createElement("text",{x:782.31,y:654.04,fill:"#666",fontFamily:"sans-serif",fontSize:12,fontWeight:"bold",textLength:22.652},"Use"))),wa.createElement("g",{className:"link","data-entity-1":"chain","data-entity-2":"cardano_node","data-source-line":1737,"data-uid":"lnk34"},wa.createElement("path",{fill:"none",d:"M711.085 610.135c-42.51 38.85-84.849 77.537-119.929 109.587",style:{stroke:"#666",strokeWidth:1}}),wa.createElement("path",{fill:"#666",d:"m716.99 604.738-7.93 3.183 4.049 4.429zM585.25 725.118l7.93-3.18-4.047-4.43z",style:{stroke:"#666",strokeWidth:1}}),la||(la=wa.createElement("text",{x:722.719,y:637.438,fill:"#666",fontFamily:"sans-serif",fontSize:0,textLength:0},".")),oa||(oa=wa.createElement("text",{x:680.2,y:659.04,fill:"#666",fontFamily:"sans-serif",fontSize:12,fontStyle:"italic",textLength:28.658},"[N2C")),ra||(ra=wa.createElement("text",{x:708.858,y:659.04,fill:"#666",fontFamily:"sans-serif",fontSize:12,fontStyle:"italic",textLength:3.797})),fa||(fa=wa.createElement("text",{x:712.655,y:659.04,fill:"#666",fontFamily:"sans-serif",fontSize:12,fontStyle:"italic",textLength:52.582},"protocol]"))),wa.createElement("g",{className:"link","data-entity-1":"cardano_node_peer","data-entity-2":"cardano_node","data-source-line":1765,"data-uid":"lnk36"},wa.createElement("path",{fill:"none",d:"M248.693 582.885c68.3 39.78 168.744 98.277 237.094 138.087",style:{stroke:"#666",strokeWidth:1}}),wa.createElement("path",{fill:"#666",d:"m241.78 578.858 5.403 6.619 3.02-5.185zM492.7 724.998l-5.403-6.618-3.02 5.184z",style:{stroke:"#666",strokeWidth:1}}),ca||(ca=wa.createElement("text",{x:422.02,y:637.438,fill:"#666",fontFamily:"sans-serif",fontSize:0,textLength:0},".")),xa||(xa=wa.createElement("text",{x:379.22,y:659.04,fill:"#666",fontFamily:"sans-serif",fontSize:12,fontStyle:"italic",textLength:29.221},"[N2N")),ha||(ha=wa.createElement("text",{x:408.441,y:659.04,fill:"#666",fontFamily:"sans-serif",fontSize:12,fontStyle:"italic",textLength:3.797})),ya||(ya=wa.createElement("text",{x:412.238,y:659.04,fill:"#666",fontFamily:"sans-serif",fontSize:12,fontStyle:"italic",textLength:52.582},"protocol]"))),wa.createElement("g",{className:"link","data-entity-1":"hydra_node_peer","data-entity-2":"cardano_node_peer","data-source-line":1710,"data-uid":"lnk37"},wa.createElement("path",{fill:"none",d:"M111.062 385.344c17.23 36.81 38.237 81.688 55.477 118.528",style:{stroke:"#666",strokeWidth:1}}),wa.createElement("path",{fill:"#666",d:"m107.67 378.098.674 8.518 5.435-2.544zM169.93 511.118l-.674-8.517-5.434 2.543z",style:{stroke:"#666",strokeWidth:1}}),ma||(ma=wa.createElement("text",{x:185.119,y:428.508,fill:"#666",fontFamily:"sans-serif",fontSize:0,textLength:0},".")),da||(da=wa.createElement("text",{x:142.6,y:450.11,fill:"#666",fontFamily:"sans-serif",fontSize:12,fontStyle:"italic",textLength:28.658},"[N2C")),ga||(ga=wa.createElement("text",{x:171.258,y:450.11,fill:"#666",fontFamily:"sans-serif",fontSize:12,fontStyle:"italic",textLength:3.797})),Fa||(Fa=wa.createElement("text",{x:175.055,y:450.11,fill:"#666",fontFamily:"sans-serif",fontSize:12,fontStyle:"italic",textLength:52.582},"protocol]"))),wa.createElement("g",{className:"link","data-entity-1":"hydra_node_peer","data-entity-2":"network","data-source-line":1765,"data-uid":"lnk39"},wa.createElement("path",{fill:"none",d:"M186.08 344.288h165.55",style:{stroke:"#666",strokeWidth:1}}),wa.createElement("path",{fill:"#666",d:"m178.08 344.288 8 3v-6zM359.63 344.288l-8-3v6z",style:{stroke:"#666",strokeWidth:1}}),Ea||(Ea=wa.createElement("text",{x:269.278,y:316.288,fill:"#666",fontFamily:"sans-serif",fontSize:0,textLength:0},".")),Sa||(Sa=wa.createElement("text",{x:195.86,y:337.89,fill:"#666",fontFamily:"sans-serif",fontSize:12,fontStyle:"italic",textLength:38.08},"[Hydra")),za||(za=wa.createElement("text",{x:233.94,y:337.89,fill:"#666",fontFamily:"sans-serif",fontSize:12,fontStyle:"italic",textLength:3.797})),La||(La=wa.createElement("text",{x:237.737,y:337.89,fill:"#666",fontFamily:"sans-serif",fontSize:12,fontStyle:"italic",textLength:48.58},"Network")),pa||(pa=wa.createElement("text",{x:286.317,y:337.89,fill:"#666",fontFamily:"sans-serif",fontSize:12,fontStyle:"italic",textLength:3.797})),ua||(ua=wa.createElement("text",{x:290.114,y:337.89,fill:"#666",fontFamily:"sans-serif",fontSize:12,fontStyle:"italic",textLength:52.582},"protocol]"))),wa.createElement("g",{className:"link","data-entity-1":"api_server","data-entity-2":"hydra_client","data-source-line":1779,"data-uid":"lnk40"},wa.createElement("path",{fill:"none",d:"M1221.38 344.288h124.45",style:{stroke:"#666",strokeWidth:1}}),wa.createElement("path",{fill:"#666",d:"m1213.38 344.288 8 3v-6zM1353.83 344.288l-8-3v6z",style:{stroke:"#666",strokeWidth:1}}),ka||(ka=wa.createElement("text",{x:1284.023,y:316.288,fill:"#666",fontFamily:"sans-serif",fontSize:0,textLength:0},".")),ba||(ba=wa.createElement("text",{x:1231.62,y:337.89,fill:"#666",fontFamily:"sans-serif",fontSize:12,fontStyle:"italic",textLength:104.807},"[JSON/Websocket]"))))},Ta={},Na="Architecture",_a={},Ca=[{value:"Event sourcing",id:"event-sourcing",level:3},{value:"Network",id:"network",level:3},{value:"Chain interaction",id:"chain-interaction",level:3},{value:"Chain",id:"chain",level:4},{value:"Wallet",id:"wallet",level:4},{value:"Head logic",id:"head-logic",level:3},{value:"Hydra smart contracts",id:"hydra-smart-contracts",level:3},{value:"API",id:"api",level:3},{value:"Persistence",id:"persistence",level:3},{value:"Logging",id:"logging",level:3},{value:"Monitoring",id:"monitoring",level:3}];function Ma(e){const t={a:"a",admonition:"admonition",code:"code",em:"em",h1:"h1",h3:"h3",h4:"h4",header:"header",p:"p",pre:"pre",...(0,Wa.R)(),...e.components};return(0,va.jsxs)(va.Fragment,{children:[(0,va.jsx)(t.header,{children:(0,va.jsx)(t.h1,{id:"architecture",children:"Architecture"})}),"\n",(0,va.jsxs)(t.p,{children:["This document describes the architecture of the current implementation\nof a ",(0,va.jsx)(t.code,{children:"hydra-node"}),". The following diagram represents the main\ncomponents of a Hydra node using the ",(0,va.jsx)(t.a,{href:"https://c4model.com/#ComponentDiagram",children:"C4 Component\nDiagram"})," notation."]}),"\n","\n",(0,va.jsx)(Ha,{className:"architecture"}),"\n",(0,va.jsxs)(t.admonition,{type:"info",children:[(0,va.jsxs)(t.p,{children:["This diagram is manually produced using the ",(0,va.jsx)(t.a,{href:"https://plantuml.com",children:"PlantUML"})," graphing tool with ",(0,va.jsx)(t.a,{href:"https://github.com/plantuml-stdlib/C4-PlantUML",children:"C4 extensions"}),"."]}),(0,va.jsx)(t.pre,{children:(0,va.jsx)(t.code,{children:"$ plantuml -Tsvg architecture-c4.puml\n"})})]}),"\n",(0,va.jsx)(t.h3,{id:"event-sourcing",children:"Event sourcing"}),"\n",(0,va.jsxs)(t.p,{children:["The ",(0,va.jsx)(t.code,{children:"hydra-node"})," is an event sourced application. This means that the main logic is processing ",(0,va.jsx)(t.em,{children:"inputs"})," (also called commands) and produces ",(0,va.jsx)(t.em,{children:"events"}),". These events are saved and loaded to persist application state across restarts. Also, most events are transformed to ",(0,va.jsx)(t.em,{children:"outputs"})," and can be observed on the API. See ",(0,va.jsx)(t.a,{href:"./architecture/event-sourcing",children:"Event Sourcing"})," for details."]}),"\n",(0,va.jsx)(t.h3,{id:"network",children:"Network"}),"\n",(0,va.jsxs)(t.p,{children:["The ",(0,va.jsx)(t.em,{children:"network"})," component is responsible for communication between Hydra nodes related to the off-chain part of the Hydra protocol. See ",(0,va.jsx)(t.a,{href:"./architecture/networking",children:"Networking"})," for details."]}),"\n",(0,va.jsx)(t.h3,{id:"chain-interaction",children:"Chain interaction"}),"\n",(0,va.jsx)(t.h4,{id:"chain",children:"Chain"}),"\n",(0,va.jsxs)(t.p,{children:["The ",(0,va.jsx)(t.em,{children:"chain"})," component interfaces the Hydra node with the Cardano (layer 1) chain. The current implementation, called ",(0,va.jsx)(t.code,{children:"Direct"}),", uses the ",(0,va.jsx)(t.code,{children:"node-to-client"})," protocol to both 'follow the chain' and observe new blocks and transactions that can change the state of the head. It also submits transactions in response to client requests or as needed to advance the protocol's state. This component connects to a locally spun ",(0,va.jsx)(t.code,{children:"cardano-node"})," using the ",(0,va.jsx)(t.em,{children:"local socket"})," and contains the ",(0,va.jsx)(t.em,{children:"off-chain"})," logic, based on ",(0,va.jsx)(t.code,{children:"cardano-api"}),", which knows how to observe and build transactions relevant to the Hydra protocol. For more details, see ",(0,va.jsx)(t.a,{href:"/adr/10",children:"ADR-10"}),"."]}),"\n",(0,va.jsx)(t.h4,{id:"wallet",children:"Wallet"}),"\n",(0,va.jsxs)(t.p,{children:["The Hydra node maintains an internal wallet using the Cardano signing key provided to the ",(0,va.jsx)(t.code,{children:"hydra-node"}),". This wallet is used to handle the payment of transaction fees and to sign transactions."]}),"\n",(0,va.jsx)(t.h3,{id:"head-logic",children:"Head logic"}),"\n",(0,va.jsxs)(t.p,{children:["This component is at the core of the Hydra node, implementing the protocol's ",(0,va.jsx)(t.em,{children:"state machine"}),". It is structured around the concepts of ",(0,va.jsx)(t.code,{children:"Input"}),"s and ",(0,va.jsx)(t.code,{children:"Effect"}),"s. ",(0,va.jsx)(t.code,{children:"Input"}),"s from the outside world are interpreted against the current state, potentially resulting in internal ",(0,va.jsx)(t.code,{children:"Event"}),"s, which are aggregated into an updated state. This can then produce ",(0,va.jsx)(t.code,{children:"Effect"}),"s, leading to 'side effects' on the outside world. The state available to the ",(0,va.jsx)(t.em,{children:"head logic"})," consists of the head's content (eg, current ledger, pending transactions) ",(0,va.jsx)(t.em,{children:"and"})," the data from layer 1 needed to observe and trigger on-chain transitions."]}),"\n",(0,va.jsx)(t.h3,{id:"hydra-smart-contracts",children:"Hydra smart contracts"}),"\n",(0,va.jsxs)(t.p,{children:["This component represents all the Hydra smart contracts needed for the Hydra Head protocol operation. Currently, the contracts are written using ",(0,va.jsx)(t.code,{children:"Plutus-Tx"}),". The scripts are optimized using a custom ",(0,va.jsx)(t.code,{children:"ScriptContext"})," and specific error codes."]}),"\n",(0,va.jsx)(t.h3,{id:"api",children:"API"}),"\n",(0,va.jsxs)(t.p,{children:["The ",(0,va.jsx)(t.code,{children:"hydra-node"})," component exposes an ",(0,va.jsx)(t.a,{href:"https://hydra.family/head-protocol/unstable/api-reference",children:"asynchronous API"})," through a WebSocket server. This API is available to the ",(0,va.jsx)(t.em,{children:"Hydra client"})," for sending commands and observing changes in the state of the Hydra head. Upon startup, the API server loads all historical messages from the persistence layer and serves them to clients interested in observing them."]}),"\n",(0,va.jsx)(t.h3,{id:"persistence",children:"Persistence"}),"\n",(0,va.jsxs)(t.p,{children:["The ",(0,va.jsx)(t.code,{children:"hydra-node"})," state is preserved on disk. The persistence layer is responsible for loading historical messages and Hydra state from disk, as well as storing them in so-called event log files. Depending on the rotation configuration used at startup, these event log files will be rotated to improve restart times. So far, there hasn\u2019t been a need to increase the complexity of this layer or to use a database."]}),"\n",(0,va.jsx)(t.h3,{id:"logging",children:"Logging"}),"\n",(0,va.jsxs)(t.p,{children:["The Hydra node logs all internal side effects as JSON-formatted messages to its ",(0,va.jsx)(t.em,{children:"standard output"})," stream."]}),"\n",(0,va.jsx)(t.h3,{id:"monitoring",children:"Monitoring"}),"\n",(0,va.jsxs)(t.p,{children:["The Hydra node ",(0,va.jsx)(t.a,{href:"https://hydra.family/head-protocol/docs/getting-started#monitoring",children:"optionally"})," exposes ",(0,va.jsx)(t.a,{href:"https://prometheus.io/",children:"Prometheus"}),"-compliant ",(0,va.jsx)(t.em,{children:"metrics"})," through an HTTP server, on the standard ",(0,va.jsx)(t.code,{children:"/metrics"})," endpoint."]})]})}function Aa(e={}){const{wrapper:t}={...(0,Wa.R)(),...e.components};return t?(0,va.jsx)(t,{...e,children:(0,va.jsx)(Ma,{...e})}):Ma(e)}},28453:(e,t,n)=>{n.d(t,{R:()=>l,x:()=>o});var a=n(96540);const i={},s=a.createContext(i);function l(e){const t=a.useContext(s);return a.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function o(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:l(e.components),a.createElement(s.Provider,{value:t},e.children)}}}]);