<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><meta name="viewport" content="width=device-width, initial-scale=1" /><title>Hydra.Chain.Direct.HandlersSpec</title><link href="linuwial.css" rel="stylesheet" type="text/css" title="Linuwial" /><link rel="stylesheet" type="text/css" href="quick-jump.css" /><link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=PT+Sans:400,400i,700" /><script src="haddock-bundle.min.js" async="async" type="text/javascript"></script><script type="text/x-mathjax-config">MathJax.Hub.Config({ tex2jax: { processClass: "mathjax", ignoreClass: ".*" } });</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script></head><body><div id="package-header"><span class="caption">hydra-node</span><ul class="links" id="page-menu"><li><a href="src/Hydra.Chain.Direct.HandlersSpec.html">Source</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul></div><div id="content"><div id="module-header"><table class="info"><tr><th>Safe Haskell</th><td>Safe-Inferred</td></tr><tr><th>Language</th><td>GHC2021</td></tr></table><p class="caption">Hydra.Chain.Direct.HandlersSpec</p></div><div id="synopsis"><details id="syn"><summary>Synopsis</summary><ul class="details-toggle" data-details-id="syn"><li class="src short"><a href="#v:genTimeHandleWithSlotInsideHorizon">genTimeHandleWithSlotInsideHorizon</a> :: Gen (TimeHandle, SlotNo)</li><li class="src short"><a href="#v:genTimeHandleWithSlotPastHorizon">genTimeHandleWithSlotPastHorizon</a> :: Gen (TimeHandle, SlotNo)</li><li class="src short"><a href="#v:spec">spec</a> :: Spec</li><li class="src short"><a href="#v:recordEventsHandler">recordEventsHandler</a> :: ChainContext -&gt; ChainStateAt -&gt; GetTimeHandle <a href="file:///nix/store/gzcywk4gwjw7sny9jb53pk5hsfrza7x1-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/Cabal-syntax-3.10.3.0/Distribution-Compat-Prelude.html#t:IO" title="Distribution.Compat.Prelude">IO</a> -&gt; <a href="file:///nix/store/gzcywk4gwjw7sny9jb53pk5hsfrza7x1-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/Cabal-syntax-3.10.3.0/Distribution-Compat-Prelude.html#t:IO" title="Distribution.Compat.Prelude">IO</a> (ChainSyncHandler <a href="file:///nix/store/gzcywk4gwjw7sny9jb53pk5hsfrza7x1-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/Cabal-syntax-3.10.3.0/Distribution-Compat-Prelude.html#t:IO" title="Distribution.Compat.Prelude">IO</a>, <a href="file:///nix/store/gzcywk4gwjw7sny9jb53pk5hsfrza7x1-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/Cabal-syntax-3.10.3.0/Distribution-Compat-Prelude.html#t:IO" title="Distribution.Compat.Prelude">IO</a> [ChainEvent Tx])</li><li class="src short"><span class="keyword">data</span> <a href="#t:TestBlock">TestBlock</a> = <a href="#v:TestBlock">TestBlock</a> BlockHeader [Tx]</li><li class="src short"><a href="#v:genBlockAt">genBlockAt</a> :: SlotNo -&gt; [Tx] -&gt; Gen <a href="Hydra-Chain-Direct-HandlersSpec.html#t:TestBlock" title="Hydra.Chain.Direct.HandlersSpec">TestBlock</a></li><li class="src short"><a href="#v:genRollbackPoint">genRollbackPoint</a> :: [<a href="Hydra-Chain-Direct-HandlersSpec.html#t:TestBlock" title="Hydra.Chain.Direct.HandlersSpec">TestBlock</a>] -&gt; Gen ChainPoint</li><li class="src short"><a href="#v:genRollbackBlocks">genRollbackBlocks</a> :: [<a href="Hydra-Chain-Direct-HandlersSpec.html#t:TestBlock" title="Hydra.Chain.Direct.HandlersSpec">TestBlock</a>] -&gt; Gen (ChainPoint, [<a href="Hydra-Chain-Direct-HandlersSpec.html#t:TestBlock" title="Hydra.Chain.Direct.HandlersSpec">TestBlock</a>])</li><li class="src short"><a href="#v:genSequenceOfObservableBlocks">genSequenceOfObservableBlocks</a> :: Gen (ChainContext, ChainStateAt, [<a href="Hydra-Chain-Direct-HandlersSpec.html#t:TestBlock" title="Hydra.Chain.Direct.HandlersSpec">TestBlock</a>])</li></ul></details></div><div id="interface"><h1>Documentation</h1><div class="top"><p class="src"><a id="v:genTimeHandleWithSlotInsideHorizon" class="def">genTimeHandleWithSlotInsideHorizon</a> :: Gen (TimeHandle, SlotNo) <a href="src/Hydra.Chain.Direct.HandlersSpec.html#genTimeHandleWithSlotInsideHorizon" class="link">Source</a> <a href="#v:genTimeHandleWithSlotInsideHorizon" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:genTimeHandleWithSlotPastHorizon" class="def">genTimeHandleWithSlotPastHorizon</a> :: Gen (TimeHandle, SlotNo) <a href="src/Hydra.Chain.Direct.HandlersSpec.html#genTimeHandleWithSlotPastHorizon" class="link">Source</a> <a href="#v:genTimeHandleWithSlotPastHorizon" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:spec" class="def">spec</a> :: Spec <a href="src/Hydra.Chain.Direct.HandlersSpec.html#spec" class="link">Source</a> <a href="#v:spec" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:recordEventsHandler" class="def">recordEventsHandler</a> :: ChainContext -&gt; ChainStateAt -&gt; GetTimeHandle <a href="file:///nix/store/gzcywk4gwjw7sny9jb53pk5hsfrza7x1-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/Cabal-syntax-3.10.3.0/Distribution-Compat-Prelude.html#t:IO" title="Distribution.Compat.Prelude">IO</a> -&gt; <a href="file:///nix/store/gzcywk4gwjw7sny9jb53pk5hsfrza7x1-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/Cabal-syntax-3.10.3.0/Distribution-Compat-Prelude.html#t:IO" title="Distribution.Compat.Prelude">IO</a> (ChainSyncHandler <a href="file:///nix/store/gzcywk4gwjw7sny9jb53pk5hsfrza7x1-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/Cabal-syntax-3.10.3.0/Distribution-Compat-Prelude.html#t:IO" title="Distribution.Compat.Prelude">IO</a>, <a href="file:///nix/store/gzcywk4gwjw7sny9jb53pk5hsfrza7x1-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/Cabal-syntax-3.10.3.0/Distribution-Compat-Prelude.html#t:IO" title="Distribution.Compat.Prelude">IO</a> [ChainEvent Tx]) <a href="src/Hydra.Chain.Direct.HandlersSpec.html#recordEventsHandler" class="link">Source</a> <a href="#v:recordEventsHandler" class="selflink">#</a></p><div class="doc"><p>Create a chain sync handler which records events as they are called back.</p></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:TestBlock" class="def">TestBlock</a> <a href="src/Hydra.Chain.Direct.HandlersSpec.html#TestBlock" class="link">Source</a> <a href="#t:TestBlock" class="selflink">#</a></p><div class="doc"><p>A block used for testing. This is a simpler version of the cardano-api
 <code>Block</code> and can be de-/constructed easily.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:TestBlock" class="def">TestBlock</a> BlockHeader [Tx]</td><td class="doc empty">&nbsp;</td></tr></table></div></div><div class="top"><p class="src"><a id="v:genBlockAt" class="def">genBlockAt</a> :: SlotNo -&gt; [Tx] -&gt; Gen <a href="Hydra-Chain-Direct-HandlersSpec.html#t:TestBlock" title="Hydra.Chain.Direct.HandlersSpec">TestBlock</a> <a href="src/Hydra.Chain.Direct.HandlersSpec.html#genBlockAt" class="link">Source</a> <a href="#v:genBlockAt" class="selflink">#</a></p><div class="doc"><p>Thin wrapper which generates a <code><a href="Hydra-Chain-Direct-HandlersSpec.html#t:TestBlock" title="Hydra.Chain.Direct.HandlersSpec">TestBlock</a></code> at some specific slot.</p></div></div><div class="top"><p class="src"><a id="v:genRollbackPoint" class="def">genRollbackPoint</a> :: [<a href="Hydra-Chain-Direct-HandlersSpec.html#t:TestBlock" title="Hydra.Chain.Direct.HandlersSpec">TestBlock</a>] -&gt; Gen ChainPoint <a href="src/Hydra.Chain.Direct.HandlersSpec.html#genRollbackPoint" class="link">Source</a> <a href="#v:genRollbackPoint" class="selflink">#</a></p><div class="doc"><p>Pick a block point in a list of blocks.</p></div></div><div class="top"><p class="src"><a id="v:genRollbackBlocks" class="def">genRollbackBlocks</a> :: [<a href="Hydra-Chain-Direct-HandlersSpec.html#t:TestBlock" title="Hydra.Chain.Direct.HandlersSpec">TestBlock</a>] -&gt; Gen (ChainPoint, [<a href="Hydra-Chain-Direct-HandlersSpec.html#t:TestBlock" title="Hydra.Chain.Direct.HandlersSpec">TestBlock</a>]) <a href="src/Hydra.Chain.Direct.HandlersSpec.html#genRollbackBlocks" class="link">Source</a> <a href="#v:genRollbackBlocks" class="selflink">#</a></p><div class="doc"><p>Pick a rollback point from a list of blocks and also yield the tail of
 blocks to be replayed.</p></div></div><div class="top"><p class="src"><a id="v:genSequenceOfObservableBlocks" class="def">genSequenceOfObservableBlocks</a> :: Gen (ChainContext, ChainStateAt, [<a href="Hydra-Chain-Direct-HandlersSpec.html#t:TestBlock" title="Hydra.Chain.Direct.HandlersSpec">TestBlock</a>]) <a href="src/Hydra.Chain.Direct.HandlersSpec.html#genSequenceOfObservableBlocks" class="link">Source</a> <a href="#v:genSequenceOfObservableBlocks" class="selflink">#</a></p><div class="doc"><p>Generate a non-sparse sequence of blocks each containing an observable
 transaction, starting from the returned on-chain head state.</p><p>Note that this does not generate the entire spectrum of observable
 transactions in Hydra, but only init and commits, which is already sufficient
 to observe at least one state transition and different levels of rollback.</p></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.29.2</p></div></body></html>