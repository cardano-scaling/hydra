<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-comment">-- | A basic cardano-node client that can talk to a local cardano-node.</span><span>
</span><span id="line-2"></span><span class="hs-comment">--</span><span>
</span><span id="line-3"></span><span class="hs-comment">-- The idea of this module is to provide a Haskell interface on top of</span><span>
</span><span id="line-4"></span><span class="hs-comment">-- cardano-cli's API, using cardano-api types.</span><span>
</span><span id="line-5"></span><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">Hydra.Chain.CardanoClient</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-6"></span><span>
</span><span id="line-7"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Hydra.Prelude</span></span><span>
</span><span id="line-8"></span><span>
</span><span id="line-9"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Hydra.Cardano.Api</span></span><span> </span><span class="hs-keyword">hiding</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Block</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">UTxO</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">queryCurrentEra</span></span><span class="hs-special">)</span><span>
</span><span id="line-10"></span><span>
</span><span id="line-11"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Cardano.Api.Query</span></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Query</span></span><span>
</span><span id="line-12"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Cardano.Api.UTxO</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">UTxO</span></span><span class="hs-special">)</span><span>
</span><span id="line-13"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Cardano.Api.UTxO</span></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">UTxO</span></span><span>
</span><span id="line-14"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="file:///nix/store/pdlvkcn31k7dw3q5bcndp7f9d2z5l0h3-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/containers-0.6.7/src/Data.Set.html"><span class="hs-identifier">Data.Set</span></a></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Set</span></span><span>
</span><span id="line-15"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="file:///nix/store/pdlvkcn31k7dw3q5bcndp7f9d2z5l0h3-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/Text.Printf.html"><span class="hs-identifier">Text.Printf</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///nix/store/pdlvkcn31k7dw3q5bcndp7f9d2z5l0h3-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/Text.Printf.html#printf"><span class="hs-identifier">printf</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-16"></span><span>
</span><span id="line-17"></span><span class="hs-comment">-- XXX: This should be re-exported by cardano-api</span><span>
</span><span id="line-18"></span><span class="hs-comment">-- https://github.com/IntersectMBO/cardano-api/issues/447</span><span>
</span><span id="line-19"></span><span>
</span><span id="line-20"></span><span class="hs-keyword">data</span><span> </span><span id="QueryException"><span class="annot"><a href="Hydra.Chain.CardanoClient.html#QueryException"><span class="hs-identifier hs-var">QueryException</span></a></span></span><span>
</span><span id="line-21"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="QueryAcquireException"><span class="annot"><a href="Hydra.Chain.CardanoClient.html#QueryAcquireException"><span class="hs-identifier hs-var">QueryAcquireException</span></a></span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">AcquiringFailure</span></span><span>
</span><span id="line-22"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="QueryEraMismatchException"><span class="annot"><a href="Hydra.Chain.CardanoClient.html#QueryEraMismatchException"><span class="hs-identifier hs-var">QueryEraMismatchException</span></a></span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">EraMismatch</span></span><span>
</span><span id="line-23"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="QueryUnsupportedNtcVersionException"><span class="annot"><a href="Hydra.Chain.CardanoClient.html#QueryUnsupportedNtcVersionException"><span class="hs-identifier hs-var">QueryUnsupportedNtcVersionException</span></a></span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">UnsupportedNtcVersionError</span></span><span>
</span><span id="line-24"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="QueryProtocolParamsConversionException"><span class="annot"><a href="Hydra.Chain.CardanoClient.html#QueryProtocolParamsConversionException"><span class="hs-identifier hs-var">QueryProtocolParamsConversionException</span></a></span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">ProtocolParametersConversionError</span></span><span>
</span><span id="line-25"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="QueryProtocolParamsEraNotSupported"><span class="annot"><a href="Hydra.Chain.CardanoClient.html#QueryProtocolParamsEraNotSupported"><span class="hs-identifier hs-var">QueryProtocolParamsEraNotSupported</span></a></span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">AnyCardanoEra</span></span><span>
</span><span id="line-26"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="QueryProtocolParamsEncodingFailureOnEra"><span class="annot"><a href="Hydra.Chain.CardanoClient.html#QueryProtocolParamsEncodingFailureOnEra"><span class="hs-identifier hs-var">QueryProtocolParamsEncodingFailureOnEra</span></a></span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">AnyCardanoEra</span></span><span> </span><span class="annot"><a href="file:///nix/store/pdlvkcn31k7dw3q5bcndp7f9d2z5l0h3-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/text-2.0.2/src/Data.Text.Internal.html#Text"><span class="hs-identifier hs-type">Text</span></a></span><span>
</span><span id="line-27"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="QueryEraNotInCardanoModeFailure"><span class="annot"><a href="Hydra.Chain.CardanoClient.html#QueryEraNotInCardanoModeFailure"><span class="hs-identifier hs-var">QueryEraNotInCardanoModeFailure</span></a></span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">AnyCardanoEra</span></span><span>
</span><span id="line-28"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="QueryNotShelleyBasedEraException"><span class="annot"><a href="Hydra.Chain.CardanoClient.html#QueryNotShelleyBasedEraException"><span class="hs-identifier hs-var">QueryNotShelleyBasedEraException</span></a></span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">AnyCardanoEra</span></span><span>
</span><span id="line-29"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">stock</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621680429003"><span id="local-6989586621680429029"><span id="local-6989586621680429033"><span class="annot"><span class="annottext">Int -&gt; QueryException -&gt; ShowS
[QueryException] -&gt; ShowS
QueryException -&gt; String
(Int -&gt; QueryException -&gt; ShowS)
-&gt; (QueryException -&gt; String)
-&gt; ([QueryException] -&gt; ShowS)
-&gt; Show QueryException
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
$cshowsPrec :: Int -&gt; QueryException -&gt; ShowS
showsPrec :: Int -&gt; QueryException -&gt; ShowS
$cshow :: QueryException -&gt; String
show :: QueryException -&gt; String
$cshowList :: [QueryException] -&gt; ShowS
showList :: [QueryException] -&gt; ShowS
</span><a href="file:///nix/store/pdlvkcn31k7dw3q5bcndp7f9d2z5l0h3-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/GHC.Show.html#Show"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></a></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680429037"><span id="local-6989586621680429054"><span class="annot"><span class="annottext">QueryException -&gt; QueryException -&gt; Bool
(QueryException -&gt; QueryException -&gt; Bool)
-&gt; (QueryException -&gt; QueryException -&gt; Bool) -&gt; Eq QueryException
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
$c== :: QueryException -&gt; QueryException -&gt; Bool
== :: QueryException -&gt; QueryException -&gt; Bool
$c/= :: QueryException -&gt; QueryException -&gt; Bool
/= :: QueryException -&gt; QueryException -&gt; Bool
</span><a href="file:///nix/store/pdlvkcn31k7dw3q5bcndp7f9d2z5l0h3-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/ghc-prim-0.10.0/src/GHC.Classes.html#Eq"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></a></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-30"></span><span>
</span><span id="line-31"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621680429063"><span id="local-6989586621680429067"><span class="annot"><a href="file:///nix/store/pdlvkcn31k7dw3q5bcndp7f9d2z5l0h3-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/GHC.Exception.Type.html#Exception"><span class="hs-identifier hs-type">Exception</span></a></span><span> </span><span class="annot"><a href="Hydra.Chain.CardanoClient.html#QueryException"><span class="hs-identifier hs-type">QueryException</span></a></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-32"></span><span>  </span><span id="local-6989586621680429101"><span class="annot"><span class="annottext">displayException :: QueryException -&gt; String
</span><a href="#local-6989586621680429101"><span class="hs-identifier hs-var hs-var hs-var hs-var">displayException</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-33"></span><span>    </span><span class="annot"><a href="Hydra.Chain.CardanoClient.html#QueryAcquireException"><span class="hs-identifier hs-type">QueryAcquireException</span></a></span><span> </span><span id="local-6989586621680429103"><span class="annot"><span class="annottext">AcquiringFailure
</span><a href="#local-6989586621680429103"><span class="hs-identifier hs-var">failure</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">AcquiringFailure -&gt; String
forall b a. (Show a, IsString b) =&gt; a -&gt; b
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">AcquiringFailure
</span><a href="#local-6989586621680429103"><span class="hs-identifier hs-var">failure</span></a></span><span>
</span><span id="line-34"></span><span>    </span><span class="annot"><a href="Hydra.Chain.CardanoClient.html#QueryEraMismatchException"><span class="hs-identifier hs-type">QueryEraMismatchException</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">EraMismatch</span></span><span class="hs-special">{</span><span id="local-6989586621680429106"><span class="annot"><span class="annottext">Text
ledgerEraName :: Text
ledgerEraName :: EraMismatch -&gt; Text
</span><a href="#local-6989586621680429106"><span class="hs-identifier hs-var hs-var">ledgerEraName</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680429108"><span class="annot"><span class="annottext">Text
otherEraName :: Text
otherEraName :: EraMismatch -&gt; Text
</span><a href="#local-6989586621680429108"><span class="hs-identifier hs-var hs-var">otherEraName</span></a></span></span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-35"></span><span>      </span><span class="hs-comment">-- NOTE: The &quot;ledger&quot; here is the one in the cardano-node and &quot;otherEra&quot; is the one we picked for the query.</span><span>
</span><span id="line-36"></span><span>      </span><span class="annot"><span class="annottext">String -&gt; Text -&gt; Text -&gt; String
forall r. PrintfType r =&gt; String -&gt; r
</span><a href="file:///nix/store/pdlvkcn31k7dw3q5bcndp7f9d2z5l0h3-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/Text.Printf.html#printf"><span class="hs-identifier hs-var">printf</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Connected to cardano-node in unsupported era %s, while we requested %s. Please upgrade your hydra-node.&quot;</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621680429106"><span class="hs-identifier hs-var">ledgerEraName</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621680429108"><span class="hs-identifier hs-var">otherEraName</span></a></span><span>
</span><span id="line-37"></span><span>    </span><span class="annot"><a href="Hydra.Chain.CardanoClient.html#QueryUnsupportedNtcVersionException"><span class="hs-identifier hs-type">QueryUnsupportedNtcVersionException</span></a></span><span> </span><span id="local-6989586621680429110"><span class="annot"><span class="annottext">UnsupportedNtcVersionError
</span><a href="#local-6989586621680429110"><span class="hs-identifier hs-var">err</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">UnsupportedNtcVersionError -&gt; String
forall b a. (Show a, IsString b) =&gt; a -&gt; b
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">UnsupportedNtcVersionError
</span><a href="#local-6989586621680429110"><span class="hs-identifier hs-var">err</span></a></span><span>
</span><span id="line-38"></span><span>    </span><span class="annot"><a href="Hydra.Chain.CardanoClient.html#QueryProtocolParamsConversionException"><span class="hs-identifier hs-type">QueryProtocolParamsConversionException</span></a></span><span> </span><span id="local-6989586621680429111"><span class="annot"><span class="annottext">ProtocolParametersConversionError
</span><a href="#local-6989586621680429111"><span class="hs-identifier hs-var">err</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ProtocolParametersConversionError -&gt; String
forall b a. (Show a, IsString b) =&gt; a -&gt; b
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">ProtocolParametersConversionError
</span><a href="#local-6989586621680429111"><span class="hs-identifier hs-var">err</span></a></span><span>
</span><span id="line-39"></span><span>    </span><span class="annot"><a href="Hydra.Chain.CardanoClient.html#QueryProtocolParamsEraNotSupported"><span class="hs-identifier hs-type">QueryProtocolParamsEraNotSupported</span></a></span><span> </span><span id="local-6989586621680429112"><span class="annot"><span class="annottext">AnyCardanoEra
</span><a href="#local-6989586621680429112"><span class="hs-identifier hs-var">unsupportedEraName</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-40"></span><span>      </span><span class="annot"><span class="annottext">String -&gt; Text -&gt; String
forall r. PrintfType r =&gt; String -&gt; r
</span><a href="file:///nix/store/pdlvkcn31k7dw3q5bcndp7f9d2z5l0h3-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/Text.Printf.html#printf"><span class="hs-identifier hs-var">printf</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Error while querying protocol params using era %s.&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">AnyCardanoEra -&gt; Text
forall b a. (Show a, IsString b) =&gt; a -&gt; b
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">AnyCardanoEra
</span><a href="#local-6989586621680429112"><span class="hs-identifier hs-var">unsupportedEraName</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="file:///nix/store/pdlvkcn31k7dw3q5bcndp7f9d2z5l0h3-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/text-2.0.2/src/Data.Text.Internal.html#Text"><span class="hs-identifier hs-type">Text</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-41"></span><span>    </span><span class="annot"><a href="Hydra.Chain.CardanoClient.html#QueryProtocolParamsEncodingFailureOnEra"><span class="hs-identifier hs-type">QueryProtocolParamsEncodingFailureOnEra</span></a></span><span> </span><span id="local-6989586621680429113"><span class="annot"><span class="annottext">AnyCardanoEra
</span><a href="#local-6989586621680429113"><span class="hs-identifier hs-var">eraName</span></a></span></span><span> </span><span id="local-6989586621680429114"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621680429114"><span class="hs-identifier hs-var">encodingFailure</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-42"></span><span>      </span><span class="annot"><span class="annottext">String -&gt; Text -&gt; Text -&gt; String
forall r. PrintfType r =&gt; String -&gt; r
</span><a href="file:///nix/store/pdlvkcn31k7dw3q5bcndp7f9d2z5l0h3-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/Text.Printf.html#printf"><span class="hs-identifier hs-var">printf</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Error while querying protocol params using era %s: %s.&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">AnyCardanoEra -&gt; Text
forall b a. (Show a, IsString b) =&gt; a -&gt; b
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">AnyCardanoEra
</span><a href="#local-6989586621680429113"><span class="hs-identifier hs-var">eraName</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="file:///nix/store/pdlvkcn31k7dw3q5bcndp7f9d2z5l0h3-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/text-2.0.2/src/Data.Text.Internal.html#Text"><span class="hs-identifier hs-type">Text</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621680429114"><span class="hs-identifier hs-var">encodingFailure</span></a></span><span>
</span><span id="line-43"></span><span>    </span><span class="annot"><a href="Hydra.Chain.CardanoClient.html#QueryEraNotInCardanoModeFailure"><span class="hs-identifier hs-type">QueryEraNotInCardanoModeFailure</span></a></span><span> </span><span id="local-6989586621680429115"><span class="annot"><span class="annottext">AnyCardanoEra
</span><a href="#local-6989586621680429115"><span class="hs-identifier hs-var">eraName</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-44"></span><span>      </span><span class="annot"><span class="annottext">String -&gt; Text -&gt; String
forall r. PrintfType r =&gt; String -&gt; r
</span><a href="file:///nix/store/pdlvkcn31k7dw3q5bcndp7f9d2z5l0h3-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/Text.Printf.html#printf"><span class="hs-identifier hs-var">printf</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Error while querying using era %s not in cardano mode.&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">AnyCardanoEra -&gt; Text
forall b a. (Show a, IsString b) =&gt; a -&gt; b
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">AnyCardanoEra
</span><a href="#local-6989586621680429115"><span class="hs-identifier hs-var">eraName</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="file:///nix/store/pdlvkcn31k7dw3q5bcndp7f9d2z5l0h3-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/text-2.0.2/src/Data.Text.Internal.html#Text"><span class="hs-identifier hs-type">Text</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-45"></span><span>    </span><span class="annot"><a href="Hydra.Chain.CardanoClient.html#QueryNotShelleyBasedEraException"><span class="hs-identifier hs-type">QueryNotShelleyBasedEraException</span></a></span><span> </span><span id="local-6989586621680429116"><span class="annot"><span class="annottext">AnyCardanoEra
</span><a href="#local-6989586621680429116"><span class="hs-identifier hs-var">eraName</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-46"></span><span>      </span><span class="annot"><span class="annottext">String -&gt; Text -&gt; String
forall r. PrintfType r =&gt; String -&gt; r
</span><a href="file:///nix/store/pdlvkcn31k7dw3q5bcndp7f9d2z5l0h3-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/Text.Printf.html#printf"><span class="hs-identifier hs-var">printf</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Error while querying using era %s not in shelley based era.&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">AnyCardanoEra -&gt; Text
forall b a. (Show a, IsString b) =&gt; a -&gt; b
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">AnyCardanoEra
</span><a href="#local-6989586621680429116"><span class="hs-identifier hs-var">eraName</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="file:///nix/store/pdlvkcn31k7dw3q5bcndp7f9d2z5l0h3-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/text-2.0.2/src/Data.Text.Internal.html#Text"><span class="hs-identifier hs-type">Text</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-47"></span><span>
</span><span id="line-48"></span><span class="hs-comment">-- | Exceptions that 'can' occur during a transaction submission.</span><span>
</span><span id="line-49"></span><span class="hs-comment">--</span><span>
</span><span id="line-50"></span><span class="hs-comment">-- In principle, we can only encounter an 'EraMismatch' at era boundaries, when</span><span>
</span><span id="line-51"></span><span class="hs-comment">-- we try to submit a &quot;next era&quot; transaction as a &quot;current era&quot; transaction, or</span><span>
</span><span id="line-52"></span><span class="hs-comment">-- vice-versa.</span><span>
</span><span id="line-53"></span><span class="hs-comment">-- Similarly, 'TxValidationError' shouldn't occur given that the transaction was</span><span>
</span><span id="line-54"></span><span class="hs-comment">-- safely constructed through 'buildTransaction'.</span><span>
</span><span id="line-55"></span><span class="hs-keyword">data</span><span> </span><span id="SubmitTransactionException"><span class="annot"><a href="Hydra.Chain.CardanoClient.html#SubmitTransactionException"><span class="hs-identifier hs-var">SubmitTransactionException</span></a></span></span><span>
</span><span id="line-56"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="SubmitEraMismatch"><span class="annot"><a href="Hydra.Chain.CardanoClient.html#SubmitEraMismatch"><span class="hs-identifier hs-var">SubmitEraMismatch</span></a></span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">EraMismatch</span></span><span>
</span><span id="line-57"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="SubmitTxValidationError"><span class="annot"><a href="Hydra.Chain.CardanoClient.html#SubmitTxValidationError"><span class="hs-identifier hs-var">SubmitTxValidationError</span></a></span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">TxValidationErrorInCardanoMode</span></span><span>
</span><span id="line-58"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">stock</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621680429121"><span id="local-6989586621680429128"><span id="local-6989586621680429132"><span class="annot"><span class="annottext">Int -&gt; SubmitTransactionException -&gt; ShowS
[SubmitTransactionException] -&gt; ShowS
SubmitTransactionException -&gt; String
(Int -&gt; SubmitTransactionException -&gt; ShowS)
-&gt; (SubmitTransactionException -&gt; String)
-&gt; ([SubmitTransactionException] -&gt; ShowS)
-&gt; Show SubmitTransactionException
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
$cshowsPrec :: Int -&gt; SubmitTransactionException -&gt; ShowS
showsPrec :: Int -&gt; SubmitTransactionException -&gt; ShowS
$cshow :: SubmitTransactionException -&gt; String
show :: SubmitTransactionException -&gt; String
$cshowList :: [SubmitTransactionException] -&gt; ShowS
showList :: [SubmitTransactionException] -&gt; ShowS
</span><a href="file:///nix/store/pdlvkcn31k7dw3q5bcndp7f9d2z5l0h3-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/GHC.Show.html#Show"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></a></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-59"></span><span>
</span><span id="line-60"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621680429139"><span id="local-6989586621680429143"><span id="local-6989586621680429146"><span class="annot"><a href="file:///nix/store/pdlvkcn31k7dw3q5bcndp7f9d2z5l0h3-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/GHC.Exception.Type.html#Exception"><span class="hs-identifier hs-type">Exception</span></a></span><span> </span><span class="annot"><a href="Hydra.Chain.CardanoClient.html#SubmitTransactionException"><span class="hs-identifier hs-type">SubmitTransactionException</span></a></span></span></span></span><span>
</span><span id="line-61"></span><span>
</span><span id="line-62"></span><span class="annot"><span class="hs-comment">-- * CardanoClient handle</span></span><span>
</span><span id="line-63"></span><span>
</span><span id="line-64"></span><span class="annot"><span class="hs-comment">-- | Handle interface for abstract querying of a cardano node.</span></span><span>
</span><span id="line-65"></span><span class="hs-keyword">data</span><span> </span><span id="CardanoClient"><span class="annot"><a href="Hydra.Chain.CardanoClient.html#CardanoClient"><span class="hs-identifier hs-var">CardanoClient</span></a></span></span><span> </span><span id="local-6989586621680428531"><span class="annot"><a href="#local-6989586621680428531"><span class="hs-identifier hs-type">era</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="CardanoClient"><span class="annot"><a href="Hydra.Chain.CardanoClient.html#CardanoClient"><span class="hs-identifier hs-var">CardanoClient</span></a></span></span><span>
</span><span id="line-66"></span><span>  </span><span class="hs-special">{</span><span> </span><span id="%24sel%3AqueryUTxOByAddress%3ACardanoClient"><span class="annot"><span class="annottext">forall era.
CardanoClient era -&gt; [Address ShelleyAddr] -&gt; IO (UTxO era)
</span><a href="Hydra.Chain.CardanoClient.html#%24sel%3AqueryUTxOByAddress%3ACardanoClient"><span class="hs-identifier hs-var hs-var">queryUTxOByAddress</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">Address</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">ShelleyAddr</span></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="file:///nix/store/pdlvkcn31k7dw3q5bcndp7f9d2z5l0h3-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#IO"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">UTxO</span></span><span> </span><span class="annot"><a href="#local-6989586621680428531"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-67"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="%24sel%3AnetworkId%3ACardanoClient"><span class="annot"><span class="annottext">forall era. CardanoClient era -&gt; NetworkId
</span><a href="Hydra.Chain.CardanoClient.html#%24sel%3AnetworkId%3ACardanoClient"><span class="hs-identifier hs-var hs-var">networkId</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">NetworkId</span></span><span>
</span><span id="line-68"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-69"></span><span>
</span><span id="line-70"></span><span class="annot"><span class="hs-comment">-- * Local state query</span></span><span>
</span><span id="line-71"></span><span>
</span><span id="line-72"></span><span class="annot"><span class="hs-comment">-- | Describes whether to query at the tip or at a specific point.</span></span><span>
</span><span id="line-73"></span><span class="hs-keyword">data</span><span> </span><span id="QueryPoint"><span class="annot"><a href="Hydra.Chain.CardanoClient.html#QueryPoint"><span class="hs-identifier hs-var">QueryPoint</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="QueryTip"><span class="annot"><a href="Hydra.Chain.CardanoClient.html#QueryTip"><span class="hs-identifier hs-var">QueryTip</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span id="QueryAt"><span class="annot"><a href="Hydra.Chain.CardanoClient.html#QueryAt"><span class="hs-identifier hs-var">QueryAt</span></a></span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">ChainPoint</span></span><span>
</span><span id="line-74"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">stock</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621680429154"><span id="local-6989586621680429158"><span class="annot"><span class="annottext">QueryPoint -&gt; QueryPoint -&gt; Bool
(QueryPoint -&gt; QueryPoint -&gt; Bool)
-&gt; (QueryPoint -&gt; QueryPoint -&gt; Bool) -&gt; Eq QueryPoint
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
$c== :: QueryPoint -&gt; QueryPoint -&gt; Bool
== :: QueryPoint -&gt; QueryPoint -&gt; Bool
$c/= :: QueryPoint -&gt; QueryPoint -&gt; Bool
/= :: QueryPoint -&gt; QueryPoint -&gt; Bool
</span><a href="file:///nix/store/pdlvkcn31k7dw3q5bcndp7f9d2z5l0h3-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/ghc-prim-0.10.0/src/GHC.Classes.html#Eq"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></a></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680429162"><span id="local-6989586621680429167"><span id="local-6989586621680429171"><span class="annot"><span class="annottext">Int -&gt; QueryPoint -&gt; ShowS
[QueryPoint] -&gt; ShowS
QueryPoint -&gt; String
(Int -&gt; QueryPoint -&gt; ShowS)
-&gt; (QueryPoint -&gt; String)
-&gt; ([QueryPoint] -&gt; ShowS)
-&gt; Show QueryPoint
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
$cshowsPrec :: Int -&gt; QueryPoint -&gt; ShowS
showsPrec :: Int -&gt; QueryPoint -&gt; ShowS
$cshow :: QueryPoint -&gt; String
show :: QueryPoint -&gt; String
$cshowList :: [QueryPoint] -&gt; ShowS
showList :: [QueryPoint] -&gt; ShowS
</span><a href="file:///nix/store/pdlvkcn31k7dw3q5bcndp7f9d2z5l0h3-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/GHC.Show.html#Show"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></a></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680429174"><span id="local-6989586621680429176"><span class="annot"><span class="annottext">(forall x. QueryPoint -&gt; Rep QueryPoint x)
-&gt; (forall x. Rep QueryPoint x -&gt; QueryPoint) -&gt; Generic QueryPoint
forall x. Rep QueryPoint x -&gt; QueryPoint
forall x. QueryPoint -&gt; Rep QueryPoint x
forall a.
(forall x. a -&gt; Rep a x) -&gt; (forall x. Rep a x -&gt; a) -&gt; Generic a
$cfrom :: forall x. QueryPoint -&gt; Rep QueryPoint x
from :: forall x. QueryPoint -&gt; Rep QueryPoint x
$cto :: forall x. Rep QueryPoint x -&gt; QueryPoint
to :: forall x. Rep QueryPoint x -&gt; QueryPoint
</span><a href="file:///nix/store/pdlvkcn31k7dw3q5bcndp7f9d2z5l0h3-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/GHC.Generics.html#Generic"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Generic</span></a></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-75"></span><span>
</span><span id="line-76"></span><span class="annot"><span class="hs-comment">-- * CardanoNode Monad</span></span><span>
</span><span id="line-77"></span><span>
</span><span id="line-78"></span><span class="hs-comment">-- | Monad transformer for interacting with a local Cardano node.  Carries</span><span>
</span><span id="line-79"></span><span class="hs-comment">-- both 'LocalNodeConnectInfo' and an era witness so individual query and</span><span>
</span><span id="line-80"></span><span class="hs-comment">-- submission functions need not accept them as explicit arguments.</span><span>
</span><span id="line-81"></span><span class="hs-keyword">newtype</span><span> </span><span id="CardanoNodeT"><span class="annot"><a href="Hydra.Chain.CardanoClient.html#CardanoNodeT"><span class="hs-identifier hs-var">CardanoNodeT</span></a></span></span><span> </span><span id="local-6989586621680428545"><span class="annot"><a href="#local-6989586621680428545"><span class="hs-identifier hs-type">eon</span></a></span></span><span> </span><span id="local-6989586621680428546"><span class="annot"><a href="#local-6989586621680428546"><span class="hs-identifier hs-type">era</span></a></span></span><span> </span><span id="local-6989586621680428547"><span class="annot"><a href="#local-6989586621680428547"><span class="hs-identifier hs-type">m</span></a></span></span><span> </span><span id="local-6989586621680428548"><span class="annot"><a href="#local-6989586621680428548"><span class="hs-identifier hs-type">a</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="CardanoNodeT"><span class="annot"><a href="Hydra.Chain.CardanoClient.html#CardanoNodeT"><span class="hs-identifier hs-var">CardanoNodeT</span></a></span></span><span>
</span><span id="line-82"></span><span>  </span><span class="hs-special">{</span><span> </span><span id="%24sel%3AfromCardanoNodeT%3ACardanoNodeT"><span class="annot"><span class="annottext">forall {k} (eon :: k -&gt; *) (era :: k) (m :: * -&gt; *) a.
CardanoNodeT eon era m a
-&gt; ReaderT LocalNodeConnectInfo (EraT eon era m) a
</span><a href="Hydra.Chain.CardanoClient.html#%24sel%3AfromCardanoNodeT%3ACardanoNodeT"><span class="hs-identifier hs-var hs-var">fromCardanoNodeT</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="file:///nix/store/pdlvkcn31k7dw3q5bcndp7f9d2z5l0h3-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/transformers-0.6.1.0/src/Control.Monad.Trans.Reader.html#ReaderT"><span class="hs-identifier hs-type">ReaderT</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">LocalNodeConnectInfo</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hydra.Chain.CardanoClient.html#EraT"><span class="hs-identifier hs-type">EraT</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680428545"><span class="hs-identifier hs-type">eon</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680428546"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680428547"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621680428548"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-83"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-84"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">newtype</span></span><span>
</span><span id="line-85"></span><span>    </span><span class="hs-special">(</span><span> </span><span id="local-6989586621680429184"><span id="local-6989586621680429190"><span class="annot"><span class="annottext">(forall a b.
 (a -&gt; b) -&gt; CardanoNodeT eon era m a -&gt; CardanoNodeT eon era m b)
-&gt; (forall a b.
    a -&gt; CardanoNodeT eon era m b -&gt; CardanoNodeT eon era m a)
-&gt; Functor (CardanoNodeT eon era m)
forall a b.
a -&gt; CardanoNodeT eon era m b -&gt; CardanoNodeT eon era m a
forall a b.
(a -&gt; b) -&gt; CardanoNodeT eon era m a -&gt; CardanoNodeT eon era m b
forall k (eon :: k -&gt; *) (era :: k) (m :: * -&gt; *) a b.
Functor m =&gt;
a -&gt; CardanoNodeT eon era m b -&gt; CardanoNodeT eon era m a
forall k (eon :: k -&gt; *) (era :: k) (m :: * -&gt; *) a b.
Functor m =&gt;
(a -&gt; b) -&gt; CardanoNodeT eon era m a -&gt; CardanoNodeT eon era m b
forall (f :: * -&gt; *).
(forall a b. (a -&gt; b) -&gt; f a -&gt; f b)
-&gt; (forall a b. a -&gt; f b -&gt; f a) -&gt; Functor f
$cfmap :: forall k (eon :: k -&gt; *) (era :: k) (m :: * -&gt; *) a b.
Functor m =&gt;
(a -&gt; b) -&gt; CardanoNodeT eon era m a -&gt; CardanoNodeT eon era m b
fmap :: forall a b.
(a -&gt; b) -&gt; CardanoNodeT eon era m a -&gt; CardanoNodeT eon era m b
$c&lt;$ :: forall k (eon :: k -&gt; *) (era :: k) (m :: * -&gt; *) a b.
Functor m =&gt;
a -&gt; CardanoNodeT eon era m b -&gt; CardanoNodeT eon era m a
&lt;$ :: forall a b.
a -&gt; CardanoNodeT eon era m b -&gt; CardanoNodeT eon era m a
</span><a href="file:///nix/store/pdlvkcn31k7dw3q5bcndp7f9d2z5l0h3-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/GHC.Base.html#Functor"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Functor</span></a></span></span></span><span>
</span><span id="line-86"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="local-6989586621680429202"><span id="local-6989586621680429208"><span id="local-6989586621680429213"><span id="local-6989586621680429218"><span id="local-6989586621680429223"><span class="annot"><span class="annottext">Functor (CardanoNodeT eon era m)
Functor (CardanoNodeT eon era m) =&gt;
(forall a. a -&gt; CardanoNodeT eon era m a)
-&gt; (forall a b.
    CardanoNodeT eon era m (a -&gt; b)
    -&gt; CardanoNodeT eon era m a -&gt; CardanoNodeT eon era m b)
-&gt; (forall a b c.
    (a -&gt; b -&gt; c)
    -&gt; CardanoNodeT eon era m a
    -&gt; CardanoNodeT eon era m b
    -&gt; CardanoNodeT eon era m c)
-&gt; (forall a b.
    CardanoNodeT eon era m a
    -&gt; CardanoNodeT eon era m b -&gt; CardanoNodeT eon era m b)
-&gt; (forall a b.
    CardanoNodeT eon era m a
    -&gt; CardanoNodeT eon era m b -&gt; CardanoNodeT eon era m a)
-&gt; Applicative (CardanoNodeT eon era m)
forall a. a -&gt; CardanoNodeT eon era m a
forall a b.
CardanoNodeT eon era m a
-&gt; CardanoNodeT eon era m b -&gt; CardanoNodeT eon era m a
forall a b.
CardanoNodeT eon era m a
-&gt; CardanoNodeT eon era m b -&gt; CardanoNodeT eon era m b
forall a b.
CardanoNodeT eon era m (a -&gt; b)
-&gt; CardanoNodeT eon era m a -&gt; CardanoNodeT eon era m b
forall a b c.
(a -&gt; b -&gt; c)
-&gt; CardanoNodeT eon era m a
-&gt; CardanoNodeT eon era m b
-&gt; CardanoNodeT eon era m c
forall k (eon :: k -&gt; *) (era :: k) (m :: * -&gt; *).
Applicative m =&gt;
Functor (CardanoNodeT eon era m)
forall k (eon :: k -&gt; *) (era :: k) (m :: * -&gt; *) a.
Applicative m =&gt;
a -&gt; CardanoNodeT eon era m a
forall k (eon :: k -&gt; *) (era :: k) (m :: * -&gt; *) a b.
Applicative m =&gt;
CardanoNodeT eon era m a
-&gt; CardanoNodeT eon era m b -&gt; CardanoNodeT eon era m a
forall k (eon :: k -&gt; *) (era :: k) (m :: * -&gt; *) a b.
Applicative m =&gt;
CardanoNodeT eon era m a
-&gt; CardanoNodeT eon era m b -&gt; CardanoNodeT eon era m b
forall k (eon :: k -&gt; *) (era :: k) (m :: * -&gt; *) a b.
Applicative m =&gt;
CardanoNodeT eon era m (a -&gt; b)
-&gt; CardanoNodeT eon era m a -&gt; CardanoNodeT eon era m b
forall k (eon :: k -&gt; *) (era :: k) (m :: * -&gt; *) a b c.
Applicative m =&gt;
(a -&gt; b -&gt; c)
-&gt; CardanoNodeT eon era m a
-&gt; CardanoNodeT eon era m b
-&gt; CardanoNodeT eon era m c
forall (f :: * -&gt; *).
Functor f =&gt;
(forall a. a -&gt; f a)
-&gt; (forall a b. f (a -&gt; b) -&gt; f a -&gt; f b)
-&gt; (forall a b c. (a -&gt; b -&gt; c) -&gt; f a -&gt; f b -&gt; f c)
-&gt; (forall a b. f a -&gt; f b -&gt; f b)
-&gt; (forall a b. f a -&gt; f b -&gt; f a)
-&gt; Applicative f
$cpure :: forall k (eon :: k -&gt; *) (era :: k) (m :: * -&gt; *) a.
Applicative m =&gt;
a -&gt; CardanoNodeT eon era m a
pure :: forall a. a -&gt; CardanoNodeT eon era m a
$c&lt;*&gt; :: forall k (eon :: k -&gt; *) (era :: k) (m :: * -&gt; *) a b.
Applicative m =&gt;
CardanoNodeT eon era m (a -&gt; b)
-&gt; CardanoNodeT eon era m a -&gt; CardanoNodeT eon era m b
&lt;*&gt; :: forall a b.
CardanoNodeT eon era m (a -&gt; b)
-&gt; CardanoNodeT eon era m a -&gt; CardanoNodeT eon era m b
$cliftA2 :: forall k (eon :: k -&gt; *) (era :: k) (m :: * -&gt; *) a b c.
Applicative m =&gt;
(a -&gt; b -&gt; c)
-&gt; CardanoNodeT eon era m a
-&gt; CardanoNodeT eon era m b
-&gt; CardanoNodeT eon era m c
liftA2 :: forall a b c.
(a -&gt; b -&gt; c)
-&gt; CardanoNodeT eon era m a
-&gt; CardanoNodeT eon era m b
-&gt; CardanoNodeT eon era m c
$c*&gt; :: forall k (eon :: k -&gt; *) (era :: k) (m :: * -&gt; *) a b.
Applicative m =&gt;
CardanoNodeT eon era m a
-&gt; CardanoNodeT eon era m b -&gt; CardanoNodeT eon era m b
*&gt; :: forall a b.
CardanoNodeT eon era m a
-&gt; CardanoNodeT eon era m b -&gt; CardanoNodeT eon era m b
$c&lt;* :: forall k (eon :: k -&gt; *) (era :: k) (m :: * -&gt; *) a b.
Applicative m =&gt;
CardanoNodeT eon era m a
-&gt; CardanoNodeT eon era m b -&gt; CardanoNodeT eon era m a
&lt;* :: forall a b.
CardanoNodeT eon era m a
-&gt; CardanoNodeT eon era m b -&gt; CardanoNodeT eon era m a
</span><a href="file:///nix/store/pdlvkcn31k7dw3q5bcndp7f9d2z5l0h3-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/GHC.Base.html#Applicative"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Applicative</span></a></span></span></span></span></span></span><span>
</span><span id="line-87"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="local-6989586621680429236"><span id="local-6989586621680429242"><span id="local-6989586621680429247"><span class="annot"><span class="annottext">Applicative (CardanoNodeT eon era m)
Applicative (CardanoNodeT eon era m) =&gt;
(forall a b.
 CardanoNodeT eon era m a
 -&gt; (a -&gt; CardanoNodeT eon era m b) -&gt; CardanoNodeT eon era m b)
-&gt; (forall a b.
    CardanoNodeT eon era m a
    -&gt; CardanoNodeT eon era m b -&gt; CardanoNodeT eon era m b)
-&gt; (forall a. a -&gt; CardanoNodeT eon era m a)
-&gt; Monad (CardanoNodeT eon era m)
forall a. a -&gt; CardanoNodeT eon era m a
forall a b.
CardanoNodeT eon era m a
-&gt; CardanoNodeT eon era m b -&gt; CardanoNodeT eon era m b
forall a b.
CardanoNodeT eon era m a
-&gt; (a -&gt; CardanoNodeT eon era m b) -&gt; CardanoNodeT eon era m b
forall k (eon :: k -&gt; *) (era :: k) (m :: * -&gt; *).
Monad m =&gt;
Applicative (CardanoNodeT eon era m)
forall k (eon :: k -&gt; *) (era :: k) (m :: * -&gt; *) a.
Monad m =&gt;
a -&gt; CardanoNodeT eon era m a
forall k (eon :: k -&gt; *) (era :: k) (m :: * -&gt; *) a b.
Monad m =&gt;
CardanoNodeT eon era m a
-&gt; CardanoNodeT eon era m b -&gt; CardanoNodeT eon era m b
forall k (eon :: k -&gt; *) (era :: k) (m :: * -&gt; *) a b.
Monad m =&gt;
CardanoNodeT eon era m a
-&gt; (a -&gt; CardanoNodeT eon era m b) -&gt; CardanoNodeT eon era m b
forall (m :: * -&gt; *).
Applicative m =&gt;
(forall a b. m a -&gt; (a -&gt; m b) -&gt; m b)
-&gt; (forall a b. m a -&gt; m b -&gt; m b)
-&gt; (forall a. a -&gt; m a)
-&gt; Monad m
$c&gt;&gt;= :: forall k (eon :: k -&gt; *) (era :: k) (m :: * -&gt; *) a b.
Monad m =&gt;
CardanoNodeT eon era m a
-&gt; (a -&gt; CardanoNodeT eon era m b) -&gt; CardanoNodeT eon era m b
&gt;&gt;= :: forall a b.
CardanoNodeT eon era m a
-&gt; (a -&gt; CardanoNodeT eon era m b) -&gt; CardanoNodeT eon era m b
$c&gt;&gt; :: forall k (eon :: k -&gt; *) (era :: k) (m :: * -&gt; *) a b.
Monad m =&gt;
CardanoNodeT eon era m a
-&gt; CardanoNodeT eon era m b -&gt; CardanoNodeT eon era m b
&gt;&gt; :: forall a b.
CardanoNodeT eon era m a
-&gt; CardanoNodeT eon era m b -&gt; CardanoNodeT eon era m b
$creturn :: forall k (eon :: k -&gt; *) (era :: k) (m :: * -&gt; *) a.
Monad m =&gt;
a -&gt; CardanoNodeT eon era m a
return :: forall a. a -&gt; CardanoNodeT eon era m a
</span><a href="file:///nix/store/pdlvkcn31k7dw3q5bcndp7f9d2z5l0h3-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/GHC.Base.html#Monad"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Monad</span></a></span></span></span></span><span>
</span><span id="line-88"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="local-6989586621680429260"><span class="annot"><span class="annottext">Monad (CardanoNodeT eon era m)
Monad (CardanoNodeT eon era m) =&gt;
(forall a. IO a -&gt; CardanoNodeT eon era m a)
-&gt; MonadIO (CardanoNodeT eon era m)
forall a. IO a -&gt; CardanoNodeT eon era m a
forall k (eon :: k -&gt; *) (era :: k) (m :: * -&gt; *).
MonadIO m =&gt;
Monad (CardanoNodeT eon era m)
forall k (eon :: k -&gt; *) (era :: k) (m :: * -&gt; *) a.
MonadIO m =&gt;
IO a -&gt; CardanoNodeT eon era m a
forall (m :: * -&gt; *).
Monad m =&gt;
(forall a. IO a -&gt; m a) -&gt; MonadIO m
$cliftIO :: forall k (eon :: k -&gt; *) (era :: k) (m :: * -&gt; *) a.
MonadIO m =&gt;
IO a -&gt; CardanoNodeT eon era m a
liftIO :: forall a. IO a -&gt; CardanoNodeT eon era m a
</span><a href="file:///nix/store/pdlvkcn31k7dw3q5bcndp7f9d2z5l0h3-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/Control.Monad.IO.Class.html#MonadIO"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var">MonadIO</span></a></span></span><span>
</span><span id="line-89"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="local-6989586621680429273"><span id="local-6989586621680429279"><span id="local-6989586621680429284"><span class="annot"><a href="file:///nix/store/pdlvkcn31k7dw3q5bcndp7f9d2z5l0h3-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/mtl-2.3.1/src/Control.Monad.Reader.Class.html#MonadReader"><span class="hs-identifier hs-type">MonadReader</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">LocalNodeConnectInfo</span></span></span></span></span><span>
</span><span id="line-90"></span><span>    </span><span class="hs-special">)</span><span>
</span><span id="line-91"></span><span>
</span><span id="line-92"></span><span class="annot"><span class="hs-comment">-- | Specialise 'CardanoNodeT' to 'IO'.</span></span><span>
</span><span id="line-93"></span><span class="hs-keyword">type</span><span> </span><span id="CardanoNode"><span class="annot"><a href="Hydra.Chain.CardanoClient.html#CardanoNode"><span class="hs-identifier hs-var">CardanoNode</span></a></span></span><span> </span><span id="local-6989586621680429290"><span class="annot"><a href="#local-6989586621680429290"><span class="hs-identifier hs-type">eon</span></a></span></span><span> </span><span id="local-6989586621680429291"><span class="annot"><a href="#local-6989586621680429291"><span class="hs-identifier hs-type">era</span></a></span></span><span> </span><span id="local-6989586621680429292"><span class="annot"><a href="#local-6989586621680429292"><span class="hs-identifier hs-type">a</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Hydra.Chain.CardanoClient.html#CardanoNodeT"><span class="hs-identifier hs-type">CardanoNodeT</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680429290"><span class="hs-identifier hs-type">eon</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680429291"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="annot"><a href="file:///nix/store/pdlvkcn31k7dw3q5bcndp7f9d2z5l0h3-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#IO"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680429292"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-94"></span><span>
</span><span id="line-95"></span><span class="annot"><span class="hs-comment">-- * EraT Monad Transformer</span></span><span>
</span><span id="line-96"></span><span>
</span><span id="line-97"></span><span class="hs-comment">-- | Monad transformer that carries an era witness.</span><span>
</span><span id="line-98"></span><span class="hs-comment">-- The @eon@ parameter is a higher-kinded era-witness type</span><span>
</span><span id="line-99"></span><span class="hs-comment">-- (e.g. 'ShelleyBasedEra', 'BabbageEraOnwards', 'ConwayEraOnwards') and</span><span>
</span><span id="line-100"></span><span class="hs-comment">-- @era@ is the concrete era (e.g. 'ConwayEra').</span><span>
</span><span id="line-101"></span><span class="hs-keyword">newtype</span><span> </span><span id="EraT"><span class="annot"><a href="Hydra.Chain.CardanoClient.html#EraT"><span class="hs-identifier hs-var">EraT</span></a></span></span><span> </span><span id="local-6989586621680428677"><span class="annot"><a href="#local-6989586621680428677"><span class="hs-identifier hs-type">eon</span></a></span></span><span> </span><span id="local-6989586621680428678"><span class="annot"><a href="#local-6989586621680428678"><span class="hs-identifier hs-type">era</span></a></span></span><span> </span><span id="local-6989586621680428679"><span class="annot"><a href="#local-6989586621680428679"><span class="hs-identifier hs-type">m</span></a></span></span><span> </span><span id="local-6989586621680428680"><span class="annot"><a href="#local-6989586621680428680"><span class="hs-identifier hs-type">a</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="EraT"><span class="annot"><a href="Hydra.Chain.CardanoClient.html#EraT"><span class="hs-identifier hs-var">EraT</span></a></span></span><span>
</span><span id="line-102"></span><span>  </span><span class="hs-special">{</span><span> </span><span id="%24sel%3AfromEraT%3AEraT"><span class="annot"><span class="annottext">forall {k} (eon :: k -&gt; *) (era :: k) (m :: * -&gt; *) a.
EraT eon era m a -&gt; ReaderT (eon era) m a
</span><a href="Hydra.Chain.CardanoClient.html#%24sel%3AfromEraT%3AEraT"><span class="hs-identifier hs-var hs-var">fromEraT</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="file:///nix/store/pdlvkcn31k7dw3q5bcndp7f9d2z5l0h3-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/transformers-0.6.1.0/src/Control.Monad.Trans.Reader.html#ReaderT"><span class="hs-identifier hs-type">ReaderT</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621680428677"><span class="hs-identifier hs-type">eon</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680428678"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621680428679"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680428680"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-103"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-104"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">newtype</span></span><span>
</span><span id="line-105"></span><span>    </span><span class="hs-special">(</span><span> </span><span id="local-6989586621680429301"><span id="local-6989586621680429305"><span class="annot"><span class="annottext">(forall a b. (a -&gt; b) -&gt; EraT eon era m a -&gt; EraT eon era m b)
-&gt; (forall a b. a -&gt; EraT eon era m b -&gt; EraT eon era m a)
-&gt; Functor (EraT eon era m)
forall a b. a -&gt; EraT eon era m b -&gt; EraT eon era m a
forall a b. (a -&gt; b) -&gt; EraT eon era m a -&gt; EraT eon era m b
forall k (eon :: k -&gt; *) (era :: k) (m :: * -&gt; *) a b.
Functor m =&gt;
a -&gt; EraT eon era m b -&gt; EraT eon era m a
forall k (eon :: k -&gt; *) (era :: k) (m :: * -&gt; *) a b.
Functor m =&gt;
(a -&gt; b) -&gt; EraT eon era m a -&gt; EraT eon era m b
forall (f :: * -&gt; *).
(forall a b. (a -&gt; b) -&gt; f a -&gt; f b)
-&gt; (forall a b. a -&gt; f b -&gt; f a) -&gt; Functor f
$cfmap :: forall k (eon :: k -&gt; *) (era :: k) (m :: * -&gt; *) a b.
Functor m =&gt;
(a -&gt; b) -&gt; EraT eon era m a -&gt; EraT eon era m b
fmap :: forall a b. (a -&gt; b) -&gt; EraT eon era m a -&gt; EraT eon era m b
$c&lt;$ :: forall k (eon :: k -&gt; *) (era :: k) (m :: * -&gt; *) a b.
Functor m =&gt;
a -&gt; EraT eon era m b -&gt; EraT eon era m a
&lt;$ :: forall a b. a -&gt; EraT eon era m b -&gt; EraT eon era m a
</span><a href="file:///nix/store/pdlvkcn31k7dw3q5bcndp7f9d2z5l0h3-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/GHC.Base.html#Functor"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Functor</span></a></span></span></span><span>
</span><span id="line-106"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="local-6989586621680429313"><span id="local-6989586621680429317"><span id="local-6989586621680429321"><span id="local-6989586621680429325"><span id="local-6989586621680429329"><span class="annot"><span class="annottext">Functor (EraT eon era m)
Functor (EraT eon era m) =&gt;
(forall a. a -&gt; EraT eon era m a)
-&gt; (forall a b.
    EraT eon era m (a -&gt; b) -&gt; EraT eon era m a -&gt; EraT eon era m b)
-&gt; (forall a b c.
    (a -&gt; b -&gt; c)
    -&gt; EraT eon era m a -&gt; EraT eon era m b -&gt; EraT eon era m c)
-&gt; (forall a b.
    EraT eon era m a -&gt; EraT eon era m b -&gt; EraT eon era m b)
-&gt; (forall a b.
    EraT eon era m a -&gt; EraT eon era m b -&gt; EraT eon era m a)
-&gt; Applicative (EraT eon era m)
forall a. a -&gt; EraT eon era m a
forall a b.
EraT eon era m a -&gt; EraT eon era m b -&gt; EraT eon era m a
forall a b.
EraT eon era m a -&gt; EraT eon era m b -&gt; EraT eon era m b
forall a b.
EraT eon era m (a -&gt; b) -&gt; EraT eon era m a -&gt; EraT eon era m b
forall a b c.
(a -&gt; b -&gt; c)
-&gt; EraT eon era m a -&gt; EraT eon era m b -&gt; EraT eon era m c
forall k (eon :: k -&gt; *) (era :: k) (m :: * -&gt; *).
Applicative m =&gt;
Functor (EraT eon era m)
forall k (eon :: k -&gt; *) (era :: k) (m :: * -&gt; *) a.
Applicative m =&gt;
a -&gt; EraT eon era m a
forall k (eon :: k -&gt; *) (era :: k) (m :: * -&gt; *) a b.
Applicative m =&gt;
EraT eon era m a -&gt; EraT eon era m b -&gt; EraT eon era m a
forall k (eon :: k -&gt; *) (era :: k) (m :: * -&gt; *) a b.
Applicative m =&gt;
EraT eon era m a -&gt; EraT eon era m b -&gt; EraT eon era m b
forall k (eon :: k -&gt; *) (era :: k) (m :: * -&gt; *) a b.
Applicative m =&gt;
EraT eon era m (a -&gt; b) -&gt; EraT eon era m a -&gt; EraT eon era m b
forall k (eon :: k -&gt; *) (era :: k) (m :: * -&gt; *) a b c.
Applicative m =&gt;
(a -&gt; b -&gt; c)
-&gt; EraT eon era m a -&gt; EraT eon era m b -&gt; EraT eon era m c
forall (f :: * -&gt; *).
Functor f =&gt;
(forall a. a -&gt; f a)
-&gt; (forall a b. f (a -&gt; b) -&gt; f a -&gt; f b)
-&gt; (forall a b c. (a -&gt; b -&gt; c) -&gt; f a -&gt; f b -&gt; f c)
-&gt; (forall a b. f a -&gt; f b -&gt; f b)
-&gt; (forall a b. f a -&gt; f b -&gt; f a)
-&gt; Applicative f
$cpure :: forall k (eon :: k -&gt; *) (era :: k) (m :: * -&gt; *) a.
Applicative m =&gt;
a -&gt; EraT eon era m a
pure :: forall a. a -&gt; EraT eon era m a
$c&lt;*&gt; :: forall k (eon :: k -&gt; *) (era :: k) (m :: * -&gt; *) a b.
Applicative m =&gt;
EraT eon era m (a -&gt; b) -&gt; EraT eon era m a -&gt; EraT eon era m b
&lt;*&gt; :: forall a b.
EraT eon era m (a -&gt; b) -&gt; EraT eon era m a -&gt; EraT eon era m b
$cliftA2 :: forall k (eon :: k -&gt; *) (era :: k) (m :: * -&gt; *) a b c.
Applicative m =&gt;
(a -&gt; b -&gt; c)
-&gt; EraT eon era m a -&gt; EraT eon era m b -&gt; EraT eon era m c
liftA2 :: forall a b c.
(a -&gt; b -&gt; c)
-&gt; EraT eon era m a -&gt; EraT eon era m b -&gt; EraT eon era m c
$c*&gt; :: forall k (eon :: k -&gt; *) (era :: k) (m :: * -&gt; *) a b.
Applicative m =&gt;
EraT eon era m a -&gt; EraT eon era m b -&gt; EraT eon era m b
*&gt; :: forall a b.
EraT eon era m a -&gt; EraT eon era m b -&gt; EraT eon era m b
$c&lt;* :: forall k (eon :: k -&gt; *) (era :: k) (m :: * -&gt; *) a b.
Applicative m =&gt;
EraT eon era m a -&gt; EraT eon era m b -&gt; EraT eon era m a
&lt;* :: forall a b.
EraT eon era m a -&gt; EraT eon era m b -&gt; EraT eon era m a
</span><a href="file:///nix/store/pdlvkcn31k7dw3q5bcndp7f9d2z5l0h3-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/GHC.Base.html#Applicative"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Applicative</span></a></span></span></span></span></span></span><span>
</span><span id="line-107"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="local-6989586621680429337"><span id="local-6989586621680429341"><span id="local-6989586621680429345"><span class="annot"><span class="annottext">Applicative (EraT eon era m)
Applicative (EraT eon era m) =&gt;
(forall a b.
 EraT eon era m a -&gt; (a -&gt; EraT eon era m b) -&gt; EraT eon era m b)
-&gt; (forall a b.
    EraT eon era m a -&gt; EraT eon era m b -&gt; EraT eon era m b)
-&gt; (forall a. a -&gt; EraT eon era m a)
-&gt; Monad (EraT eon era m)
forall a. a -&gt; EraT eon era m a
forall a b.
EraT eon era m a -&gt; EraT eon era m b -&gt; EraT eon era m b
forall a b.
EraT eon era m a -&gt; (a -&gt; EraT eon era m b) -&gt; EraT eon era m b
forall k (eon :: k -&gt; *) (era :: k) (m :: * -&gt; *).
Monad m =&gt;
Applicative (EraT eon era m)
forall k (eon :: k -&gt; *) (era :: k) (m :: * -&gt; *) a.
Monad m =&gt;
a -&gt; EraT eon era m a
forall k (eon :: k -&gt; *) (era :: k) (m :: * -&gt; *) a b.
Monad m =&gt;
EraT eon era m a -&gt; EraT eon era m b -&gt; EraT eon era m b
forall k (eon :: k -&gt; *) (era :: k) (m :: * -&gt; *) a b.
Monad m =&gt;
EraT eon era m a -&gt; (a -&gt; EraT eon era m b) -&gt; EraT eon era m b
forall (m :: * -&gt; *).
Applicative m =&gt;
(forall a b. m a -&gt; (a -&gt; m b) -&gt; m b)
-&gt; (forall a b. m a -&gt; m b -&gt; m b)
-&gt; (forall a. a -&gt; m a)
-&gt; Monad m
$c&gt;&gt;= :: forall k (eon :: k -&gt; *) (era :: k) (m :: * -&gt; *) a b.
Monad m =&gt;
EraT eon era m a -&gt; (a -&gt; EraT eon era m b) -&gt; EraT eon era m b
&gt;&gt;= :: forall a b.
EraT eon era m a -&gt; (a -&gt; EraT eon era m b) -&gt; EraT eon era m b
$c&gt;&gt; :: forall k (eon :: k -&gt; *) (era :: k) (m :: * -&gt; *) a b.
Monad m =&gt;
EraT eon era m a -&gt; EraT eon era m b -&gt; EraT eon era m b
&gt;&gt; :: forall a b.
EraT eon era m a -&gt; EraT eon era m b -&gt; EraT eon era m b
$creturn :: forall k (eon :: k -&gt; *) (era :: k) (m :: * -&gt; *) a.
Monad m =&gt;
a -&gt; EraT eon era m a
return :: forall a. a -&gt; EraT eon era m a
</span><a href="file:///nix/store/pdlvkcn31k7dw3q5bcndp7f9d2z5l0h3-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/GHC.Base.html#Monad"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Monad</span></a></span></span></span></span><span>
</span><span id="line-108"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="local-6989586621680429353"><span class="annot"><span class="annottext">Monad (EraT eon era m)
Monad (EraT eon era m) =&gt;
(forall a. IO a -&gt; EraT eon era m a) -&gt; MonadIO (EraT eon era m)
forall a. IO a -&gt; EraT eon era m a
forall k (eon :: k -&gt; *) (era :: k) (m :: * -&gt; *).
MonadIO m =&gt;
Monad (EraT eon era m)
forall k (eon :: k -&gt; *) (era :: k) (m :: * -&gt; *) a.
MonadIO m =&gt;
IO a -&gt; EraT eon era m a
forall (m :: * -&gt; *).
Monad m =&gt;
(forall a. IO a -&gt; m a) -&gt; MonadIO m
$cliftIO :: forall k (eon :: k -&gt; *) (era :: k) (m :: * -&gt; *) a.
MonadIO m =&gt;
IO a -&gt; EraT eon era m a
liftIO :: forall a. IO a -&gt; EraT eon era m a
</span><a href="file:///nix/store/pdlvkcn31k7dw3q5bcndp7f9d2z5l0h3-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/Control.Monad.IO.Class.html#MonadIO"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var">MonadIO</span></a></span></span><span>
</span><span id="line-109"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="local-6989586621680429360"><span id="local-6989586621680429364"><span id="local-6989586621680429368"><span class="annot"><a href="file:///nix/store/pdlvkcn31k7dw3q5bcndp7f9d2z5l0h3-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/mtl-2.3.1/src/Control.Monad.Reader.Class.html#MonadReader"><span class="hs-identifier hs-type">MonadReader</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621680428677"><span class="hs-identifier hs-type">eon</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680428678"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span></span></span></span><span>
</span><span id="line-110"></span><span>    </span><span class="hs-special">)</span><span>
</span><span id="line-111"></span><span>
</span><span id="line-112"></span><span id="local-6989586621680428733"><span id="local-6989586621680428734"><span id="local-6989586621680428735"><span id="local-6989586621680428736"><span class="annot"><a href="Hydra.Chain.CardanoClient.html#runEraT"><span class="hs-identifier hs-type">runEraT</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="#local-6989586621680428733"><span class="hs-identifier hs-type">eon</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680428734"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Hydra.Chain.CardanoClient.html#EraT"><span class="hs-identifier hs-type">EraT</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680428733"><span class="hs-identifier hs-type">eon</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680428734"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680428735"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680428736"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680428735"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680428736"><span class="hs-identifier hs-type">a</span></a></span></span></span></span></span><span>
</span><span id="line-113"></span><span id="runEraT"><span class="annot"><span class="annottext">runEraT :: forall {k} (eon :: k -&gt; *) (era :: k) (m :: * -&gt; *) a.
eon era -&gt; EraT eon era m a -&gt; m a
</span><a href="Hydra.Chain.CardanoClient.html#runEraT"><span class="hs-identifier hs-var hs-var">runEraT</span></a></span></span><span> </span><span id="local-6989586621680429373"><span class="annot"><span class="annottext">eon era
</span><a href="#local-6989586621680429373"><span class="hs-identifier hs-var">era</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(ReaderT (eon era) m a -&gt; eon era -&gt; m a)
-&gt; eon era -&gt; ReaderT (eon era) m a -&gt; m a
forall a b c. (a -&gt; b -&gt; c) -&gt; b -&gt; a -&gt; c
</span><a href="file:///nix/store/pdlvkcn31k7dw3q5bcndp7f9d2z5l0h3-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/GHC.Base.html#flip"><span class="hs-identifier hs-var">flip</span></a></span><span> </span><span class="annot"><span class="annottext">ReaderT (eon era) m a -&gt; eon era -&gt; m a
forall r (m :: * -&gt; *) a. ReaderT r m a -&gt; r -&gt; m a
</span><a href="file:///nix/store/pdlvkcn31k7dw3q5bcndp7f9d2z5l0h3-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/transformers-0.6.1.0/src/Control.Monad.Trans.Reader.html#runReaderT"><span class="hs-identifier hs-var">runReaderT</span></a></span><span> </span><span class="annot"><span class="annottext">eon era
</span><a href="#local-6989586621680429373"><span class="hs-identifier hs-var">era</span></a></span><span> </span><span class="annot"><span class="annottext">(ReaderT (eon era) m a -&gt; m a)
-&gt; (EraT eon era m a -&gt; ReaderT (eon era) m a)
-&gt; EraT eon era m a
-&gt; m a
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="file:///nix/store/pdlvkcn31k7dw3q5bcndp7f9d2z5l0h3-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">EraT eon era m a -&gt; ReaderT (eon era) m a
forall {k} (eon :: k -&gt; *) (era :: k) (m :: * -&gt; *) a.
EraT eon era m a -&gt; ReaderT (eon era) m a
</span><a href="Hydra.Chain.CardanoClient.html#%24sel%3AfromEraT%3AEraT"><span class="hs-identifier hs-var">fromEraT</span></a></span><span>
</span><span id="line-114"></span><span>
</span><span id="line-115"></span><span id="local-6989586621680428752"><span id="local-6989586621680428753"><span id="local-6989586621680428754"><span class="annot"><a href="Hydra.Chain.CardanoClient.html#askEra"><span class="hs-identifier hs-type">askEra</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="file:///nix/store/pdlvkcn31k7dw3q5bcndp7f9d2z5l0h3-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/GHC.Base.html#Monad"><span class="hs-identifier hs-type">Monad</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680428752"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Hydra.Chain.CardanoClient.html#CardanoNodeT"><span class="hs-identifier hs-type">CardanoNodeT</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680428753"><span class="hs-identifier hs-type">eon</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680428754"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680428752"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621680428753"><span class="hs-identifier hs-type">eon</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680428754"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span></span></span></span><span>
</span><span id="line-116"></span><span id="askEra"><span class="annot"><span class="annottext">askEra :: forall {k} (m :: * -&gt; *) (eon :: k -&gt; *) (era :: k).
Monad m =&gt;
CardanoNodeT eon era m (eon era)
</span><a href="Hydra.Chain.CardanoClient.html#askEra"><span class="hs-identifier hs-var hs-var">askEra</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ReaderT LocalNodeConnectInfo (EraT eon era m) (eon era)
-&gt; CardanoNodeT eon era m (eon era)
forall {k} (eon :: k -&gt; *) (era :: k) (m :: * -&gt; *) a.
ReaderT LocalNodeConnectInfo (EraT eon era m) a
-&gt; CardanoNodeT eon era m a
</span><a href="Hydra.Chain.CardanoClient.html#CardanoNodeT"><span class="hs-identifier hs-var">CardanoNodeT</span></a></span><span> </span><span class="annot"><span class="annottext">(ReaderT LocalNodeConnectInfo (EraT eon era m) (eon era)
 -&gt; CardanoNodeT eon era m (eon era))
-&gt; ReaderT LocalNodeConnectInfo (EraT eon era m) (eon era)
-&gt; CardanoNodeT eon era m (eon era)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/pdlvkcn31k7dw3q5bcndp7f9d2z5l0h3-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">EraT eon era m (eon era)
-&gt; ReaderT LocalNodeConnectInfo (EraT eon era m) (eon era)
forall (m :: * -&gt; *) a.
Monad m =&gt;
m a -&gt; ReaderT LocalNodeConnectInfo m a
forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *) a.
(MonadTrans t, Monad m) =&gt;
m a -&gt; t m a
</span><a href="file:///nix/store/pdlvkcn31k7dw3q5bcndp7f9d2z5l0h3-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/transformers-0.6.1.0/src/Control.Monad.Trans.Class.html#lift"><span class="hs-identifier hs-var">lift</span></a></span><span> </span><span class="annot"><span class="annottext">EraT eon era m (eon era)
forall r (m :: * -&gt; *). MonadReader r m =&gt; m r
</span><a href="file:///nix/store/pdlvkcn31k7dw3q5bcndp7f9d2z5l0h3-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/mtl-2.3.1/src/Control.Monad.Reader.Class.html#ask"><span class="hs-identifier hs-var">ask</span></a></span><span>
</span><span id="line-117"></span><span>
</span><span id="line-118"></span><span class="annot"><span class="hs-comment">-- | Run a 'CardanoNodeIO' action given a connection and era witness.</span></span><span>
</span><span id="line-119"></span><span id="local-6989586621680428768"><span id="local-6989586621680428769"><span id="local-6989586621680428770"><span id="local-6989586621680428771"><span class="annot"><a href="Hydra.Chain.CardanoClient.html#runCardanoNodeT"><span class="hs-identifier hs-type">runCardanoNodeT</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-120"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">LocalNodeConnectInfo</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-121"></span><span>  </span><span class="annot"><a href="#local-6989586621680428768"><span class="hs-identifier hs-type">eon</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680428769"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-122"></span><span>  </span><span class="annot"><a href="Hydra.Chain.CardanoClient.html#CardanoNodeT"><span class="hs-identifier hs-type">CardanoNodeT</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680428768"><span class="hs-identifier hs-type">eon</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680428769"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680428770"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680428771"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-123"></span><span>  </span><span class="annot"><a href="#local-6989586621680428770"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680428771"><span class="hs-identifier hs-type">a</span></a></span></span></span></span></span><span>
</span><span id="line-124"></span><span id="runCardanoNodeT"><span class="annot"><span class="annottext">runCardanoNodeT :: forall {k} (eon :: k -&gt; *) (era :: k) (m :: * -&gt; *) a.
LocalNodeConnectInfo -&gt; eon era -&gt; CardanoNodeT eon era m a -&gt; m a
</span><a href="Hydra.Chain.CardanoClient.html#runCardanoNodeT"><span class="hs-identifier hs-var hs-var">runCardanoNodeT</span></a></span></span><span> </span><span id="local-6989586621680429386"><span class="annot"><span class="annottext">LocalNodeConnectInfo
</span><a href="#local-6989586621680429386"><span class="hs-identifier hs-var">ci</span></a></span></span><span> </span><span id="local-6989586621680429387"><span class="annot"><span class="annottext">eon era
</span><a href="#local-6989586621680429387"><span class="hs-identifier hs-var">era</span></a></span></span><span> </span><span id="local-6989586621680429388"><span class="annot"><span class="annottext">CardanoNodeT eon era m a
</span><a href="#local-6989586621680429388"><span class="hs-identifier hs-var">action</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-125"></span><span>  </span><span class="annot"><span class="annottext">eon era -&gt; EraT eon era m a -&gt; m a
forall {k} (eon :: k -&gt; *) (era :: k) (m :: * -&gt; *) a.
eon era -&gt; EraT eon era m a -&gt; m a
</span><a href="Hydra.Chain.CardanoClient.html#runEraT"><span class="hs-identifier hs-var">runEraT</span></a></span><span> </span><span class="annot"><span class="annottext">eon era
</span><a href="#local-6989586621680429387"><span class="hs-identifier hs-var">era</span></a></span><span> </span><span class="annot"><span class="annottext">(EraT eon era m a -&gt; m a) -&gt; EraT eon era m a -&gt; m a
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/pdlvkcn31k7dw3q5bcndp7f9d2z5l0h3-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">ReaderT LocalNodeConnectInfo (EraT eon era m) a
-&gt; LocalNodeConnectInfo -&gt; EraT eon era m a
forall r (m :: * -&gt; *) a. ReaderT r m a -&gt; r -&gt; m a
</span><a href="file:///nix/store/pdlvkcn31k7dw3q5bcndp7f9d2z5l0h3-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/transformers-0.6.1.0/src/Control.Monad.Trans.Reader.html#runReaderT"><span class="hs-identifier hs-var">runReaderT</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CardanoNodeT eon era m a
-&gt; ReaderT LocalNodeConnectInfo (EraT eon era m) a
forall {k} (eon :: k -&gt; *) (era :: k) (m :: * -&gt; *) a.
CardanoNodeT eon era m a
-&gt; ReaderT LocalNodeConnectInfo (EraT eon era m) a
</span><a href="Hydra.Chain.CardanoClient.html#%24sel%3AfromCardanoNodeT%3ACardanoNodeT"><span class="hs-identifier hs-var">fromCardanoNodeT</span></a></span><span> </span><span class="annot"><span class="annottext">CardanoNodeT eon era m a
</span><a href="#local-6989586621680429388"><span class="hs-identifier hs-var">action</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">LocalNodeConnectInfo
</span><a href="#local-6989586621680429386"><span class="hs-identifier hs-var">ci</span></a></span><span>
</span><span id="line-126"></span><span>
</span><span id="line-127"></span><span id="local-6989586621680428778"><span id="local-6989586621680428779"><span id="local-6989586621680428780"><span class="annot"><a href="Hydra.Chain.CardanoClient.html#runCardanoNode"><span class="hs-identifier hs-type">runCardanoNode</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">LocalNodeConnectInfo</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680428778"><span class="hs-identifier hs-type">eon</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680428779"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Hydra.Chain.CardanoClient.html#CardanoNode"><span class="hs-identifier hs-type">CardanoNode</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680428778"><span class="hs-identifier hs-type">eon</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680428779"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680428780"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="file:///nix/store/pdlvkcn31k7dw3q5bcndp7f9d2z5l0h3-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#IO"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680428780"><span class="hs-identifier hs-type">a</span></a></span></span></span></span><span>
</span><span id="line-128"></span><span id="runCardanoNode"><span class="annot"><span class="annottext">runCardanoNode :: forall {k} (eon :: k -&gt; *) (era :: k) a.
LocalNodeConnectInfo -&gt; eon era -&gt; CardanoNode eon era a -&gt; IO a
</span><a href="Hydra.Chain.CardanoClient.html#runCardanoNode"><span class="hs-identifier hs-var hs-var">runCardanoNode</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LocalNodeConnectInfo
-&gt; eon era -&gt; CardanoNodeT eon era IO a -&gt; IO a
forall {k} (eon :: k -&gt; *) (era :: k) (m :: * -&gt; *) a.
LocalNodeConnectInfo -&gt; eon era -&gt; CardanoNodeT eon era m a -&gt; m a
</span><a href="Hydra.Chain.CardanoClient.html#runCardanoNodeT"><span class="hs-identifier hs-var">runCardanoNodeT</span></a></span><span>
</span><span id="line-129"></span><span>
</span><span id="line-130"></span><span class="annot"><span class="hs-comment">-- * Tx Construction / Submission</span></span><span>
</span><span id="line-131"></span><span>
</span><span id="line-132"></span><span class="hs-comment">-- | Submit a (signed) transaction to the node.</span><span>
</span><span id="line-133"></span><span class="hs-comment">--</span><span>
</span><span id="line-134"></span><span class="hs-comment">-- Throws 'SubmitTransactionException' if submission fails.</span><span>
</span><span id="line-135"></span><span id="local-6989586621680428786"><span class="annot"><a href="Hydra.Chain.CardanoClient.html#submitTransaction"><span class="hs-identifier hs-type">submitTransaction</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-136"></span><span>  </span><span class="annot"><a href="file:///nix/store/pdlvkcn31k7dw3q5bcndp7f9d2z5l0h3-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/Control.Monad.IO.Class.html#MonadIO"><span class="hs-identifier hs-type">MonadIO</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680428786"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-137"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">Tx</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-138"></span><span>  </span><span class="annot"><a href="Hydra.Chain.CardanoClient.html#CardanoNodeT"><span class="hs-identifier hs-type">CardanoNodeT</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">ShelleyBasedEra</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Era</span></span><span> </span><span class="annot"><a href="#local-6989586621680428786"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span></span><span>
</span><span id="line-139"></span><span id="submitTransaction"><span class="annot"><span class="annottext">submitTransaction :: forall (m :: * -&gt; *).
MonadIO m =&gt;
Tx -&gt; CardanoNodeT ShelleyBasedEra Era m ()
</span><a href="Hydra.Chain.CardanoClient.html#submitTransaction"><span class="hs-identifier hs-var hs-var">submitTransaction</span></a></span></span><span> </span><span id="local-6989586621680429407"><span class="annot"><span class="annottext">Tx
</span><a href="#local-6989586621680429407"><span class="hs-identifier hs-var">tx</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-140"></span><span>  </span><span id="local-6989586621680429408"><span class="annot"><span class="annottext">LocalNodeConnectInfo
</span><a href="#local-6989586621680429408"><span class="hs-identifier hs-var">ci</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">CardanoNodeT ShelleyBasedEra Era m LocalNodeConnectInfo
forall r (m :: * -&gt; *). MonadReader r m =&gt; m r
</span><a href="file:///nix/store/pdlvkcn31k7dw3q5bcndp7f9d2z5l0h3-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/mtl-2.3.1/src/Control.Monad.Reader.Class.html#ask"><span class="hs-identifier hs-var">ask</span></a></span><span>
</span><span id="line-141"></span><span>  </span><span id="local-6989586621680429409"><span class="annot"><span class="annottext">ShelleyBasedEra Era
</span><a href="#local-6989586621680429409"><span class="hs-identifier hs-var">sbe</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">CardanoNodeT ShelleyBasedEra Era m (ShelleyBasedEra Era)
forall {k} (m :: * -&gt; *) (eon :: k -&gt; *) (era :: k).
Monad m =&gt;
CardanoNodeT eon era m (eon era)
</span><a href="Hydra.Chain.CardanoClient.html#askEra"><span class="hs-identifier hs-var">askEra</span></a></span><span>
</span><span id="line-142"></span><span>  </span><span class="annot"><span class="annottext">IO () -&gt; CardanoNodeT ShelleyBasedEra Era m ()
forall a. IO a -&gt; CardanoNodeT ShelleyBasedEra Era m a
forall (m :: * -&gt; *) a. MonadIO m =&gt; IO a -&gt; m a
</span><a href="file:///nix/store/pdlvkcn31k7dw3q5bcndp7f9d2z5l0h3-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/Control.Monad.IO.Class.html#liftIO"><span class="hs-identifier hs-var">liftIO</span></a></span><span> </span><span class="annot"><span class="annottext">(IO () -&gt; CardanoNodeT ShelleyBasedEra Era m ())
-&gt; IO () -&gt; CardanoNodeT ShelleyBasedEra Era m ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/pdlvkcn31k7dw3q5bcndp7f9d2z5l0h3-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-143"></span><span>    </span><span class="annot"><span class="annottext">LocalNodeConnectInfo
-&gt; TxInMode -&gt; IO (SubmitResult TxValidationErrorInCardanoMode)
forall (m :: * -&gt; *).
MonadIO m =&gt;
LocalNodeConnectInfo
-&gt; TxInMode -&gt; m (SubmitResult TxValidationErrorInCardanoMode)
</span><span class="hs-identifier hs-var">submitTxToNodeLocal</span></span><span> </span><span class="annot"><span class="annottext">LocalNodeConnectInfo
</span><a href="#local-6989586621680429408"><span class="hs-identifier hs-var">ci</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ShelleyBasedEra Era -&gt; Tx -&gt; TxInMode
forall era. ShelleyBasedEra era -&gt; Tx era -&gt; TxInMode
</span><span class="hs-identifier hs-var">TxInMode</span></span><span> </span><span class="annot"><span class="annottext">ShelleyBasedEra Era
</span><a href="#local-6989586621680429409"><span class="hs-identifier hs-var">sbe</span></a></span><span> </span><span class="annot"><span class="annottext">Tx
</span><a href="#local-6989586621680429407"><span class="hs-identifier hs-var">tx</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">IO (SubmitResult TxValidationErrorInCardanoMode)
-&gt; (SubmitResult TxValidationErrorInCardanoMode -&gt; IO ()) -&gt; IO ()
forall a b. IO a -&gt; (a -&gt; IO b) -&gt; IO b
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><a href="file:///nix/store/pdlvkcn31k7dw3q5bcndp7f9d2z5l0h3-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/GHC.Base.html#%3E%3E%3D"><span class="hs-operator hs-var">&gt;&gt;=</span></a></span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-144"></span><span>      </span><span class="annot"><span class="annottext">SubmitResult TxValidationErrorInCardanoMode
</span><span class="hs-identifier hs-var">SubmitSuccess</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">() -&gt; IO ()
forall a. a -&gt; IO a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="file:///nix/store/pdlvkcn31k7dw3q5bcndp7f9d2z5l0h3-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/GHC.Base.html#pure"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-145"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">SubmitFail</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">TxValidationEraMismatch</span></span><span> </span><span id="local-6989586621680429416"><span class="annot"><span class="annottext">EraMismatch
</span><a href="#local-6989586621680429416"><span class="hs-identifier hs-var">e</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">SubmitTransactionException -&gt; IO ()
forall e a. Exception e =&gt; e -&gt; IO a
forall (m :: * -&gt; *) e a. (MonadThrow m, Exception e) =&gt; e -&gt; m a
</span><span class="hs-identifier hs-var">throwIO</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">EraMismatch -&gt; SubmitTransactionException
</span><a href="Hydra.Chain.CardanoClient.html#SubmitEraMismatch"><span class="hs-identifier hs-var">SubmitEraMismatch</span></a></span><span> </span><span class="annot"><span class="annottext">EraMismatch
</span><a href="#local-6989586621680429416"><span class="hs-identifier hs-var">e</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-146"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">SubmitFail</span></span><span> </span><span id="local-6989586621680429418"><span class="annot"><span class="annottext">e :: TxValidationErrorInCardanoMode
</span><a href="#local-6989586621680429418"><span class="hs-identifier hs-var">e</span></a></span></span><span class="hs-glyph">@</span><span class="annot"><span class="hs-identifier hs-type">TxValidationErrorInCardanoMode</span></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">SubmitTransactionException -&gt; IO ()
forall e a. Exception e =&gt; e -&gt; IO a
forall (m :: * -&gt; *) e a. (MonadThrow m, Exception e) =&gt; e -&gt; m a
</span><span class="hs-identifier hs-var">throwIO</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TxValidationErrorInCardanoMode -&gt; SubmitTransactionException
</span><a href="Hydra.Chain.CardanoClient.html#SubmitTxValidationError"><span class="hs-identifier hs-var">SubmitTxValidationError</span></a></span><span> </span><span class="annot"><span class="annottext">TxValidationErrorInCardanoMode
</span><a href="#local-6989586621680429418"><span class="hs-identifier hs-var">e</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-147"></span><span>
</span><span id="line-148"></span><span class="hs-comment">-- | Await until the given transaction is visible on-chain. Returns the UTxO</span><span>
</span><span id="line-149"></span><span class="hs-comment">-- set produced by that transaction.</span><span>
</span><span id="line-150"></span><span class="hs-comment">--</span><span>
</span><span id="line-151"></span><span class="hs-comment">-- Note that this function loops forever; hence, one probably wants to couple it</span><span>
</span><span id="line-152"></span><span class="hs-comment">-- with a surrounding timeout.</span><span>
</span><span id="line-153"></span><span id="local-6989586621680428800"><span id="local-6989586621680428801"><span class="annot"><a href="Hydra.Chain.CardanoClient.html#awaitTransaction"><span class="hs-identifier hs-type">awaitTransaction</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-154"></span><span>  </span><span class="annot"><a href="file:///nix/store/pdlvkcn31k7dw3q5bcndp7f9d2z5l0h3-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/Control.Monad.IO.Class.html#MonadIO"><span class="hs-identifier hs-type">MonadIO</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680428800"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-155"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">Tx</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-156"></span><span>  </span><span class="annot"><a href="Hydra.Chain.CardanoClient.html#CardanoNodeT"><span class="hs-identifier hs-type">CardanoNodeT</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">ShelleyBasedEra</span></span><span> </span><span class="annot"><a href="#local-6989586621680428801"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680428800"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">UTxO</span></span><span> </span><span class="annot"><a href="#local-6989586621680428801"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span></span></span><span>
</span><span id="line-157"></span><span id="awaitTransaction"><span class="annot"><span class="annottext">awaitTransaction :: forall (m :: * -&gt; *) era.
MonadIO m =&gt;
Tx -&gt; CardanoNodeT ShelleyBasedEra era m (UTxO era)
</span><a href="Hydra.Chain.CardanoClient.html#awaitTransaction"><span class="hs-identifier hs-var hs-var">awaitTransaction</span></a></span></span><span> </span><span id="local-6989586621680429435"><span class="annot"><span class="annottext">Tx
</span><a href="#local-6989586621680429435"><span class="hs-identifier hs-var">tx</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CardanoNodeT ShelleyBasedEra era m (UTxO era)
</span><a href="#local-6989586621680429436"><span class="hs-identifier hs-var">go</span></a></span><span>
</span><span id="line-158"></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-159"></span><span>  </span><span id="local-6989586621680429437"><span class="annot"><span class="annottext">ins :: [TxIn]
</span><a href="#local-6989586621680429437"><span class="hs-identifier hs-var hs-var">ins</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Map TxIn (TxOut CtxUTxO Era) -&gt; [TxIn]
forall t a b. (IsList t, Item t ~ (a, b)) =&gt; t -&gt; [a]
</span><span class="hs-identifier hs-var">keys</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">UTxO Era -&gt; Map TxIn (TxOut CtxUTxO Era)
forall era. UTxO era -&gt; Map TxIn (TxOut CtxUTxO era)
</span><span class="hs-identifier hs-var">UTxO.toMap</span></span><span> </span><span class="annot"><span class="annottext">(UTxO Era -&gt; Map TxIn (TxOut CtxUTxO Era))
-&gt; UTxO Era -&gt; Map TxIn (TxOut CtxUTxO Era)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/pdlvkcn31k7dw3q5bcndp7f9d2z5l0h3-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Tx -&gt; UTxO Era
</span><span class="hs-identifier hs-var">utxoFromTx</span></span><span> </span><span class="annot"><span class="annottext">Tx
</span><a href="#local-6989586621680429435"><span class="hs-identifier hs-var">tx</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-160"></span><span>  </span><span id="local-6989586621680429436"><span class="annot"><span class="annottext">go :: CardanoNodeT ShelleyBasedEra era m (UTxO era)
</span><a href="#local-6989586621680429436"><span class="hs-identifier hs-var hs-var">go</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-161"></span><span>    </span><span id="local-6989586621680429441"><span class="annot"><span class="annottext">UTxO era
</span><a href="#local-6989586621680429441"><span class="hs-identifier hs-var">utxo</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">QueryPoint
-&gt; [TxIn] -&gt; CardanoNodeT ShelleyBasedEra era m (UTxO era)
forall (m :: * -&gt; *) era.
MonadIO m =&gt;
QueryPoint
-&gt; [TxIn] -&gt; CardanoNodeT ShelleyBasedEra era m (UTxO era)
</span><a href="Hydra.Chain.CardanoClient.html#queryUTxOByTxIn"><span class="hs-identifier hs-var">queryUTxOByTxIn</span></a></span><span> </span><span class="annot"><span class="annottext">QueryPoint
</span><a href="Hydra.Chain.CardanoClient.html#QueryTip"><span class="hs-identifier hs-var">QueryTip</span></a></span><span> </span><span class="annot"><span class="annottext">[TxIn]
</span><a href="#local-6989586621680429437"><span class="hs-identifier hs-var">ins</span></a></span><span>
</span><span id="line-162"></span><span>    </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">UTxO era -&gt; Bool
forall era. UTxO era -&gt; Bool
</span><span class="hs-identifier hs-var">UTxO.null</span></span><span> </span><span class="annot"><span class="annottext">UTxO era
</span><a href="#local-6989586621680429441"><span class="hs-identifier hs-var">utxo</span></a></span><span>
</span><span id="line-163"></span><span>      </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">CardanoNodeT ShelleyBasedEra era m (UTxO era)
</span><a href="#local-6989586621680429436"><span class="hs-identifier hs-var">go</span></a></span><span>
</span><span id="line-164"></span><span>      </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">UTxO era -&gt; CardanoNodeT ShelleyBasedEra era m (UTxO era)
forall a. a -&gt; CardanoNodeT ShelleyBasedEra era m a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="file:///nix/store/pdlvkcn31k7dw3q5bcndp7f9d2z5l0h3-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/GHC.Base.html#pure"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">UTxO era
</span><a href="#local-6989586621680429441"><span class="hs-identifier hs-var">utxo</span></a></span><span>
</span><span id="line-165"></span><span>
</span><span id="line-166"></span><span class="annot"><span class="hs-comment">-- | Query the latest chain point aka &quot;the tip&quot;.</span></span><span>
</span><span id="line-167"></span><span id="local-6989586621680428819"><span id="local-6989586621680428820"><span id="local-6989586621680428821"><span class="annot"><a href="Hydra.Chain.CardanoClient.html#queryTip"><span class="hs-identifier hs-type">queryTip</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="file:///nix/store/pdlvkcn31k7dw3q5bcndp7f9d2z5l0h3-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/Control.Monad.IO.Class.html#MonadIO"><span class="hs-identifier hs-type">MonadIO</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680428819"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Hydra.Chain.CardanoClient.html#CardanoNodeT"><span class="hs-identifier hs-type">CardanoNodeT</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680428820"><span class="hs-identifier hs-type">eon</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680428821"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680428819"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">ChainPoint</span></span></span></span></span><span>
</span><span id="line-168"></span><span id="queryTip"><span class="annot"><span class="annottext">queryTip :: forall {k} (m :: * -&gt; *) (eon :: k -&gt; *) (era :: k).
MonadIO m =&gt;
CardanoNodeT eon era m ChainPoint
</span><a href="Hydra.Chain.CardanoClient.html#queryTip"><span class="hs-identifier hs-var hs-var">queryTip</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-169"></span><span>  </span><span id="local-6989586621680429453"><span class="annot"><span class="annottext">LocalNodeConnectInfo
</span><a href="#local-6989586621680429453"><span class="hs-identifier hs-var">ci</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">CardanoNodeT eon era m LocalNodeConnectInfo
forall r (m :: * -&gt; *). MonadReader r m =&gt; m r
</span><a href="file:///nix/store/pdlvkcn31k7dw3q5bcndp7f9d2z5l0h3-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/mtl-2.3.1/src/Control.Monad.Reader.Class.html#ask"><span class="hs-identifier hs-var">ask</span></a></span><span>
</span><span id="line-170"></span><span>  </span><span class="annot"><span class="annottext">IO ChainPoint -&gt; CardanoNodeT eon era m ChainPoint
forall a. IO a -&gt; CardanoNodeT eon era m a
forall (m :: * -&gt; *) a. MonadIO m =&gt; IO a -&gt; m a
</span><a href="file:///nix/store/pdlvkcn31k7dw3q5bcndp7f9d2z5l0h3-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/Control.Monad.IO.Class.html#liftIO"><span class="hs-identifier hs-var">liftIO</span></a></span><span> </span><span class="annot"><span class="annottext">(IO ChainPoint -&gt; CardanoNodeT eon era m ChainPoint)
-&gt; IO ChainPoint -&gt; CardanoNodeT eon era m ChainPoint
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/pdlvkcn31k7dw3q5bcndp7f9d2z5l0h3-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">ChainTip -&gt; ChainPoint
</span><span class="hs-identifier hs-var">chainTipToChainPoint</span></span><span> </span><span class="annot"><span class="annottext">(ChainTip -&gt; ChainPoint) -&gt; IO ChainTip -&gt; IO ChainPoint
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="file:///nix/store/pdlvkcn31k7dw3q5bcndp7f9d2z5l0h3-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/Data.Functor.html#%3C%24%3E"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">LocalNodeConnectInfo -&gt; IO ChainTip
forall (m :: * -&gt; *).
MonadIO m =&gt;
LocalNodeConnectInfo -&gt; m ChainTip
</span><span class="hs-identifier hs-var">getLocalChainTip</span></span><span> </span><span class="annot"><span class="annottext">LocalNodeConnectInfo
</span><a href="#local-6989586621680429453"><span class="hs-identifier hs-var">ci</span></a></span><span>
</span><span id="line-171"></span><span>
</span><span id="line-172"></span><span class="hs-comment">-- | Query the system start parameter at given point.</span><span>
</span><span id="line-173"></span><span class="hs-comment">--</span><span>
</span><span id="line-174"></span><span class="hs-comment">-- Throws at least 'QueryException' if query fails.</span><span>
</span><span id="line-175"></span><span id="local-6989586621680428832"><span id="local-6989586621680428833"><span id="local-6989586621680428834"><span class="annot"><a href="Hydra.Chain.CardanoClient.html#querySystemStart"><span class="hs-identifier hs-type">querySystemStart</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="file:///nix/store/pdlvkcn31k7dw3q5bcndp7f9d2z5l0h3-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/Control.Monad.IO.Class.html#MonadIO"><span class="hs-identifier hs-type">MonadIO</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680428832"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Hydra.Chain.CardanoClient.html#QueryPoint"><span class="hs-identifier hs-type">QueryPoint</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Hydra.Chain.CardanoClient.html#CardanoNodeT"><span class="hs-identifier hs-type">CardanoNodeT</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680428833"><span class="hs-identifier hs-type">eon</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680428834"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680428832"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">SystemStart</span></span></span></span></span><span>
</span><span id="line-176"></span><span id="querySystemStart"><span class="annot"><span class="annottext">querySystemStart :: forall {k} (m :: * -&gt; *) (eon :: k -&gt; *) (era :: k).
MonadIO m =&gt;
QueryPoint -&gt; CardanoNodeT eon era m SystemStart
</span><a href="Hydra.Chain.CardanoClient.html#querySystemStart"><span class="hs-identifier hs-var hs-var">querySystemStart</span></a></span></span><span> </span><span id="local-6989586621680429466"><span class="annot"><span class="annottext">QueryPoint
</span><a href="#local-6989586621680429466"><span class="hs-identifier hs-var">point</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-177"></span><span>  </span><span class="annot"><span class="annottext">QueryPoint
-&gt; LocalStateQueryExpr
     BlockInMode ChainPoint QueryInMode () IO SystemStart
-&gt; CardanoNodeT eon era m SystemStart
forall {k} (m :: * -&gt; *) a (eon :: k -&gt; *) (era :: k).
MonadIO m =&gt;
QueryPoint
-&gt; LocalStateQueryExpr BlockInMode ChainPoint QueryInMode () IO a
-&gt; CardanoNodeT eon era m a
</span><a href="Hydra.Chain.CardanoClient.html#runQuery"><span class="hs-identifier hs-var">runQuery</span></a></span><span> </span><span class="annot"><span class="annottext">QueryPoint
</span><a href="#local-6989586621680429466"><span class="hs-identifier hs-var">point</span></a></span><span> </span><span class="annot"><span class="annottext">(LocalStateQueryExpr
   BlockInMode ChainPoint QueryInMode () IO SystemStart
 -&gt; CardanoNodeT eon era m SystemStart)
-&gt; LocalStateQueryExpr
     BlockInMode ChainPoint QueryInMode () IO SystemStart
-&gt; CardanoNodeT eon era m SystemStart
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/pdlvkcn31k7dw3q5bcndp7f9d2z5l0h3-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-178"></span><span>    </span><span class="annot"><span class="annottext">LocalStateQueryExpr
  BlockInMode
  ChainPoint
  QueryInMode
  ()
  IO
  (Either UnsupportedNtcVersionError SystemStart)
forall block point r.
LocalStateQueryExpr
  block
  point
  QueryInMode
  r
  IO
  (Either UnsupportedNtcVersionError SystemStart)
</span><span class="hs-identifier hs-var">Query.querySystemStart</span></span><span> </span><span class="annot"><span class="annottext">LocalStateQueryExpr
  BlockInMode
  ChainPoint
  QueryInMode
  ()
  IO
  (Either UnsupportedNtcVersionError SystemStart)
-&gt; (Either UnsupportedNtcVersionError SystemStart
    -&gt; LocalStateQueryExpr
         BlockInMode ChainPoint QueryInMode () IO SystemStart)
-&gt; LocalStateQueryExpr
     BlockInMode ChainPoint QueryInMode () IO SystemStart
forall a b.
LocalStateQueryExpr BlockInMode ChainPoint QueryInMode () IO a
-&gt; (a
    -&gt; LocalStateQueryExpr BlockInMode ChainPoint QueryInMode () IO b)
-&gt; LocalStateQueryExpr BlockInMode ChainPoint QueryInMode () IO b
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><a href="file:///nix/store/pdlvkcn31k7dw3q5bcndp7f9d2z5l0h3-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/GHC.Base.html#%3E%3E%3D"><span class="hs-operator hs-var">&gt;&gt;=</span></a></span><span> </span><span class="annot"><span class="annottext">IO SystemStart
-&gt; LocalStateQueryExpr
     BlockInMode ChainPoint QueryInMode () IO SystemStart
forall a.
IO a
-&gt; LocalStateQueryExpr BlockInMode ChainPoint QueryInMode () IO a
forall (m :: * -&gt; *) a. MonadIO m =&gt; IO a -&gt; m a
</span><a href="file:///nix/store/pdlvkcn31k7dw3q5bcndp7f9d2z5l0h3-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/Control.Monad.IO.Class.html#liftIO"><span class="hs-identifier hs-var">liftIO</span></a></span><span> </span><span class="annot"><span class="annottext">(IO SystemStart
 -&gt; LocalStateQueryExpr
      BlockInMode ChainPoint QueryInMode () IO SystemStart)
-&gt; (Either UnsupportedNtcVersionError SystemStart
    -&gt; IO SystemStart)
-&gt; Either UnsupportedNtcVersionError SystemStart
-&gt; LocalStateQueryExpr
     BlockInMode ChainPoint QueryInMode () IO SystemStart
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="file:///nix/store/pdlvkcn31k7dw3q5bcndp7f9d2z5l0h3-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">Either UnsupportedNtcVersionError SystemStart -&gt; IO SystemStart
forall (m :: * -&gt; *) a.
MonadThrow m =&gt;
Either UnsupportedNtcVersionError a -&gt; m a
</span><a href="Hydra.Chain.CardanoClient.html#throwOnUnsupportedNtcVersion"><span class="hs-identifier hs-var">throwOnUnsupportedNtcVersion</span></a></span><span>
</span><span id="line-179"></span><span>
</span><span id="line-180"></span><span class="hs-comment">-- | Query the era history at given point.</span><span>
</span><span id="line-181"></span><span class="hs-comment">--</span><span>
</span><span id="line-182"></span><span class="hs-comment">-- Throws at least 'QueryException' if query fails.</span><span>
</span><span id="line-183"></span><span id="local-6989586621680428864"><span id="local-6989586621680428865"><span id="local-6989586621680428866"><span class="annot"><a href="Hydra.Chain.CardanoClient.html#queryEraHistory"><span class="hs-identifier hs-type">queryEraHistory</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="file:///nix/store/pdlvkcn31k7dw3q5bcndp7f9d2z5l0h3-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/Control.Monad.IO.Class.html#MonadIO"><span class="hs-identifier hs-type">MonadIO</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680428864"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Hydra.Chain.CardanoClient.html#QueryPoint"><span class="hs-identifier hs-type">QueryPoint</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Hydra.Chain.CardanoClient.html#CardanoNodeT"><span class="hs-identifier hs-type">CardanoNodeT</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680428865"><span class="hs-identifier hs-type">eon</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680428866"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680428864"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">EraHistory</span></span></span></span></span><span>
</span><span id="line-184"></span><span id="queryEraHistory"><span class="annot"><span class="annottext">queryEraHistory :: forall {k} (m :: * -&gt; *) (eon :: k -&gt; *) (era :: k).
MonadIO m =&gt;
QueryPoint -&gt; CardanoNodeT eon era m EraHistory
</span><a href="Hydra.Chain.CardanoClient.html#queryEraHistory"><span class="hs-identifier hs-var hs-var">queryEraHistory</span></a></span></span><span> </span><span id="local-6989586621680429477"><span class="annot"><span class="annottext">QueryPoint
</span><a href="#local-6989586621680429477"><span class="hs-identifier hs-var">point</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-185"></span><span>  </span><span class="annot"><span class="annottext">QueryPoint
-&gt; LocalStateQueryExpr
     BlockInMode ChainPoint QueryInMode () IO EraHistory
-&gt; CardanoNodeT eon era m EraHistory
forall {k} (m :: * -&gt; *) a (eon :: k -&gt; *) (era :: k).
MonadIO m =&gt;
QueryPoint
-&gt; LocalStateQueryExpr BlockInMode ChainPoint QueryInMode () IO a
-&gt; CardanoNodeT eon era m a
</span><a href="Hydra.Chain.CardanoClient.html#runQuery"><span class="hs-identifier hs-var">runQuery</span></a></span><span> </span><span class="annot"><span class="annottext">QueryPoint
</span><a href="#local-6989586621680429477"><span class="hs-identifier hs-var">point</span></a></span><span> </span><span class="annot"><span class="annottext">(LocalStateQueryExpr
   BlockInMode ChainPoint QueryInMode () IO EraHistory
 -&gt; CardanoNodeT eon era m EraHistory)
-&gt; LocalStateQueryExpr
     BlockInMode ChainPoint QueryInMode () IO EraHistory
-&gt; CardanoNodeT eon era m EraHistory
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/pdlvkcn31k7dw3q5bcndp7f9d2z5l0h3-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-186"></span><span>    </span><span class="annot"><span class="annottext">LocalStateQueryExpr
  BlockInMode
  ChainPoint
  QueryInMode
  ()
  IO
  (Either UnsupportedNtcVersionError EraHistory)
forall block point r.
LocalStateQueryExpr
  block
  point
  QueryInMode
  r
  IO
  (Either UnsupportedNtcVersionError EraHistory)
</span><span class="hs-identifier hs-var">Query.queryEraHistory</span></span><span> </span><span class="annot"><span class="annottext">LocalStateQueryExpr
  BlockInMode
  ChainPoint
  QueryInMode
  ()
  IO
  (Either UnsupportedNtcVersionError EraHistory)
-&gt; (Either UnsupportedNtcVersionError EraHistory
    -&gt; LocalStateQueryExpr
         BlockInMode ChainPoint QueryInMode () IO EraHistory)
-&gt; LocalStateQueryExpr
     BlockInMode ChainPoint QueryInMode () IO EraHistory
forall a b.
LocalStateQueryExpr BlockInMode ChainPoint QueryInMode () IO a
-&gt; (a
    -&gt; LocalStateQueryExpr BlockInMode ChainPoint QueryInMode () IO b)
-&gt; LocalStateQueryExpr BlockInMode ChainPoint QueryInMode () IO b
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><a href="file:///nix/store/pdlvkcn31k7dw3q5bcndp7f9d2z5l0h3-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/GHC.Base.html#%3E%3E%3D"><span class="hs-operator hs-var">&gt;&gt;=</span></a></span><span> </span><span class="annot"><span class="annottext">IO EraHistory
-&gt; LocalStateQueryExpr
     BlockInMode ChainPoint QueryInMode () IO EraHistory
forall a.
IO a
-&gt; LocalStateQueryExpr BlockInMode ChainPoint QueryInMode () IO a
forall (m :: * -&gt; *) a. MonadIO m =&gt; IO a -&gt; m a
</span><a href="file:///nix/store/pdlvkcn31k7dw3q5bcndp7f9d2z5l0h3-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/Control.Monad.IO.Class.html#liftIO"><span class="hs-identifier hs-var">liftIO</span></a></span><span> </span><span class="annot"><span class="annottext">(IO EraHistory
 -&gt; LocalStateQueryExpr
      BlockInMode ChainPoint QueryInMode () IO EraHistory)
-&gt; (Either UnsupportedNtcVersionError EraHistory -&gt; IO EraHistory)
-&gt; Either UnsupportedNtcVersionError EraHistory
-&gt; LocalStateQueryExpr
     BlockInMode ChainPoint QueryInMode () IO EraHistory
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="file:///nix/store/pdlvkcn31k7dw3q5bcndp7f9d2z5l0h3-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">Either UnsupportedNtcVersionError EraHistory -&gt; IO EraHistory
forall (m :: * -&gt; *) a.
MonadThrow m =&gt;
Either UnsupportedNtcVersionError a -&gt; m a
</span><a href="Hydra.Chain.CardanoClient.html#throwOnUnsupportedNtcVersion"><span class="hs-identifier hs-var">throwOnUnsupportedNtcVersion</span></a></span><span>
</span><span id="line-187"></span><span>
</span><span id="line-188"></span><span class="hs-comment">-- | Query the current epoch number.</span><span>
</span><span id="line-189"></span><span class="hs-comment">--</span><span>
</span><span id="line-190"></span><span class="hs-comment">-- Throws at least 'QueryException' if query fails.</span><span>
</span><span id="line-191"></span><span id="local-6989586621680428875"><span id="local-6989586621680428876"><span class="annot"><a href="Hydra.Chain.CardanoClient.html#queryEpochNo"><span class="hs-identifier hs-type">queryEpochNo</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-192"></span><span>  </span><span class="annot"><a href="file:///nix/store/pdlvkcn31k7dw3q5bcndp7f9d2z5l0h3-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/Control.Monad.IO.Class.html#MonadIO"><span class="hs-identifier hs-type">MonadIO</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680428875"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-193"></span><span>  </span><span class="annot"><a href="Hydra.Chain.CardanoClient.html#QueryPoint"><span class="hs-identifier hs-type">QueryPoint</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-194"></span><span>  </span><span class="annot"><a href="Hydra.Chain.CardanoClient.html#CardanoNodeT"><span class="hs-identifier hs-type">CardanoNodeT</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">ShelleyBasedEra</span></span><span> </span><span class="annot"><a href="#local-6989586621680428876"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680428875"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">EpochNo</span></span></span></span><span>
</span><span id="line-195"></span><span id="queryEpochNo"><span class="annot"><span class="annottext">queryEpochNo :: forall (m :: * -&gt; *) era.
MonadIO m =&gt;
QueryPoint -&gt; CardanoNodeT ShelleyBasedEra era m EpochNo
</span><a href="Hydra.Chain.CardanoClient.html#queryEpochNo"><span class="hs-identifier hs-var hs-var">queryEpochNo</span></a></span></span><span> </span><span id="local-6989586621680429489"><span class="annot"><span class="annottext">QueryPoint
</span><a href="#local-6989586621680429489"><span class="hs-identifier hs-var">point</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-196"></span><span>  </span><span id="local-6989586621680429490"><span class="annot"><span class="annottext">ShelleyBasedEra era
</span><a href="#local-6989586621680429490"><span class="hs-identifier hs-var">sbe</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">CardanoNodeT ShelleyBasedEra era m (ShelleyBasedEra era)
forall {k} (m :: * -&gt; *) (eon :: k -&gt; *) (era :: k).
Monad m =&gt;
CardanoNodeT eon era m (eon era)
</span><a href="Hydra.Chain.CardanoClient.html#askEra"><span class="hs-identifier hs-var">askEra</span></a></span><span>
</span><span id="line-197"></span><span>  </span><span class="annot"><span class="annottext">QueryPoint
-&gt; LocalStateQueryExpr
     BlockInMode ChainPoint QueryInMode () IO EpochNo
-&gt; CardanoNodeT ShelleyBasedEra era m EpochNo
forall {k} (m :: * -&gt; *) a (eon :: k -&gt; *) (era :: k).
MonadIO m =&gt;
QueryPoint
-&gt; LocalStateQueryExpr BlockInMode ChainPoint QueryInMode () IO a
-&gt; CardanoNodeT eon era m a
</span><a href="Hydra.Chain.CardanoClient.html#runQuery"><span class="hs-identifier hs-var">runQuery</span></a></span><span> </span><span class="annot"><span class="annottext">QueryPoint
</span><a href="#local-6989586621680429489"><span class="hs-identifier hs-var">point</span></a></span><span> </span><span class="annot"><span class="annottext">(LocalStateQueryExpr
   BlockInMode ChainPoint QueryInMode () IO EpochNo
 -&gt; CardanoNodeT ShelleyBasedEra era m EpochNo)
-&gt; LocalStateQueryExpr
     BlockInMode ChainPoint QueryInMode () IO EpochNo
-&gt; CardanoNodeT ShelleyBasedEra era m EpochNo
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/pdlvkcn31k7dw3q5bcndp7f9d2z5l0h3-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-198"></span><span>    </span><span class="annot"><span class="annottext">ShelleyBasedEra era
-&gt; LocalStateQueryExpr
     BlockInMode
     ChainPoint
     QueryInMode
     ()
     IO
     (Either UnsupportedNtcVersionError (Either EraMismatch EpochNo))
forall era block point r.
ShelleyBasedEra era
-&gt; LocalStateQueryExpr
     block
     point
     QueryInMode
     r
     IO
     (Either UnsupportedNtcVersionError (Either EraMismatch EpochNo))
</span><span class="hs-identifier hs-var">Query.queryEpoch</span></span><span> </span><span class="annot"><span class="annottext">ShelleyBasedEra era
</span><a href="#local-6989586621680429490"><span class="hs-identifier hs-var">sbe</span></a></span><span> </span><span class="annot"><span class="annottext">LocalStateQueryExpr
  BlockInMode
  ChainPoint
  QueryInMode
  ()
  IO
  (Either UnsupportedNtcVersionError (Either EraMismatch EpochNo))
-&gt; (Either UnsupportedNtcVersionError (Either EraMismatch EpochNo)
    -&gt; LocalStateQueryExpr
         BlockInMode ChainPoint QueryInMode () IO EpochNo)
-&gt; LocalStateQueryExpr
     BlockInMode ChainPoint QueryInMode () IO EpochNo
forall a b.
LocalStateQueryExpr BlockInMode ChainPoint QueryInMode () IO a
-&gt; (a
    -&gt; LocalStateQueryExpr BlockInMode ChainPoint QueryInMode () IO b)
-&gt; LocalStateQueryExpr BlockInMode ChainPoint QueryInMode () IO b
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><a href="file:///nix/store/pdlvkcn31k7dw3q5bcndp7f9d2z5l0h3-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/GHC.Base.html#%3E%3E%3D"><span class="hs-operator hs-var">&gt;&gt;=</span></a></span><span> </span><span class="annot"><span class="annottext">IO EpochNo
-&gt; LocalStateQueryExpr
     BlockInMode ChainPoint QueryInMode () IO EpochNo
forall a.
IO a
-&gt; LocalStateQueryExpr BlockInMode ChainPoint QueryInMode () IO a
forall (m :: * -&gt; *) a. MonadIO m =&gt; IO a -&gt; m a
</span><a href="file:///nix/store/pdlvkcn31k7dw3q5bcndp7f9d2z5l0h3-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/Control.Monad.IO.Class.html#liftIO"><span class="hs-identifier hs-var">liftIO</span></a></span><span> </span><span class="annot"><span class="annottext">(IO EpochNo
 -&gt; LocalStateQueryExpr
      BlockInMode ChainPoint QueryInMode () IO EpochNo)
-&gt; (Either UnsupportedNtcVersionError (Either EraMismatch EpochNo)
    -&gt; IO EpochNo)
-&gt; Either UnsupportedNtcVersionError (Either EraMismatch EpochNo)
-&gt; LocalStateQueryExpr
     BlockInMode ChainPoint QueryInMode () IO EpochNo
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="file:///nix/store/pdlvkcn31k7dw3q5bcndp7f9d2z5l0h3-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">Either UnsupportedNtcVersionError (Either EraMismatch EpochNo)
-&gt; IO EpochNo
forall (m :: * -&gt; *) a.
MonadThrow m =&gt;
Either UnsupportedNtcVersionError (Either EraMismatch a) -&gt; m a
</span><a href="Hydra.Chain.CardanoClient.html#liftQueryResult"><span class="hs-identifier hs-var">liftQueryResult</span></a></span><span>
</span><span id="line-199"></span><span>
</span><span id="line-200"></span><span class="hs-comment">-- | Query the protocol parameters at given point.</span><span>
</span><span id="line-201"></span><span class="hs-comment">--</span><span>
</span><span id="line-202"></span><span class="hs-comment">-- Throws at least 'QueryException' if query fails.</span><span>
</span><span id="line-203"></span><span id="local-6989586621680428886"><span id="local-6989586621680428887"><span class="annot"><a href="Hydra.Chain.CardanoClient.html#queryProtocolParameters"><span class="hs-identifier hs-type">queryProtocolParameters</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-204"></span><span>  </span><span class="annot"><a href="file:///nix/store/pdlvkcn31k7dw3q5bcndp7f9d2z5l0h3-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/Control.Monad.IO.Class.html#MonadIO"><span class="hs-identifier hs-type">MonadIO</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680428886"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-205"></span><span>  </span><span class="annot"><a href="Hydra.Chain.CardanoClient.html#QueryPoint"><span class="hs-identifier hs-type">QueryPoint</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-206"></span><span>  </span><span class="annot"><a href="Hydra.Chain.CardanoClient.html#CardanoNodeT"><span class="hs-identifier hs-type">CardanoNodeT</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">ShelleyBasedEra</span></span><span> </span><span class="annot"><a href="#local-6989586621680428887"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680428886"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">PParams</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ShelleyLedgerEra</span></span><span> </span><span class="annot"><a href="#local-6989586621680428887"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span></span></span><span>
</span><span id="line-207"></span><span id="queryProtocolParameters"><span class="annot"><span class="annottext">queryProtocolParameters :: forall (m :: * -&gt; *) era.
MonadIO m =&gt;
QueryPoint
-&gt; CardanoNodeT
     ShelleyBasedEra era m (PParams (ShelleyLedgerEra era))
</span><a href="Hydra.Chain.CardanoClient.html#queryProtocolParameters"><span class="hs-identifier hs-var hs-var">queryProtocolParameters</span></a></span></span><span> </span><span id="local-6989586621680429503"><span class="annot"><span class="annottext">QueryPoint
</span><a href="#local-6989586621680429503"><span class="hs-identifier hs-var">point</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-208"></span><span>  </span><span id="local-6989586621680429504"><span class="annot"><span class="annottext">ShelleyBasedEra era
</span><a href="#local-6989586621680429504"><span class="hs-identifier hs-var">sbe</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">CardanoNodeT ShelleyBasedEra era m (ShelleyBasedEra era)
forall {k} (m :: * -&gt; *) (eon :: k -&gt; *) (era :: k).
Monad m =&gt;
CardanoNodeT eon era m (eon era)
</span><a href="Hydra.Chain.CardanoClient.html#askEra"><span class="hs-identifier hs-var">askEra</span></a></span><span>
</span><span id="line-209"></span><span>  </span><span class="annot"><span class="annottext">QueryPoint
-&gt; LocalStateQueryExpr
     BlockInMode
     ChainPoint
     QueryInMode
     ()
     IO
     (PParams (ShelleyLedgerEra era))
-&gt; CardanoNodeT
     ShelleyBasedEra era m (PParams (ShelleyLedgerEra era))
forall {k} (m :: * -&gt; *) a (eon :: k -&gt; *) (era :: k).
MonadIO m =&gt;
QueryPoint
-&gt; LocalStateQueryExpr BlockInMode ChainPoint QueryInMode () IO a
-&gt; CardanoNodeT eon era m a
</span><a href="Hydra.Chain.CardanoClient.html#runQuery"><span class="hs-identifier hs-var">runQuery</span></a></span><span> </span><span class="annot"><span class="annottext">QueryPoint
</span><a href="#local-6989586621680429503"><span class="hs-identifier hs-var">point</span></a></span><span> </span><span class="annot"><span class="annottext">(LocalStateQueryExpr
   BlockInMode
   ChainPoint
   QueryInMode
   ()
   IO
   (PParams (ShelleyLedgerEra era))
 -&gt; CardanoNodeT
      ShelleyBasedEra era m (PParams (ShelleyLedgerEra era)))
-&gt; LocalStateQueryExpr
     BlockInMode
     ChainPoint
     QueryInMode
     ()
     IO
     (PParams (ShelleyLedgerEra era))
-&gt; CardanoNodeT
     ShelleyBasedEra era m (PParams (ShelleyLedgerEra era))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/pdlvkcn31k7dw3q5bcndp7f9d2z5l0h3-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-210"></span><span>    </span><span class="annot"><span class="annottext">ShelleyBasedEra era
-&gt; LocalStateQueryExpr
     BlockInMode
     ChainPoint
     QueryInMode
     ()
     IO
     (Either
        UnsupportedNtcVersionError
        (Either EraMismatch (PParams (ShelleyLedgerEra era))))
forall era block point r.
ShelleyBasedEra era
-&gt; LocalStateQueryExpr
     block
     point
     QueryInMode
     r
     IO
     (Either
        UnsupportedNtcVersionError
        (Either EraMismatch (PParams (ShelleyLedgerEra era))))
</span><span class="hs-identifier hs-var">Query.queryProtocolParameters</span></span><span> </span><span class="annot"><span class="annottext">ShelleyBasedEra era
</span><a href="#local-6989586621680429504"><span class="hs-identifier hs-var">sbe</span></a></span><span> </span><span class="annot"><span class="annottext">LocalStateQueryExpr
  BlockInMode
  ChainPoint
  QueryInMode
  ()
  IO
  (Either
     UnsupportedNtcVersionError
     (Either EraMismatch (PParams (ShelleyLedgerEra era))))
-&gt; (Either
      UnsupportedNtcVersionError
      (Either EraMismatch (PParams (ShelleyLedgerEra era)))
    -&gt; LocalStateQueryExpr
         BlockInMode
         ChainPoint
         QueryInMode
         ()
         IO
         (PParams (ShelleyLedgerEra era)))
-&gt; LocalStateQueryExpr
     BlockInMode
     ChainPoint
     QueryInMode
     ()
     IO
     (PParams (ShelleyLedgerEra era))
forall a b.
LocalStateQueryExpr BlockInMode ChainPoint QueryInMode () IO a
-&gt; (a
    -&gt; LocalStateQueryExpr BlockInMode ChainPoint QueryInMode () IO b)
-&gt; LocalStateQueryExpr BlockInMode ChainPoint QueryInMode () IO b
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><a href="file:///nix/store/pdlvkcn31k7dw3q5bcndp7f9d2z5l0h3-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/GHC.Base.html#%3E%3E%3D"><span class="hs-operator hs-var">&gt;&gt;=</span></a></span><span> </span><span class="annot"><span class="annottext">IO (PParams (ShelleyLedgerEra era))
-&gt; LocalStateQueryExpr
     BlockInMode
     ChainPoint
     QueryInMode
     ()
     IO
     (PParams (ShelleyLedgerEra era))
forall a.
IO a
-&gt; LocalStateQueryExpr BlockInMode ChainPoint QueryInMode () IO a
forall (m :: * -&gt; *) a. MonadIO m =&gt; IO a -&gt; m a
</span><a href="file:///nix/store/pdlvkcn31k7dw3q5bcndp7f9d2z5l0h3-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/Control.Monad.IO.Class.html#liftIO"><span class="hs-identifier hs-var">liftIO</span></a></span><span> </span><span class="annot"><span class="annottext">(IO (PParams (ShelleyLedgerEra era))
 -&gt; LocalStateQueryExpr
      BlockInMode
      ChainPoint
      QueryInMode
      ()
      IO
      (PParams (ShelleyLedgerEra era)))
-&gt; (Either
      UnsupportedNtcVersionError
      (Either EraMismatch (PParams (ShelleyLedgerEra era)))
    -&gt; IO (PParams (ShelleyLedgerEra era)))
-&gt; Either
     UnsupportedNtcVersionError
     (Either EraMismatch (PParams (ShelleyLedgerEra era)))
-&gt; LocalStateQueryExpr
     BlockInMode
     ChainPoint
     QueryInMode
     ()
     IO
     (PParams (ShelleyLedgerEra era))
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="file:///nix/store/pdlvkcn31k7dw3q5bcndp7f9d2z5l0h3-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">Either
  UnsupportedNtcVersionError
  (Either EraMismatch (PParams (ShelleyLedgerEra era)))
-&gt; IO (PParams (ShelleyLedgerEra era))
forall (m :: * -&gt; *) a.
MonadThrow m =&gt;
Either UnsupportedNtcVersionError (Either EraMismatch a) -&gt; m a
</span><a href="Hydra.Chain.CardanoClient.html#liftQueryResult"><span class="hs-identifier hs-var">liftQueryResult</span></a></span><span>
</span><span id="line-211"></span><span>
</span><span id="line-212"></span><span class="hs-comment">-- | Query 'GenesisParameters' at a given point.</span><span>
</span><span id="line-213"></span><span class="hs-comment">--</span><span>
</span><span id="line-214"></span><span class="hs-comment">-- Throws at least 'QueryException' if query fails.</span><span>
</span><span id="line-215"></span><span id="local-6989586621680428896"><span id="local-6989586621680428897"><span class="annot"><a href="Hydra.Chain.CardanoClient.html#queryGenesisParameters"><span class="hs-identifier hs-type">queryGenesisParameters</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-216"></span><span>  </span><span class="annot"><a href="file:///nix/store/pdlvkcn31k7dw3q5bcndp7f9d2z5l0h3-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/Control.Monad.IO.Class.html#MonadIO"><span class="hs-identifier hs-type">MonadIO</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680428896"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-217"></span><span>  </span><span class="annot"><a href="Hydra.Chain.CardanoClient.html#QueryPoint"><span class="hs-identifier hs-type">QueryPoint</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-218"></span><span>  </span><span class="annot"><a href="Hydra.Chain.CardanoClient.html#CardanoNodeT"><span class="hs-identifier hs-type">CardanoNodeT</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">ShelleyBasedEra</span></span><span> </span><span class="annot"><a href="#local-6989586621680428897"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680428896"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">GenesisParameters</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">ShelleyEra</span></span><span class="hs-special">)</span></span></span><span>
</span><span id="line-219"></span><span id="queryGenesisParameters"><span class="annot"><span class="annottext">queryGenesisParameters :: forall (m :: * -&gt; *) era.
MonadIO m =&gt;
QueryPoint
-&gt; CardanoNodeT
     ShelleyBasedEra era m (GenesisParameters ShelleyEra)
</span><a href="Hydra.Chain.CardanoClient.html#queryGenesisParameters"><span class="hs-identifier hs-var hs-var">queryGenesisParameters</span></a></span></span><span> </span><span id="local-6989586621680429517"><span class="annot"><span class="annottext">QueryPoint
</span><a href="#local-6989586621680429517"><span class="hs-identifier hs-var">point</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-220"></span><span>  </span><span id="local-6989586621680429518"><span class="annot"><span class="annottext">ShelleyBasedEra era
</span><a href="#local-6989586621680429518"><span class="hs-identifier hs-var">sbe</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">CardanoNodeT ShelleyBasedEra era m (ShelleyBasedEra era)
forall {k} (m :: * -&gt; *) (eon :: k -&gt; *) (era :: k).
Monad m =&gt;
CardanoNodeT eon era m (eon era)
</span><a href="Hydra.Chain.CardanoClient.html#askEra"><span class="hs-identifier hs-var">askEra</span></a></span><span>
</span><span id="line-221"></span><span>  </span><span class="annot"><span class="annottext">QueryPoint
-&gt; LocalStateQueryExpr
     BlockInMode
     ChainPoint
     QueryInMode
     ()
     IO
     (GenesisParameters ShelleyEra)
-&gt; CardanoNodeT
     ShelleyBasedEra era m (GenesisParameters ShelleyEra)
forall {k} (m :: * -&gt; *) a (eon :: k -&gt; *) (era :: k).
MonadIO m =&gt;
QueryPoint
-&gt; LocalStateQueryExpr BlockInMode ChainPoint QueryInMode () IO a
-&gt; CardanoNodeT eon era m a
</span><a href="Hydra.Chain.CardanoClient.html#runQuery"><span class="hs-identifier hs-var">runQuery</span></a></span><span> </span><span class="annot"><span class="annottext">QueryPoint
</span><a href="#local-6989586621680429517"><span class="hs-identifier hs-var">point</span></a></span><span> </span><span class="annot"><span class="annottext">(LocalStateQueryExpr
   BlockInMode
   ChainPoint
   QueryInMode
   ()
   IO
   (GenesisParameters ShelleyEra)
 -&gt; CardanoNodeT
      ShelleyBasedEra era m (GenesisParameters ShelleyEra))
-&gt; LocalStateQueryExpr
     BlockInMode
     ChainPoint
     QueryInMode
     ()
     IO
     (GenesisParameters ShelleyEra)
-&gt; CardanoNodeT
     ShelleyBasedEra era m (GenesisParameters ShelleyEra)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/pdlvkcn31k7dw3q5bcndp7f9d2z5l0h3-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-222"></span><span>    </span><span class="annot"><span class="annottext">ShelleyBasedEra era
-&gt; LocalStateQueryExpr
     BlockInMode
     ChainPoint
     QueryInMode
     ()
     IO
     (Either
        UnsupportedNtcVersionError
        (Either EraMismatch (GenesisParameters ShelleyEra)))
forall era block point r.
ShelleyBasedEra era
-&gt; LocalStateQueryExpr
     block
     point
     QueryInMode
     r
     IO
     (Either
        UnsupportedNtcVersionError
        (Either EraMismatch (GenesisParameters ShelleyEra)))
</span><span class="hs-identifier hs-var">Query.queryGenesisParameters</span></span><span> </span><span class="annot"><span class="annottext">ShelleyBasedEra era
</span><a href="#local-6989586621680429518"><span class="hs-identifier hs-var">sbe</span></a></span><span> </span><span class="annot"><span class="annottext">LocalStateQueryExpr
  BlockInMode
  ChainPoint
  QueryInMode
  ()
  IO
  (Either
     UnsupportedNtcVersionError
     (Either EraMismatch (GenesisParameters ShelleyEra)))
-&gt; (Either
      UnsupportedNtcVersionError
      (Either EraMismatch (GenesisParameters ShelleyEra))
    -&gt; LocalStateQueryExpr
         BlockInMode
         ChainPoint
         QueryInMode
         ()
         IO
         (GenesisParameters ShelleyEra))
-&gt; LocalStateQueryExpr
     BlockInMode
     ChainPoint
     QueryInMode
     ()
     IO
     (GenesisParameters ShelleyEra)
forall a b.
LocalStateQueryExpr BlockInMode ChainPoint QueryInMode () IO a
-&gt; (a
    -&gt; LocalStateQueryExpr BlockInMode ChainPoint QueryInMode () IO b)
-&gt; LocalStateQueryExpr BlockInMode ChainPoint QueryInMode () IO b
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><a href="file:///nix/store/pdlvkcn31k7dw3q5bcndp7f9d2z5l0h3-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/GHC.Base.html#%3E%3E%3D"><span class="hs-operator hs-var">&gt;&gt;=</span></a></span><span> </span><span class="annot"><span class="annottext">IO (GenesisParameters ShelleyEra)
-&gt; LocalStateQueryExpr
     BlockInMode
     ChainPoint
     QueryInMode
     ()
     IO
     (GenesisParameters ShelleyEra)
forall a.
IO a
-&gt; LocalStateQueryExpr BlockInMode ChainPoint QueryInMode () IO a
forall (m :: * -&gt; *) a. MonadIO m =&gt; IO a -&gt; m a
</span><a href="file:///nix/store/pdlvkcn31k7dw3q5bcndp7f9d2z5l0h3-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/Control.Monad.IO.Class.html#liftIO"><span class="hs-identifier hs-var">liftIO</span></a></span><span> </span><span class="annot"><span class="annottext">(IO (GenesisParameters ShelleyEra)
 -&gt; LocalStateQueryExpr
      BlockInMode
      ChainPoint
      QueryInMode
      ()
      IO
      (GenesisParameters ShelleyEra))
-&gt; (Either
      UnsupportedNtcVersionError
      (Either EraMismatch (GenesisParameters ShelleyEra))
    -&gt; IO (GenesisParameters ShelleyEra))
-&gt; Either
     UnsupportedNtcVersionError
     (Either EraMismatch (GenesisParameters ShelleyEra))
-&gt; LocalStateQueryExpr
     BlockInMode
     ChainPoint
     QueryInMode
     ()
     IO
     (GenesisParameters ShelleyEra)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="file:///nix/store/pdlvkcn31k7dw3q5bcndp7f9d2z5l0h3-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">Either
  UnsupportedNtcVersionError
  (Either EraMismatch (GenesisParameters ShelleyEra))
-&gt; IO (GenesisParameters ShelleyEra)
forall (m :: * -&gt; *) a.
MonadThrow m =&gt;
Either UnsupportedNtcVersionError (Either EraMismatch a) -&gt; m a
</span><a href="Hydra.Chain.CardanoClient.html#liftQueryResult"><span class="hs-identifier hs-var">liftQueryResult</span></a></span><span>
</span><span id="line-223"></span><span>
</span><span id="line-224"></span><span class="hs-comment">-- | Query UTxO for all given addresses at given point.</span><span>
</span><span id="line-225"></span><span class="hs-comment">--</span><span>
</span><span id="line-226"></span><span class="hs-comment">-- Throws at least 'QueryException' if query fails.</span><span>
</span><span id="line-227"></span><span id="local-6989586621680428906"><span id="local-6989586621680428907"><span class="annot"><a href="Hydra.Chain.CardanoClient.html#queryUTxO"><span class="hs-identifier hs-type">queryUTxO</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-228"></span><span>  </span><span class="annot"><a href="file:///nix/store/pdlvkcn31k7dw3q5bcndp7f9d2z5l0h3-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/Control.Monad.IO.Class.html#MonadIO"><span class="hs-identifier hs-type">MonadIO</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680428906"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-229"></span><span>  </span><span class="annot"><a href="Hydra.Chain.CardanoClient.html#QueryPoint"><span class="hs-identifier hs-type">QueryPoint</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-230"></span><span>  </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">Address</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">ShelleyAddr</span></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-231"></span><span>  </span><span class="annot"><a href="Hydra.Chain.CardanoClient.html#CardanoNodeT"><span class="hs-identifier hs-type">CardanoNodeT</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">ShelleyBasedEra</span></span><span> </span><span class="annot"><a href="#local-6989586621680428907"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680428906"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">UTxO</span></span><span> </span><span class="annot"><a href="#local-6989586621680428907"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span></span></span><span>
</span><span id="line-232"></span><span id="queryUTxO"><span class="annot"><span class="annottext">queryUTxO :: forall (m :: * -&gt; *) era.
MonadIO m =&gt;
QueryPoint
-&gt; [Address ShelleyAddr]
-&gt; CardanoNodeT ShelleyBasedEra era m (UTxO era)
</span><a href="Hydra.Chain.CardanoClient.html#queryUTxO"><span class="hs-identifier hs-var hs-var">queryUTxO</span></a></span></span><span> </span><span id="local-6989586621680429532"><span class="annot"><span class="annottext">QueryPoint
</span><a href="#local-6989586621680429532"><span class="hs-identifier hs-var">point</span></a></span></span><span> </span><span id="local-6989586621680429533"><span class="annot"><span class="annottext">[Address ShelleyAddr]
</span><a href="#local-6989586621680429533"><span class="hs-identifier hs-var">addresses</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-233"></span><span>  </span><span id="local-6989586621680429534"><span class="annot"><span class="annottext">ShelleyBasedEra era
</span><a href="#local-6989586621680429534"><span class="hs-identifier hs-var">sbe</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">CardanoNodeT ShelleyBasedEra era m (ShelleyBasedEra era)
forall {k} (m :: * -&gt; *) (eon :: k -&gt; *) (era :: k).
Monad m =&gt;
CardanoNodeT eon era m (eon era)
</span><a href="Hydra.Chain.CardanoClient.html#askEra"><span class="hs-identifier hs-var">askEra</span></a></span><span>
</span><span id="line-234"></span><span>  </span><span class="annot"><span class="annottext">QueryPoint
-&gt; LocalStateQueryExpr
     BlockInMode ChainPoint QueryInMode () IO (UTxO era)
-&gt; CardanoNodeT ShelleyBasedEra era m (UTxO era)
forall {k} (m :: * -&gt; *) a (eon :: k -&gt; *) (era :: k).
MonadIO m =&gt;
QueryPoint
-&gt; LocalStateQueryExpr BlockInMode ChainPoint QueryInMode () IO a
-&gt; CardanoNodeT eon era m a
</span><a href="Hydra.Chain.CardanoClient.html#runQuery"><span class="hs-identifier hs-var">runQuery</span></a></span><span> </span><span class="annot"><span class="annottext">QueryPoint
</span><a href="#local-6989586621680429532"><span class="hs-identifier hs-var">point</span></a></span><span> </span><span class="annot"><span class="annottext">(LocalStateQueryExpr
   BlockInMode ChainPoint QueryInMode () IO (UTxO era)
 -&gt; CardanoNodeT ShelleyBasedEra era m (UTxO era))
-&gt; LocalStateQueryExpr
     BlockInMode ChainPoint QueryInMode () IO (UTxO era)
-&gt; CardanoNodeT ShelleyBasedEra era m (UTxO era)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/pdlvkcn31k7dw3q5bcndp7f9d2z5l0h3-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-235"></span><span>    </span><span class="annot"><span class="annottext">ShelleyBasedEra era
-&gt; QueryUTxOFilter
-&gt; LocalStateQueryExpr
     BlockInMode
     ChainPoint
     QueryInMode
     ()
     IO
     (Either UnsupportedNtcVersionError (Either EraMismatch (UTxO era)))
forall era block point r.
ShelleyBasedEra era
-&gt; QueryUTxOFilter
-&gt; LocalStateQueryExpr
     block
     point
     QueryInMode
     r
     IO
     (Either UnsupportedNtcVersionError (Either EraMismatch (UTxO era)))
</span><span class="hs-identifier hs-var">Query.queryUtxo</span></span><span> </span><span class="annot"><span class="annottext">ShelleyBasedEra era
</span><a href="#local-6989586621680429534"><span class="hs-identifier hs-var">sbe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Set AddressAny -&gt; QueryUTxOFilter
</span><span class="hs-identifier hs-var">QueryUTxOByAddress</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[AddressAny] -&gt; Set AddressAny
forall a. Ord a =&gt; [a] -&gt; Set a
</span><a href="file:///nix/store/pdlvkcn31k7dw3q5bcndp7f9d2z5l0h3-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/containers-0.6.7/src/Data.Set.Internal.html#fromList"><span class="hs-identifier hs-var">Set.fromList</span></a></span><span> </span><span class="annot"><span class="annottext">([AddressAny] -&gt; Set AddressAny) -&gt; [AddressAny] -&gt; Set AddressAny
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/pdlvkcn31k7dw3q5bcndp7f9d2z5l0h3-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">(Address ShelleyAddr -&gt; AddressAny)
-&gt; [Address ShelleyAddr] -&gt; [AddressAny]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="file:///nix/store/pdlvkcn31k7dw3q5bcndp7f9d2z5l0h3-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/GHC.Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="annot"><span class="annottext">Address ShelleyAddr -&gt; AddressAny
</span><span class="hs-identifier hs-var">AddressShelley</span></span><span> </span><span class="annot"><span class="annottext">[Address ShelleyAddr]
</span><a href="#local-6989586621680429533"><span class="hs-identifier hs-var">addresses</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-236"></span><span>      </span><span class="annot"><span class="annottext">LocalStateQueryExpr
  BlockInMode
  ChainPoint
  QueryInMode
  ()
  IO
  (Either UnsupportedNtcVersionError (Either EraMismatch (UTxO era)))
-&gt; (Either
      UnsupportedNtcVersionError (Either EraMismatch (UTxO era))
    -&gt; LocalStateQueryExpr
         BlockInMode ChainPoint QueryInMode () IO (UTxO era))
-&gt; LocalStateQueryExpr
     BlockInMode ChainPoint QueryInMode () IO (UTxO era)
forall a b.
LocalStateQueryExpr BlockInMode ChainPoint QueryInMode () IO a
-&gt; (a
    -&gt; LocalStateQueryExpr BlockInMode ChainPoint QueryInMode () IO b)
-&gt; LocalStateQueryExpr BlockInMode ChainPoint QueryInMode () IO b
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><a href="file:///nix/store/pdlvkcn31k7dw3q5bcndp7f9d2z5l0h3-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/GHC.Base.html#%3E%3E%3D"><span class="hs-operator hs-var">&gt;&gt;=</span></a></span><span> </span><span class="annot"><span class="annottext">IO (UTxO era)
-&gt; LocalStateQueryExpr
     BlockInMode ChainPoint QueryInMode () IO (UTxO era)
forall a.
IO a
-&gt; LocalStateQueryExpr BlockInMode ChainPoint QueryInMode () IO a
forall (m :: * -&gt; *) a. MonadIO m =&gt; IO a -&gt; m a
</span><a href="file:///nix/store/pdlvkcn31k7dw3q5bcndp7f9d2z5l0h3-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/Control.Monad.IO.Class.html#liftIO"><span class="hs-identifier hs-var">liftIO</span></a></span><span>
</span><span id="line-237"></span><span>      </span><span class="annot"><span class="annottext">(IO (UTxO era)
 -&gt; LocalStateQueryExpr
      BlockInMode ChainPoint QueryInMode () IO (UTxO era))
-&gt; (Either
      UnsupportedNtcVersionError (Either EraMismatch (UTxO era))
    -&gt; IO (UTxO era))
-&gt; Either
     UnsupportedNtcVersionError (Either EraMismatch (UTxO era))
-&gt; LocalStateQueryExpr
     BlockInMode ChainPoint QueryInMode () IO (UTxO era)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="file:///nix/store/pdlvkcn31k7dw3q5bcndp7f9d2z5l0h3-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">Either UnsupportedNtcVersionError (Either EraMismatch (UTxO era))
-&gt; IO (UTxO era)
forall (m :: * -&gt; *) a.
MonadThrow m =&gt;
Either UnsupportedNtcVersionError (Either EraMismatch a) -&gt; m a
</span><a href="Hydra.Chain.CardanoClient.html#liftQueryResult"><span class="hs-identifier hs-var">liftQueryResult</span></a></span><span>
</span><span id="line-238"></span><span>
</span><span id="line-239"></span><span class="hs-comment">-- | Query UTxO for given tx inputs at given point.</span><span>
</span><span id="line-240"></span><span class="hs-comment">--</span><span>
</span><span id="line-241"></span><span class="hs-comment">-- Throws at least 'QueryException' if query fails.</span><span>
</span><span id="line-242"></span><span id="local-6989586621680428815"><span id="local-6989586621680428816"><span class="annot"><a href="Hydra.Chain.CardanoClient.html#queryUTxOByTxIn"><span class="hs-identifier hs-type">queryUTxOByTxIn</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-243"></span><span>  </span><span class="annot"><a href="file:///nix/store/pdlvkcn31k7dw3q5bcndp7f9d2z5l0h3-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/Control.Monad.IO.Class.html#MonadIO"><span class="hs-identifier hs-type">MonadIO</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680428815"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-244"></span><span>  </span><span class="annot"><a href="Hydra.Chain.CardanoClient.html#QueryPoint"><span class="hs-identifier hs-type">QueryPoint</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-245"></span><span>  </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">TxIn</span></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-246"></span><span>  </span><span class="annot"><a href="Hydra.Chain.CardanoClient.html#CardanoNodeT"><span class="hs-identifier hs-type">CardanoNodeT</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">ShelleyBasedEra</span></span><span> </span><span class="annot"><a href="#local-6989586621680428816"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680428815"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">UTxO</span></span><span> </span><span class="annot"><a href="#local-6989586621680428816"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span></span></span><span>
</span><span id="line-247"></span><span id="queryUTxOByTxIn"><span class="annot"><span class="annottext">queryUTxOByTxIn :: forall (m :: * -&gt; *) era.
MonadIO m =&gt;
QueryPoint
-&gt; [TxIn] -&gt; CardanoNodeT ShelleyBasedEra era m (UTxO era)
</span><a href="Hydra.Chain.CardanoClient.html#queryUTxOByTxIn"><span class="hs-identifier hs-var hs-var">queryUTxOByTxIn</span></a></span></span><span> </span><span id="local-6989586621680429549"><span class="annot"><span class="annottext">QueryPoint
</span><a href="#local-6989586621680429549"><span class="hs-identifier hs-var">point</span></a></span></span><span> </span><span id="local-6989586621680429550"><span class="annot"><span class="annottext">[TxIn]
</span><a href="#local-6989586621680429550"><span class="hs-identifier hs-var">inputs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-248"></span><span>  </span><span id="local-6989586621680429551"><span class="annot"><span class="annottext">ShelleyBasedEra era
</span><a href="#local-6989586621680429551"><span class="hs-identifier hs-var">sbe</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">CardanoNodeT ShelleyBasedEra era m (ShelleyBasedEra era)
forall {k} (m :: * -&gt; *) (eon :: k -&gt; *) (era :: k).
Monad m =&gt;
CardanoNodeT eon era m (eon era)
</span><a href="Hydra.Chain.CardanoClient.html#askEra"><span class="hs-identifier hs-var">askEra</span></a></span><span>
</span><span id="line-249"></span><span>  </span><span class="annot"><span class="annottext">QueryPoint
-&gt; LocalStateQueryExpr
     BlockInMode ChainPoint QueryInMode () IO (UTxO era)
-&gt; CardanoNodeT ShelleyBasedEra era m (UTxO era)
forall {k} (m :: * -&gt; *) a (eon :: k -&gt; *) (era :: k).
MonadIO m =&gt;
QueryPoint
-&gt; LocalStateQueryExpr BlockInMode ChainPoint QueryInMode () IO a
-&gt; CardanoNodeT eon era m a
</span><a href="Hydra.Chain.CardanoClient.html#runQuery"><span class="hs-identifier hs-var">runQuery</span></a></span><span> </span><span class="annot"><span class="annottext">QueryPoint
</span><a href="#local-6989586621680429549"><span class="hs-identifier hs-var">point</span></a></span><span> </span><span class="annot"><span class="annottext">(LocalStateQueryExpr
   BlockInMode ChainPoint QueryInMode () IO (UTxO era)
 -&gt; CardanoNodeT ShelleyBasedEra era m (UTxO era))
-&gt; LocalStateQueryExpr
     BlockInMode ChainPoint QueryInMode () IO (UTxO era)
-&gt; CardanoNodeT ShelleyBasedEra era m (UTxO era)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/pdlvkcn31k7dw3q5bcndp7f9d2z5l0h3-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-250"></span><span>    </span><span class="annot"><span class="annottext">ShelleyBasedEra era
-&gt; QueryUTxOFilter
-&gt; LocalStateQueryExpr
     BlockInMode
     ChainPoint
     QueryInMode
     ()
     IO
     (Either UnsupportedNtcVersionError (Either EraMismatch (UTxO era)))
forall era block point r.
ShelleyBasedEra era
-&gt; QueryUTxOFilter
-&gt; LocalStateQueryExpr
     block
     point
     QueryInMode
     r
     IO
     (Either UnsupportedNtcVersionError (Either EraMismatch (UTxO era)))
</span><span class="hs-identifier hs-var">Query.queryUtxo</span></span><span> </span><span class="annot"><span class="annottext">ShelleyBasedEra era
</span><a href="#local-6989586621680429551"><span class="hs-identifier hs-var">sbe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Set TxIn -&gt; QueryUTxOFilter
</span><span class="hs-identifier hs-var">QueryUTxOByTxIn</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[TxIn] -&gt; Set TxIn
forall a. Ord a =&gt; [a] -&gt; Set a
</span><a href="file:///nix/store/pdlvkcn31k7dw3q5bcndp7f9d2z5l0h3-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/containers-0.6.7/src/Data.Set.Internal.html#fromList"><span class="hs-identifier hs-var">Set.fromList</span></a></span><span> </span><span class="annot"><span class="annottext">[TxIn]
</span><a href="#local-6989586621680429550"><span class="hs-identifier hs-var">inputs</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-251"></span><span>      </span><span class="annot"><span class="annottext">LocalStateQueryExpr
  BlockInMode
  ChainPoint
  QueryInMode
  ()
  IO
  (Either UnsupportedNtcVersionError (Either EraMismatch (UTxO era)))
-&gt; (Either
      UnsupportedNtcVersionError (Either EraMismatch (UTxO era))
    -&gt; LocalStateQueryExpr
         BlockInMode ChainPoint QueryInMode () IO (UTxO era))
-&gt; LocalStateQueryExpr
     BlockInMode ChainPoint QueryInMode () IO (UTxO era)
forall a b.
LocalStateQueryExpr BlockInMode ChainPoint QueryInMode () IO a
-&gt; (a
    -&gt; LocalStateQueryExpr BlockInMode ChainPoint QueryInMode () IO b)
-&gt; LocalStateQueryExpr BlockInMode ChainPoint QueryInMode () IO b
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><a href="file:///nix/store/pdlvkcn31k7dw3q5bcndp7f9d2z5l0h3-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/GHC.Base.html#%3E%3E%3D"><span class="hs-operator hs-var">&gt;&gt;=</span></a></span><span> </span><span class="annot"><span class="annottext">IO (UTxO era)
-&gt; LocalStateQueryExpr
     BlockInMode ChainPoint QueryInMode () IO (UTxO era)
forall a.
IO a
-&gt; LocalStateQueryExpr BlockInMode ChainPoint QueryInMode () IO a
forall (m :: * -&gt; *) a. MonadIO m =&gt; IO a -&gt; m a
</span><a href="file:///nix/store/pdlvkcn31k7dw3q5bcndp7f9d2z5l0h3-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/Control.Monad.IO.Class.html#liftIO"><span class="hs-identifier hs-var">liftIO</span></a></span><span>
</span><span id="line-252"></span><span>      </span><span class="annot"><span class="annottext">(IO (UTxO era)
 -&gt; LocalStateQueryExpr
      BlockInMode ChainPoint QueryInMode () IO (UTxO era))
-&gt; (Either
      UnsupportedNtcVersionError (Either EraMismatch (UTxO era))
    -&gt; IO (UTxO era))
-&gt; Either
     UnsupportedNtcVersionError (Either EraMismatch (UTxO era))
-&gt; LocalStateQueryExpr
     BlockInMode ChainPoint QueryInMode () IO (UTxO era)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="file:///nix/store/pdlvkcn31k7dw3q5bcndp7f9d2z5l0h3-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">Either UnsupportedNtcVersionError (Either EraMismatch (UTxO era))
-&gt; IO (UTxO era)
forall (m :: * -&gt; *) a.
MonadThrow m =&gt;
Either UnsupportedNtcVersionError (Either EraMismatch a) -&gt; m a
</span><a href="Hydra.Chain.CardanoClient.html#liftQueryResult"><span class="hs-identifier hs-var">liftQueryResult</span></a></span><span>
</span><span id="line-253"></span><span>
</span><span id="line-254"></span><span class="hs-comment">-- | Query the whole UTxO from node at given point. Useful for debugging, but</span><span>
</span><span id="line-255"></span><span class="hs-comment">-- should obviously not be used in production code.</span><span>
</span><span id="line-256"></span><span class="hs-comment">--</span><span>
</span><span id="line-257"></span><span class="hs-comment">-- Throws at least 'QueryException' if query fails.</span><span>
</span><span id="line-258"></span><span id="local-6989586621680428922"><span id="local-6989586621680428923"><span class="annot"><a href="Hydra.Chain.CardanoClient.html#queryUTxOWhole"><span class="hs-identifier hs-type">queryUTxOWhole</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-259"></span><span>  </span><span class="annot"><a href="file:///nix/store/pdlvkcn31k7dw3q5bcndp7f9d2z5l0h3-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/Control.Monad.IO.Class.html#MonadIO"><span class="hs-identifier hs-type">MonadIO</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680428922"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-260"></span><span>  </span><span class="annot"><a href="Hydra.Chain.CardanoClient.html#QueryPoint"><span class="hs-identifier hs-type">QueryPoint</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-261"></span><span>  </span><span class="annot"><a href="Hydra.Chain.CardanoClient.html#CardanoNodeT"><span class="hs-identifier hs-type">CardanoNodeT</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">ShelleyBasedEra</span></span><span> </span><span class="annot"><a href="#local-6989586621680428923"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680428922"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">UTxO</span></span><span> </span><span class="annot"><a href="#local-6989586621680428923"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span></span></span><span>
</span><span id="line-262"></span><span id="queryUTxOWhole"><span class="annot"><span class="annottext">queryUTxOWhole :: forall (m :: * -&gt; *) era.
MonadIO m =&gt;
QueryPoint -&gt; CardanoNodeT ShelleyBasedEra era m (UTxO era)
</span><a href="Hydra.Chain.CardanoClient.html#queryUTxOWhole"><span class="hs-identifier hs-var hs-var">queryUTxOWhole</span></a></span></span><span> </span><span id="local-6989586621680429563"><span class="annot"><span class="annottext">QueryPoint
</span><a href="#local-6989586621680429563"><span class="hs-identifier hs-var">point</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-263"></span><span>  </span><span id="local-6989586621680429564"><span class="annot"><span class="annottext">ShelleyBasedEra era
</span><a href="#local-6989586621680429564"><span class="hs-identifier hs-var">sbe</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">CardanoNodeT ShelleyBasedEra era m (ShelleyBasedEra era)
forall {k} (m :: * -&gt; *) (eon :: k -&gt; *) (era :: k).
Monad m =&gt;
CardanoNodeT eon era m (eon era)
</span><a href="Hydra.Chain.CardanoClient.html#askEra"><span class="hs-identifier hs-var">askEra</span></a></span><span>
</span><span id="line-264"></span><span>  </span><span class="annot"><span class="annottext">QueryPoint
-&gt; LocalStateQueryExpr
     BlockInMode ChainPoint QueryInMode () IO (UTxO era)
-&gt; CardanoNodeT ShelleyBasedEra era m (UTxO era)
forall {k} (m :: * -&gt; *) a (eon :: k -&gt; *) (era :: k).
MonadIO m =&gt;
QueryPoint
-&gt; LocalStateQueryExpr BlockInMode ChainPoint QueryInMode () IO a
-&gt; CardanoNodeT eon era m a
</span><a href="Hydra.Chain.CardanoClient.html#runQuery"><span class="hs-identifier hs-var">runQuery</span></a></span><span> </span><span class="annot"><span class="annottext">QueryPoint
</span><a href="#local-6989586621680429563"><span class="hs-identifier hs-var">point</span></a></span><span> </span><span class="annot"><span class="annottext">(LocalStateQueryExpr
   BlockInMode ChainPoint QueryInMode () IO (UTxO era)
 -&gt; CardanoNodeT ShelleyBasedEra era m (UTxO era))
-&gt; LocalStateQueryExpr
     BlockInMode ChainPoint QueryInMode () IO (UTxO era)
-&gt; CardanoNodeT ShelleyBasedEra era m (UTxO era)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/pdlvkcn31k7dw3q5bcndp7f9d2z5l0h3-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-265"></span><span>    </span><span class="annot"><span class="annottext">ShelleyBasedEra era
-&gt; QueryUTxOFilter
-&gt; LocalStateQueryExpr
     BlockInMode
     ChainPoint
     QueryInMode
     ()
     IO
     (Either UnsupportedNtcVersionError (Either EraMismatch (UTxO era)))
forall era block point r.
ShelleyBasedEra era
-&gt; QueryUTxOFilter
-&gt; LocalStateQueryExpr
     block
     point
     QueryInMode
     r
     IO
     (Either UnsupportedNtcVersionError (Either EraMismatch (UTxO era)))
</span><span class="hs-identifier hs-var">Query.queryUtxo</span></span><span> </span><span class="annot"><span class="annottext">ShelleyBasedEra era
</span><a href="#local-6989586621680429564"><span class="hs-identifier hs-var">sbe</span></a></span><span> </span><span class="annot"><span class="annottext">QueryUTxOFilter
</span><span class="hs-identifier hs-var">QueryUTxOWhole</span></span><span> </span><span class="annot"><span class="annottext">LocalStateQueryExpr
  BlockInMode
  ChainPoint
  QueryInMode
  ()
  IO
  (Either UnsupportedNtcVersionError (Either EraMismatch (UTxO era)))
-&gt; (Either
      UnsupportedNtcVersionError (Either EraMismatch (UTxO era))
    -&gt; LocalStateQueryExpr
         BlockInMode ChainPoint QueryInMode () IO (UTxO era))
-&gt; LocalStateQueryExpr
     BlockInMode ChainPoint QueryInMode () IO (UTxO era)
forall a b.
LocalStateQueryExpr BlockInMode ChainPoint QueryInMode () IO a
-&gt; (a
    -&gt; LocalStateQueryExpr BlockInMode ChainPoint QueryInMode () IO b)
-&gt; LocalStateQueryExpr BlockInMode ChainPoint QueryInMode () IO b
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><a href="file:///nix/store/pdlvkcn31k7dw3q5bcndp7f9d2z5l0h3-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/GHC.Base.html#%3E%3E%3D"><span class="hs-operator hs-var">&gt;&gt;=</span></a></span><span> </span><span class="annot"><span class="annottext">IO (UTxO era)
-&gt; LocalStateQueryExpr
     BlockInMode ChainPoint QueryInMode () IO (UTxO era)
forall a.
IO a
-&gt; LocalStateQueryExpr BlockInMode ChainPoint QueryInMode () IO a
forall (m :: * -&gt; *) a. MonadIO m =&gt; IO a -&gt; m a
</span><a href="file:///nix/store/pdlvkcn31k7dw3q5bcndp7f9d2z5l0h3-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/Control.Monad.IO.Class.html#liftIO"><span class="hs-identifier hs-var">liftIO</span></a></span><span> </span><span class="annot"><span class="annottext">(IO (UTxO era)
 -&gt; LocalStateQueryExpr
      BlockInMode ChainPoint QueryInMode () IO (UTxO era))
-&gt; (Either
      UnsupportedNtcVersionError (Either EraMismatch (UTxO era))
    -&gt; IO (UTxO era))
-&gt; Either
     UnsupportedNtcVersionError (Either EraMismatch (UTxO era))
-&gt; LocalStateQueryExpr
     BlockInMode ChainPoint QueryInMode () IO (UTxO era)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="file:///nix/store/pdlvkcn31k7dw3q5bcndp7f9d2z5l0h3-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">Either UnsupportedNtcVersionError (Either EraMismatch (UTxO era))
-&gt; IO (UTxO era)
forall (m :: * -&gt; *) a.
MonadThrow m =&gt;
Either UnsupportedNtcVersionError (Either EraMismatch a) -&gt; m a
</span><a href="Hydra.Chain.CardanoClient.html#liftQueryResult"><span class="hs-identifier hs-var">liftQueryResult</span></a></span><span>
</span><span id="line-266"></span><span>
</span><span id="line-267"></span><span class="hs-comment">-- | Query UTxO for the address of given verification key at point.</span><span>
</span><span id="line-268"></span><span class="hs-comment">--</span><span>
</span><span id="line-269"></span><span class="hs-comment">-- Throws at least 'QueryException' if query fails.</span><span>
</span><span id="line-270"></span><span id="local-6989586621680428926"><span id="local-6989586621680428929"><span class="annot"><a href="Hydra.Chain.CardanoClient.html#queryUTxOFor"><span class="hs-identifier hs-type">queryUTxOFor</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-271"></span><span>  </span><span class="annot"><a href="file:///nix/store/pdlvkcn31k7dw3q5bcndp7f9d2z5l0h3-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/Control.Monad.IO.Class.html#MonadIO"><span class="hs-identifier hs-type">MonadIO</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680428926"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-272"></span><span>  </span><span class="annot"><a href="Hydra.Chain.CardanoClient.html#QueryPoint"><span class="hs-identifier hs-type">QueryPoint</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-273"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">VerificationKey</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">PaymentKey</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-274"></span><span>  </span><span class="annot"><a href="Hydra.Chain.CardanoClient.html#CardanoNodeT"><span class="hs-identifier hs-type">CardanoNodeT</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">ShelleyBasedEra</span></span><span> </span><span class="annot"><a href="#local-6989586621680428929"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680428926"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">UTxO</span></span><span> </span><span class="annot"><a href="#local-6989586621680428929"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span></span></span><span>
</span><span id="line-275"></span><span id="queryUTxOFor"><span class="annot"><span class="annottext">queryUTxOFor :: forall (m :: * -&gt; *) era.
MonadIO m =&gt;
QueryPoint
-&gt; VerificationKey PaymentKey
-&gt; CardanoNodeT ShelleyBasedEra era m (UTxO era)
</span><a href="Hydra.Chain.CardanoClient.html#queryUTxOFor"><span class="hs-identifier hs-var hs-var">queryUTxOFor</span></a></span></span><span> </span><span id="local-6989586621680429581"><span class="annot"><span class="annottext">QueryPoint
</span><a href="#local-6989586621680429581"><span class="hs-identifier hs-var">point</span></a></span></span><span> </span><span id="local-6989586621680429582"><span class="annot"><span class="annottext">VerificationKey PaymentKey
</span><a href="#local-6989586621680429582"><span class="hs-identifier hs-var">vk</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-276"></span><span>  </span><span id="local-6989586621680429583"><span class="annot"><span class="annottext">LocalNodeConnectInfo
</span><a href="#local-6989586621680429583"><span class="hs-identifier hs-var">ci</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">CardanoNodeT ShelleyBasedEra era m LocalNodeConnectInfo
forall r (m :: * -&gt; *). MonadReader r m =&gt; m r
</span><a href="file:///nix/store/pdlvkcn31k7dw3q5bcndp7f9d2z5l0h3-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/mtl-2.3.1/src/Control.Monad.Reader.Class.html#ask"><span class="hs-identifier hs-var">ask</span></a></span><span>
</span><span id="line-277"></span><span>  </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">NetworkId -&gt; VerificationKey PaymentKey -&gt; AddressInEra Era
forall era.
IsShelleyBasedEra era =&gt;
NetworkId -&gt; VerificationKey PaymentKey -&gt; AddressInEra era
</span><span class="hs-identifier hs-var">mkVkAddress</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LocalNodeConnectInfo -&gt; NetworkId
</span><span class="hs-identifier hs-var">localNodeNetworkId</span></span><span> </span><span class="annot"><span class="annottext">LocalNodeConnectInfo
</span><a href="#local-6989586621680429583"><span class="hs-identifier hs-var">ci</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">VerificationKey PaymentKey
</span><a href="#local-6989586621680429582"><span class="hs-identifier hs-var">vk</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-278"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">ShelleyAddressInEra</span></span><span> </span><span id="local-6989586621680429587"><span class="annot"><span class="annottext">Address ShelleyAddr
</span><a href="#local-6989586621680429587"><span class="hs-identifier hs-var">addr</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-279"></span><span>      </span><span class="annot"><span class="annottext">QueryPoint
-&gt; [Address ShelleyAddr]
-&gt; CardanoNodeT ShelleyBasedEra era m (UTxO era)
forall (m :: * -&gt; *) era.
MonadIO m =&gt;
QueryPoint
-&gt; [Address ShelleyAddr]
-&gt; CardanoNodeT ShelleyBasedEra era m (UTxO era)
</span><a href="Hydra.Chain.CardanoClient.html#queryUTxO"><span class="hs-identifier hs-var">queryUTxO</span></a></span><span> </span><span class="annot"><span class="annottext">QueryPoint
</span><a href="#local-6989586621680429581"><span class="hs-identifier hs-var">point</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Address ShelleyAddr
</span><a href="#local-6989586621680429587"><span class="hs-identifier hs-var">addr</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-280"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">ByronAddressInEra</span></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-281"></span><span>      </span><span class="annot"><span class="annottext">Text -&gt; CardanoNodeT ShelleyBasedEra era m (UTxO era)
forall a t. (HasCallStack, IsText t) =&gt; t -&gt; a
</span><span class="hs-identifier hs-var">error</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;impossible: mkVkAddress returned Byron address.&quot;</span></span><span>
</span><span id="line-282"></span><span>
</span><span id="line-283"></span><span class="hs-comment">-- | Query the current set of registered stake pools.</span><span>
</span><span id="line-284"></span><span class="hs-comment">--</span><span>
</span><span id="line-285"></span><span class="hs-comment">-- Throws at least 'QueryException' if query fails.</span><span>
</span><span id="line-286"></span><span id="local-6989586621680428941"><span id="local-6989586621680428942"><span class="annot"><a href="Hydra.Chain.CardanoClient.html#queryStakePools"><span class="hs-identifier hs-type">queryStakePools</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-287"></span><span>  </span><span class="annot"><a href="file:///nix/store/pdlvkcn31k7dw3q5bcndp7f9d2z5l0h3-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/Control.Monad.IO.Class.html#MonadIO"><span class="hs-identifier hs-type">MonadIO</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680428941"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-288"></span><span>  </span><span class="annot"><a href="Hydra.Chain.CardanoClient.html#QueryPoint"><span class="hs-identifier hs-type">QueryPoint</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-289"></span><span>  </span><span class="annot"><a href="Hydra.Chain.CardanoClient.html#CardanoNodeT"><span class="hs-identifier hs-type">CardanoNodeT</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">ShelleyBasedEra</span></span><span> </span><span class="annot"><a href="#local-6989586621680428942"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680428941"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///nix/store/pdlvkcn31k7dw3q5bcndp7f9d2z5l0h3-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/containers-0.6.7/src/Data.Set.Internal.html#Set"><span class="hs-identifier hs-type">Set</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">PoolId</span></span><span class="hs-special">)</span></span></span><span>
</span><span id="line-290"></span><span id="queryStakePools"><span class="annot"><span class="annottext">queryStakePools :: forall (m :: * -&gt; *) era.
MonadIO m =&gt;
QueryPoint -&gt; CardanoNodeT ShelleyBasedEra era m (Set PoolId)
</span><a href="Hydra.Chain.CardanoClient.html#queryStakePools"><span class="hs-identifier hs-var hs-var">queryStakePools</span></a></span></span><span> </span><span id="local-6989586621680429600"><span class="annot"><span class="annottext">QueryPoint
</span><a href="#local-6989586621680429600"><span class="hs-identifier hs-var">point</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-291"></span><span>  </span><span id="local-6989586621680429601"><span class="annot"><span class="annottext">ShelleyBasedEra era
</span><a href="#local-6989586621680429601"><span class="hs-identifier hs-var">sbe</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">CardanoNodeT ShelleyBasedEra era m (ShelleyBasedEra era)
forall {k} (m :: * -&gt; *) (eon :: k -&gt; *) (era :: k).
Monad m =&gt;
CardanoNodeT eon era m (eon era)
</span><a href="Hydra.Chain.CardanoClient.html#askEra"><span class="hs-identifier hs-var">askEra</span></a></span><span>
</span><span id="line-292"></span><span>  </span><span class="annot"><span class="annottext">QueryPoint
-&gt; LocalStateQueryExpr
     BlockInMode ChainPoint QueryInMode () IO (Set PoolId)
-&gt; CardanoNodeT ShelleyBasedEra era m (Set PoolId)
forall {k} (m :: * -&gt; *) a (eon :: k -&gt; *) (era :: k).
MonadIO m =&gt;
QueryPoint
-&gt; LocalStateQueryExpr BlockInMode ChainPoint QueryInMode () IO a
-&gt; CardanoNodeT eon era m a
</span><a href="Hydra.Chain.CardanoClient.html#runQuery"><span class="hs-identifier hs-var">runQuery</span></a></span><span> </span><span class="annot"><span class="annottext">QueryPoint
</span><a href="#local-6989586621680429600"><span class="hs-identifier hs-var">point</span></a></span><span> </span><span class="annot"><span class="annottext">(LocalStateQueryExpr
   BlockInMode ChainPoint QueryInMode () IO (Set PoolId)
 -&gt; CardanoNodeT ShelleyBasedEra era m (Set PoolId))
-&gt; LocalStateQueryExpr
     BlockInMode ChainPoint QueryInMode () IO (Set PoolId)
-&gt; CardanoNodeT ShelleyBasedEra era m (Set PoolId)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/pdlvkcn31k7dw3q5bcndp7f9d2z5l0h3-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-293"></span><span>    </span><span class="annot"><span class="annottext">ShelleyBasedEra era
-&gt; LocalStateQueryExpr
     BlockInMode
     ChainPoint
     QueryInMode
     ()
     IO
     (Either
        UnsupportedNtcVersionError (Either EraMismatch (Set PoolId)))
forall era block point r.
ShelleyBasedEra era
-&gt; LocalStateQueryExpr
     block
     point
     QueryInMode
     r
     IO
     (Either
        UnsupportedNtcVersionError (Either EraMismatch (Set PoolId)))
</span><span class="hs-identifier hs-var">Query.queryStakePools</span></span><span> </span><span class="annot"><span class="annottext">ShelleyBasedEra era
</span><a href="#local-6989586621680429601"><span class="hs-identifier hs-var">sbe</span></a></span><span> </span><span class="annot"><span class="annottext">LocalStateQueryExpr
  BlockInMode
  ChainPoint
  QueryInMode
  ()
  IO
  (Either
     UnsupportedNtcVersionError (Either EraMismatch (Set PoolId)))
-&gt; (Either
      UnsupportedNtcVersionError (Either EraMismatch (Set PoolId))
    -&gt; LocalStateQueryExpr
         BlockInMode ChainPoint QueryInMode () IO (Set PoolId))
-&gt; LocalStateQueryExpr
     BlockInMode ChainPoint QueryInMode () IO (Set PoolId)
forall a b.
LocalStateQueryExpr BlockInMode ChainPoint QueryInMode () IO a
-&gt; (a
    -&gt; LocalStateQueryExpr BlockInMode ChainPoint QueryInMode () IO b)
-&gt; LocalStateQueryExpr BlockInMode ChainPoint QueryInMode () IO b
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><a href="file:///nix/store/pdlvkcn31k7dw3q5bcndp7f9d2z5l0h3-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/GHC.Base.html#%3E%3E%3D"><span class="hs-operator hs-var">&gt;&gt;=</span></a></span><span> </span><span class="annot"><span class="annottext">IO (Set PoolId)
-&gt; LocalStateQueryExpr
     BlockInMode ChainPoint QueryInMode () IO (Set PoolId)
forall a.
IO a
-&gt; LocalStateQueryExpr BlockInMode ChainPoint QueryInMode () IO a
forall (m :: * -&gt; *) a. MonadIO m =&gt; IO a -&gt; m a
</span><a href="file:///nix/store/pdlvkcn31k7dw3q5bcndp7f9d2z5l0h3-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/Control.Monad.IO.Class.html#liftIO"><span class="hs-identifier hs-var">liftIO</span></a></span><span> </span><span class="annot"><span class="annottext">(IO (Set PoolId)
 -&gt; LocalStateQueryExpr
      BlockInMode ChainPoint QueryInMode () IO (Set PoolId))
-&gt; (Either
      UnsupportedNtcVersionError (Either EraMismatch (Set PoolId))
    -&gt; IO (Set PoolId))
-&gt; Either
     UnsupportedNtcVersionError (Either EraMismatch (Set PoolId))
-&gt; LocalStateQueryExpr
     BlockInMode ChainPoint QueryInMode () IO (Set PoolId)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="file:///nix/store/pdlvkcn31k7dw3q5bcndp7f9d2z5l0h3-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">Either UnsupportedNtcVersionError (Either EraMismatch (Set PoolId))
-&gt; IO (Set PoolId)
forall (m :: * -&gt; *) a.
MonadThrow m =&gt;
Either UnsupportedNtcVersionError (Either EraMismatch a) -&gt; m a
</span><a href="Hydra.Chain.CardanoClient.html#liftQueryResult"><span class="hs-identifier hs-var">liftQueryResult</span></a></span><span>
</span><span id="line-294"></span><span>
</span><span id="line-295"></span><span class="annot"><span class="hs-comment">-- * Helpers</span></span><span>
</span><span id="line-296"></span><span>
</span><span id="line-297"></span><span id="local-6989586621680428950"><span id="local-6989586621680428951"><span class="annot"><a href="Hydra.Chain.CardanoClient.html#throwOnEraMismatch"><span class="hs-identifier hs-type">throwOnEraMismatch</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">MonadThrow</span></span><span> </span><span class="annot"><a href="#local-6989586621680428950"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="file:///nix/store/pdlvkcn31k7dw3q5bcndp7f9d2z5l0h3-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/Data.Either.html#Either"><span class="hs-identifier hs-type">Either</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">EraMismatch</span></span><span> </span><span class="annot"><a href="#local-6989586621680428951"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680428950"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680428951"><span class="hs-identifier hs-type">a</span></a></span></span></span><span>
</span><span id="line-298"></span><span id="throwOnEraMismatch"><span class="annot"><span class="annottext">throwOnEraMismatch :: forall (m :: * -&gt; *) a. MonadThrow m =&gt; Either EraMismatch a -&gt; m a
</span><a href="Hydra.Chain.CardanoClient.html#throwOnEraMismatch"><span class="hs-identifier hs-var hs-var">throwOnEraMismatch</span></a></span></span><span> </span><span id="local-6989586621680429611"><span class="annot"><span class="annottext">Either EraMismatch a
</span><a href="#local-6989586621680429611"><span class="hs-identifier hs-var">res</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-299"></span><span>  </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Either EraMismatch a
</span><a href="#local-6989586621680429611"><span class="hs-identifier hs-var">res</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-300"></span><span>    </span><span class="annot"><a href="file:///nix/store/pdlvkcn31k7dw3q5bcndp7f9d2z5l0h3-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/Data.Either.html#Left"><span class="hs-identifier hs-type">Left</span></a></span><span> </span><span id="local-6989586621680429612"><span class="annot"><span class="annottext">EraMismatch
</span><a href="#local-6989586621680429612"><span class="hs-identifier hs-var">eraMismatch</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">QueryException -&gt; m a
forall e a. Exception e =&gt; e -&gt; m a
forall (m :: * -&gt; *) e a. (MonadThrow m, Exception e) =&gt; e -&gt; m a
</span><span class="hs-identifier hs-var">throwIO</span></span><span> </span><span class="annot"><span class="annottext">(QueryException -&gt; m a) -&gt; QueryException -&gt; m a
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/pdlvkcn31k7dw3q5bcndp7f9d2z5l0h3-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">EraMismatch -&gt; QueryException
</span><a href="Hydra.Chain.CardanoClient.html#QueryEraMismatchException"><span class="hs-identifier hs-var">QueryEraMismatchException</span></a></span><span> </span><span class="annot"><span class="annottext">EraMismatch
</span><a href="#local-6989586621680429612"><span class="hs-identifier hs-var">eraMismatch</span></a></span><span>
</span><span id="line-301"></span><span>    </span><span class="annot"><a href="file:///nix/store/pdlvkcn31k7dw3q5bcndp7f9d2z5l0h3-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/Data.Either.html#Right"><span class="hs-identifier hs-type">Right</span></a></span><span> </span><span id="local-6989586621680429613"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621680429613"><span class="hs-identifier hs-var">result</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">a -&gt; m a
forall a. a -&gt; m a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="file:///nix/store/pdlvkcn31k7dw3q5bcndp7f9d2z5l0h3-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/GHC.Base.html#pure"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621680429613"><span class="hs-identifier hs-var">result</span></a></span><span>
</span><span id="line-302"></span><span>
</span><span id="line-303"></span><span id="local-6989586621680428861"><span id="local-6989586621680428862"><span class="annot"><a href="Hydra.Chain.CardanoClient.html#throwOnUnsupportedNtcVersion"><span class="hs-identifier hs-type">throwOnUnsupportedNtcVersion</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">MonadThrow</span></span><span> </span><span class="annot"><a href="#local-6989586621680428861"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="file:///nix/store/pdlvkcn31k7dw3q5bcndp7f9d2z5l0h3-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/Data.Either.html#Either"><span class="hs-identifier hs-type">Either</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">UnsupportedNtcVersionError</span></span><span> </span><span class="annot"><a href="#local-6989586621680428862"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680428861"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680428862"><span class="hs-identifier hs-type">a</span></a></span></span></span><span>
</span><span id="line-304"></span><span id="throwOnUnsupportedNtcVersion"><span class="annot"><span class="annottext">throwOnUnsupportedNtcVersion :: forall (m :: * -&gt; *) a.
MonadThrow m =&gt;
Either UnsupportedNtcVersionError a -&gt; m a
</span><a href="Hydra.Chain.CardanoClient.html#throwOnUnsupportedNtcVersion"><span class="hs-identifier hs-var hs-var">throwOnUnsupportedNtcVersion</span></a></span></span><span> </span><span id="local-6989586621680429620"><span class="annot"><span class="annottext">Either UnsupportedNtcVersionError a
</span><a href="#local-6989586621680429620"><span class="hs-identifier hs-var">res</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-305"></span><span>  </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Either UnsupportedNtcVersionError a
</span><a href="#local-6989586621680429620"><span class="hs-identifier hs-var">res</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-306"></span><span>    </span><span class="annot"><a href="file:///nix/store/pdlvkcn31k7dw3q5bcndp7f9d2z5l0h3-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/Data.Either.html#Left"><span class="hs-identifier hs-type">Left</span></a></span><span> </span><span id="local-6989586621680429621"><span class="annot"><span class="annottext">UnsupportedNtcVersionError
</span><a href="#local-6989586621680429621"><span class="hs-identifier hs-var">unsupportedNtcVersion</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">QueryException -&gt; m a
forall e a. Exception e =&gt; e -&gt; m a
forall (m :: * -&gt; *) e a. (MonadThrow m, Exception e) =&gt; e -&gt; m a
</span><span class="hs-identifier hs-var">throwIO</span></span><span> </span><span class="annot"><span class="annottext">(QueryException -&gt; m a) -&gt; QueryException -&gt; m a
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/pdlvkcn31k7dw3q5bcndp7f9d2z5l0h3-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">UnsupportedNtcVersionError -&gt; QueryException
</span><a href="Hydra.Chain.CardanoClient.html#QueryUnsupportedNtcVersionException"><span class="hs-identifier hs-var">QueryUnsupportedNtcVersionException</span></a></span><span> </span><span class="annot"><span class="annottext">UnsupportedNtcVersionError
</span><a href="#local-6989586621680429621"><span class="hs-identifier hs-var">unsupportedNtcVersion</span></a></span><span>
</span><span id="line-307"></span><span>    </span><span class="annot"><a href="file:///nix/store/pdlvkcn31k7dw3q5bcndp7f9d2z5l0h3-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/Data.Either.html#Right"><span class="hs-identifier hs-type">Right</span></a></span><span> </span><span id="local-6989586621680429622"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621680429622"><span class="hs-identifier hs-var">result</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">a -&gt; m a
forall a. a -&gt; m a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="file:///nix/store/pdlvkcn31k7dw3q5bcndp7f9d2z5l0h3-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/GHC.Base.html#pure"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621680429622"><span class="hs-identifier hs-var">result</span></a></span><span>
</span><span id="line-308"></span><span>
</span><span id="line-309"></span><span class="hs-comment">-- | Lift a query result that may have NTC version or era mismatch errors into the monad.</span><span>
</span><span id="line-310"></span><span class="hs-comment">-- This combines the common pattern of checking both error types.</span><span>
</span><span id="line-311"></span><span id="local-6989586621680428884"><span id="local-6989586621680428885"><span class="annot"><a href="Hydra.Chain.CardanoClient.html#liftQueryResult"><span class="hs-identifier hs-type">liftQueryResult</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-312"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">MonadThrow</span></span><span> </span><span class="annot"><a href="#local-6989586621680428884"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-313"></span><span>  </span><span class="annot"><a href="file:///nix/store/pdlvkcn31k7dw3q5bcndp7f9d2z5l0h3-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/Data.Either.html#Either"><span class="hs-identifier hs-type">Either</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">UnsupportedNtcVersionError</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///nix/store/pdlvkcn31k7dw3q5bcndp7f9d2z5l0h3-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/Data.Either.html#Either"><span class="hs-identifier hs-type">Either</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">EraMismatch</span></span><span> </span><span class="annot"><a href="#local-6989586621680428885"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-314"></span><span>  </span><span class="annot"><a href="#local-6989586621680428884"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680428885"><span class="hs-identifier hs-type">a</span></a></span></span></span><span>
</span><span id="line-315"></span><span id="liftQueryResult"><span class="annot"><span class="annottext">liftQueryResult :: forall (m :: * -&gt; *) a.
MonadThrow m =&gt;
Either UnsupportedNtcVersionError (Either EraMismatch a) -&gt; m a
</span><a href="Hydra.Chain.CardanoClient.html#liftQueryResult"><span class="hs-identifier hs-var hs-var">liftQueryResult</span></a></span></span><span> </span><span id="local-6989586621680429628"><span class="annot"><span class="annottext">Either UnsupportedNtcVersionError (Either EraMismatch a)
</span><a href="#local-6989586621680429628"><span class="hs-identifier hs-var">result</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-316"></span><span>  </span><span class="annot"><span class="annottext">Either UnsupportedNtcVersionError (Either EraMismatch a)
-&gt; m (Either EraMismatch a)
forall (m :: * -&gt; *) a.
MonadThrow m =&gt;
Either UnsupportedNtcVersionError a -&gt; m a
</span><a href="Hydra.Chain.CardanoClient.html#throwOnUnsupportedNtcVersion"><span class="hs-identifier hs-var">throwOnUnsupportedNtcVersion</span></a></span><span> </span><span class="annot"><span class="annottext">Either UnsupportedNtcVersionError (Either EraMismatch a)
</span><a href="#local-6989586621680429628"><span class="hs-identifier hs-var">result</span></a></span><span> </span><span class="annot"><span class="annottext">m (Either EraMismatch a) -&gt; (Either EraMismatch a -&gt; m a) -&gt; m a
forall a b. m a -&gt; (a -&gt; m b) -&gt; m b
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><a href="file:///nix/store/pdlvkcn31k7dw3q5bcndp7f9d2z5l0h3-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/GHC.Base.html#%3E%3E%3D"><span class="hs-operator hs-var">&gt;&gt;=</span></a></span><span> </span><span class="annot"><span class="annottext">Either EraMismatch a -&gt; m a
forall (m :: * -&gt; *) a. MonadThrow m =&gt; Either EraMismatch a -&gt; m a
</span><a href="Hydra.Chain.CardanoClient.html#throwOnEraMismatch"><span class="hs-identifier hs-var">throwOnEraMismatch</span></a></span><span>
</span><span id="line-317"></span><span>
</span><span id="line-318"></span><span class="annot"><a href="Hydra.Chain.CardanoClient.html#localNodeConnectInfo"><span class="hs-identifier hs-type">localNodeConnectInfo</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">NetworkId</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">SocketPath</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">LocalNodeConnectInfo</span></span><span>
</span><span id="line-319"></span><span id="localNodeConnectInfo"><span class="annot"><span class="annottext">localNodeConnectInfo :: NetworkId -&gt; SocketPath -&gt; LocalNodeConnectInfo
</span><a href="Hydra.Chain.CardanoClient.html#localNodeConnectInfo"><span class="hs-identifier hs-var hs-var">localNodeConnectInfo</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ConsensusModeParams
-&gt; NetworkId -&gt; SocketPath -&gt; LocalNodeConnectInfo
</span><span class="hs-identifier hs-var">LocalNodeConnectInfo</span></span><span> </span><span class="annot"><span class="annottext">ConsensusModeParams
</span><a href="Hydra.Chain.CardanoClient.html#cardanoModeParams"><span class="hs-identifier hs-var">cardanoModeParams</span></a></span><span>
</span><span id="line-320"></span><span>
</span><span id="line-321"></span><span class="annot"><a href="Hydra.Chain.CardanoClient.html#cardanoModeParams"><span class="hs-identifier hs-type">cardanoModeParams</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ConsensusModeParams</span></span><span>
</span><span id="line-322"></span><span id="cardanoModeParams"><span class="annot"><span class="annottext">cardanoModeParams :: ConsensusModeParams
</span><a href="Hydra.Chain.CardanoClient.html#cardanoModeParams"><span class="hs-identifier hs-var hs-var">cardanoModeParams</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">EpochSlots -&gt; ConsensusModeParams
</span><span class="hs-identifier hs-var">CardanoModeParams</span></span><span> </span><span class="annot"><span class="annottext">(EpochSlots -&gt; ConsensusModeParams)
-&gt; EpochSlots -&gt; ConsensusModeParams
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/pdlvkcn31k7dw3q5bcndp7f9d2z5l0h3-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Word64 -&gt; EpochSlots
</span><span class="hs-identifier hs-var">EpochSlots</span></span><span> </span><span class="annot"><span class="annottext">Word64
</span><a href="#local-6989586621680429633"><span class="hs-identifier hs-var">defaultByronEpochSlots</span></a></span><span>
</span><span id="line-323"></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-324"></span><span>  </span><span class="hs-comment">-- NOTE(AB): extracted from Parsers in cardano-cli, this is needed to run in 'cardanoMode' which</span><span>
</span><span id="line-325"></span><span>  </span><span class="hs-comment">-- is the default for cardano-cli</span><span>
</span><span id="line-326"></span><span>  </span><span id="local-6989586621680429633"><span class="annot"><span class="annottext">defaultByronEpochSlots :: Word64
</span><a href="#local-6989586621680429633"><span class="hs-identifier hs-var hs-var">defaultByronEpochSlots</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Word64
</span><span class="hs-number">21600</span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="file:///nix/store/pdlvkcn31k7dw3q5bcndp7f9d2z5l0h3-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/GHC.Word.html#Word64"><span class="hs-identifier hs-type">Word64</span></a></span><span>
</span><span id="line-327"></span><span>
</span><span id="line-328"></span><span class="hs-comment">-- | Execute a local-state query at the given point, using the 'connectInfo'</span><span>
</span><span id="line-329"></span><span class="hs-comment">-- from the reader environment.  Throws 'QueryAcquireException' on failure.</span><span>
</span><span id="line-330"></span><span id="local-6989586621680428854"><span id="local-6989586621680428855"><span id="local-6989586621680428856"><span id="local-6989586621680428857"><span class="annot"><a href="Hydra.Chain.CardanoClient.html#runQuery"><span class="hs-identifier hs-type">runQuery</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-331"></span><span>  </span><span class="annot"><a href="file:///nix/store/pdlvkcn31k7dw3q5bcndp7f9d2z5l0h3-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/Control.Monad.IO.Class.html#MonadIO"><span class="hs-identifier hs-type">MonadIO</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680428854"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-332"></span><span>  </span><span class="annot"><a href="Hydra.Chain.CardanoClient.html#QueryPoint"><span class="hs-identifier hs-type">QueryPoint</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-333"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">LocalStateQueryExpr</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">BlockInMode</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">ChainPoint</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">QueryInMode</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="annot"><a href="file:///nix/store/pdlvkcn31k7dw3q5bcndp7f9d2z5l0h3-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#IO"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680428855"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-334"></span><span>  </span><span class="annot"><a href="Hydra.Chain.CardanoClient.html#CardanoNodeT"><span class="hs-identifier hs-type">CardanoNodeT</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680428856"><span class="hs-identifier hs-type">eon</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680428857"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680428854"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680428855"><span class="hs-identifier hs-type">a</span></a></span></span></span></span></span><span>
</span><span id="line-335"></span><span id="runQuery"><span class="annot"><span class="annottext">runQuery :: forall {k} (m :: * -&gt; *) a (eon :: k -&gt; *) (era :: k).
MonadIO m =&gt;
QueryPoint
-&gt; LocalStateQueryExpr BlockInMode ChainPoint QueryInMode () IO a
-&gt; CardanoNodeT eon era m a
</span><a href="Hydra.Chain.CardanoClient.html#runQuery"><span class="hs-identifier hs-var hs-var">runQuery</span></a></span></span><span> </span><span id="local-6989586621680429645"><span class="annot"><span class="annottext">QueryPoint
</span><a href="#local-6989586621680429645"><span class="hs-identifier hs-var">point</span></a></span></span><span> </span><span id="local-6989586621680429646"><span class="annot"><span class="annottext">LocalStateQueryExpr BlockInMode ChainPoint QueryInMode () IO a
</span><a href="#local-6989586621680429646"><span class="hs-identifier hs-var">query</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-336"></span><span>  </span><span id="local-6989586621680429647"><span class="annot"><span class="annottext">LocalNodeConnectInfo
</span><a href="#local-6989586621680429647"><span class="hs-identifier hs-var">ci</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">CardanoNodeT eon era m LocalNodeConnectInfo
forall r (m :: * -&gt; *). MonadReader r m =&gt; m r
</span><a href="file:///nix/store/pdlvkcn31k7dw3q5bcndp7f9d2z5l0h3-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/mtl-2.3.1/src/Control.Monad.Reader.Class.html#ask"><span class="hs-identifier hs-var">ask</span></a></span><span>
</span><span id="line-337"></span><span>  </span><span class="annot"><span class="annottext">IO a -&gt; CardanoNodeT eon era m a
forall a. IO a -&gt; CardanoNodeT eon era m a
forall (m :: * -&gt; *) a. MonadIO m =&gt; IO a -&gt; m a
</span><a href="file:///nix/store/pdlvkcn31k7dw3q5bcndp7f9d2z5l0h3-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/Control.Monad.IO.Class.html#liftIO"><span class="hs-identifier hs-var">liftIO</span></a></span><span> </span><span class="annot"><span class="annottext">(IO a -&gt; CardanoNodeT eon era m a)
-&gt; IO a -&gt; CardanoNodeT eon era m a
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/pdlvkcn31k7dw3q5bcndp7f9d2z5l0h3-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-338"></span><span>    </span><span class="annot"><span class="annottext">LocalNodeConnectInfo
-&gt; Target ChainPoint
-&gt; LocalStateQueryExpr BlockInMode ChainPoint QueryInMode () IO a
-&gt; IO (Either AcquiringFailure a)
forall a.
LocalNodeConnectInfo
-&gt; Target ChainPoint
-&gt; LocalStateQueryExpr BlockInMode ChainPoint QueryInMode () IO a
-&gt; IO (Either AcquiringFailure a)
</span><span class="hs-identifier hs-var">executeLocalStateQueryExpr</span></span><span> </span><span class="annot"><span class="annottext">LocalNodeConnectInfo
</span><a href="#local-6989586621680429647"><span class="hs-identifier hs-var">ci</span></a></span><span> </span><span class="annot"><span class="annottext">Target ChainPoint
</span><a href="#local-6989586621680429649"><span class="hs-identifier hs-var">target</span></a></span><span> </span><span class="annot"><span class="annottext">LocalStateQueryExpr BlockInMode ChainPoint QueryInMode () IO a
</span><a href="#local-6989586621680429646"><span class="hs-identifier hs-var">query</span></a></span><span> </span><span class="annot"><span class="annottext">IO (Either AcquiringFailure a)
-&gt; (Either AcquiringFailure a -&gt; IO a) -&gt; IO a
forall a b. IO a -&gt; (a -&gt; IO b) -&gt; IO b
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><a href="file:///nix/store/pdlvkcn31k7dw3q5bcndp7f9d2z5l0h3-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/GHC.Base.html#%3E%3E%3D"><span class="hs-operator hs-var">&gt;&gt;=</span></a></span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-339"></span><span>      </span><span class="annot"><a href="file:///nix/store/pdlvkcn31k7dw3q5bcndp7f9d2z5l0h3-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/Data.Either.html#Left"><span class="hs-identifier hs-type">Left</span></a></span><span> </span><span id="local-6989586621680429650"><span class="annot"><span class="annottext">AcquiringFailure
</span><a href="#local-6989586621680429650"><span class="hs-identifier hs-var">err</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">QueryException -&gt; IO a
forall e a. Exception e =&gt; e -&gt; IO a
forall (m :: * -&gt; *) e a. (MonadThrow m, Exception e) =&gt; e -&gt; m a
</span><span class="hs-identifier hs-var">throwIO</span></span><span> </span><span class="annot"><span class="annottext">(QueryException -&gt; IO a) -&gt; QueryException -&gt; IO a
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/pdlvkcn31k7dw3q5bcndp7f9d2z5l0h3-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">AcquiringFailure -&gt; QueryException
</span><a href="Hydra.Chain.CardanoClient.html#QueryAcquireException"><span class="hs-identifier hs-var">QueryAcquireException</span></a></span><span> </span><span class="annot"><span class="annottext">AcquiringFailure
</span><a href="#local-6989586621680429650"><span class="hs-identifier hs-var">err</span></a></span><span>
</span><span id="line-340"></span><span>      </span><span class="annot"><a href="file:///nix/store/pdlvkcn31k7dw3q5bcndp7f9d2z5l0h3-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/Data.Either.html#Right"><span class="hs-identifier hs-type">Right</span></a></span><span> </span><span id="local-6989586621680429651"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621680429651"><span class="hs-identifier hs-var">value</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">a -&gt; IO a
forall a. a -&gt; IO a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="file:///nix/store/pdlvkcn31k7dw3q5bcndp7f9d2z5l0h3-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/GHC.Base.html#pure"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621680429651"><span class="hs-identifier hs-var">value</span></a></span><span>
</span><span id="line-341"></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-342"></span><span>  </span><span id="local-6989586621680429649"><span class="annot"><span class="annottext">target :: Target ChainPoint
</span><a href="#local-6989586621680429649"><span class="hs-identifier hs-var hs-var">target</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-343"></span><span>    </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">QueryPoint
</span><a href="#local-6989586621680429645"><span class="hs-identifier hs-var">point</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-344"></span><span>      </span><span class="annot"><span class="annottext">QueryPoint
</span><a href="Hydra.Chain.CardanoClient.html#QueryTip"><span class="hs-identifier hs-var">QueryTip</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Target ChainPoint
forall point. Target point
</span><span class="hs-identifier hs-var">VolatileTip</span></span><span>
</span><span id="line-345"></span><span>      </span><span class="annot"><a href="Hydra.Chain.CardanoClient.html#QueryAt"><span class="hs-identifier hs-type">QueryAt</span></a></span><span> </span><span id="local-6989586621680429653"><span class="annot"><span class="annottext">ChainPoint
</span><a href="#local-6989586621680429653"><span class="hs-identifier hs-var">cp</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ChainPoint -&gt; Target ChainPoint
forall point. point -&gt; Target point
</span><span class="hs-identifier hs-var">SpecificPoint</span></span><span> </span><span class="annot"><span class="annottext">ChainPoint
</span><a href="#local-6989586621680429653"><span class="hs-identifier hs-var">cp</span></a></span><span>
</span><span id="line-346"></span><span>
</span><span id="line-347"></span><span class="annot"><span class="hs-comment">-- | Query the current era from the node without needing an era witness.</span></span><span>
</span><span id="line-348"></span><span id="local-6989586621680428969"><span id="local-6989586621680428970"><span id="local-6989586621680428971"><span class="annot"><a href="Hydra.Chain.CardanoClient.html#queryCurrentEraExpr"><span class="hs-identifier hs-type">queryCurrentEraExpr</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">LocalStateQueryExpr</span></span><span> </span><span class="annot"><a href="#local-6989586621680428969"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680428970"><span class="hs-identifier hs-type">p</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">QueryInMode</span></span><span> </span><span class="annot"><a href="#local-6989586621680428971"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="annot"><a href="file:///nix/store/pdlvkcn31k7dw3q5bcndp7f9d2z5l0h3-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#IO"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">AnyCardanoEra</span></span></span></span></span><span>
</span><span id="line-349"></span><span id="queryCurrentEraExpr"><span class="annot"><span class="annottext">queryCurrentEraExpr :: forall b p r.
LocalStateQueryExpr b p QueryInMode r IO AnyCardanoEra
</span><a href="Hydra.Chain.CardanoClient.html#queryCurrentEraExpr"><span class="hs-identifier hs-var hs-var">queryCurrentEraExpr</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-350"></span><span>  </span><span class="annot"><span class="annottext">LocalStateQueryExpr
  b
  p
  QueryInMode
  r
  IO
  (Either UnsupportedNtcVersionError AnyCardanoEra)
forall block point r.
LocalStateQueryExpr
  block
  point
  QueryInMode
  r
  IO
  (Either UnsupportedNtcVersionError AnyCardanoEra)
</span><span class="hs-identifier hs-var">Query.queryCurrentEra</span></span><span> </span><span class="annot"><span class="annottext">LocalStateQueryExpr
  b
  p
  QueryInMode
  r
  IO
  (Either UnsupportedNtcVersionError AnyCardanoEra)
-&gt; (Either UnsupportedNtcVersionError AnyCardanoEra
    -&gt; LocalStateQueryExpr b p QueryInMode r IO AnyCardanoEra)
-&gt; LocalStateQueryExpr b p QueryInMode r IO AnyCardanoEra
forall a b.
LocalStateQueryExpr b p QueryInMode r IO a
-&gt; (a -&gt; LocalStateQueryExpr b p QueryInMode r IO b)
-&gt; LocalStateQueryExpr b p QueryInMode r IO b
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><a href="file:///nix/store/pdlvkcn31k7dw3q5bcndp7f9d2z5l0h3-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/GHC.Base.html#%3E%3E%3D"><span class="hs-operator hs-var">&gt;&gt;=</span></a></span><span> </span><span class="annot"><span class="annottext">IO AnyCardanoEra
-&gt; LocalStateQueryExpr b p QueryInMode r IO AnyCardanoEra
forall a. IO a -&gt; LocalStateQueryExpr b p QueryInMode r IO a
forall (m :: * -&gt; *) a. MonadIO m =&gt; IO a -&gt; m a
</span><a href="file:///nix/store/pdlvkcn31k7dw3q5bcndp7f9d2z5l0h3-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/Control.Monad.IO.Class.html#liftIO"><span class="hs-identifier hs-var">liftIO</span></a></span><span> </span><span class="annot"><span class="annottext">(IO AnyCardanoEra
 -&gt; LocalStateQueryExpr b p QueryInMode r IO AnyCardanoEra)
-&gt; (Either UnsupportedNtcVersionError AnyCardanoEra
    -&gt; IO AnyCardanoEra)
-&gt; Either UnsupportedNtcVersionError AnyCardanoEra
-&gt; LocalStateQueryExpr b p QueryInMode r IO AnyCardanoEra
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="file:///nix/store/pdlvkcn31k7dw3q5bcndp7f9d2z5l0h3-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">Either UnsupportedNtcVersionError AnyCardanoEra -&gt; IO AnyCardanoEra
forall (m :: * -&gt; *) a.
MonadThrow m =&gt;
Either UnsupportedNtcVersionError a -&gt; m a
</span><a href="Hydra.Chain.CardanoClient.html#throwOnUnsupportedNtcVersion"><span class="hs-identifier hs-var">throwOnUnsupportedNtcVersion</span></a></span><span>
</span><span id="line-351"></span><span>
</span><span id="line-352"></span><span class="hs-comment">-- | Run a 'CardanoNode' action after dynamically discovering the node's current era.</span><span>
</span><span id="line-353"></span><span class="hs-comment">-- This is useful when connecting to a node whose era is not known in advance.</span><span>
</span><span id="line-354"></span><span class="hs-comment">--</span><span>
</span><span id="line-355"></span><span class="hs-comment">-- Throws 'QueryNotShelleyBasedEraException' if the node is in Byron era.</span><span>
</span><span id="line-356"></span><span id="local-6989586621680428979"><span class="annot"><a href="Hydra.Chain.CardanoClient.html#runNodeIOWithCurrentEra"><span class="hs-identifier hs-type">runNodeIOWithCurrentEra</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-357"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">NetworkId</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-358"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">SocketPath</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-359"></span><span>  </span><span class="hs-special">(</span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621680428978"><span class="annot"><a href="#local-6989586621680428978"><span class="hs-identifier hs-type">era</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ShelleyBasedEra</span></span><span> </span><span class="annot"><a href="#local-6989586621680428978"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Hydra.Chain.CardanoClient.html#CardanoNode"><span class="hs-identifier hs-type">CardanoNode</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">ShelleyBasedEra</span></span><span> </span><span class="annot"><a href="#local-6989586621680428978"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680428979"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-360"></span><span>  </span><span class="annot"><a href="file:///nix/store/pdlvkcn31k7dw3q5bcndp7f9d2z5l0h3-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#IO"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680428979"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-361"></span><span id="runNodeIOWithCurrentEra"><span class="annot"><span class="annottext">runNodeIOWithCurrentEra :: forall a.
NetworkId
-&gt; SocketPath
-&gt; (forall era.
    ShelleyBasedEra era -&gt; CardanoNode ShelleyBasedEra era a)
-&gt; IO a
</span><a href="Hydra.Chain.CardanoClient.html#runNodeIOWithCurrentEra"><span class="hs-identifier hs-var hs-var">runNodeIOWithCurrentEra</span></a></span></span><span> </span><span id="local-6989586621680429666"><span class="annot"><span class="annottext">NetworkId
</span><a href="#local-6989586621680429666"><span class="hs-identifier hs-var">networkId</span></a></span></span><span> </span><span id="local-6989586621680429667"><span class="annot"><span class="annottext">SocketPath
</span><a href="#local-6989586621680429667"><span class="hs-identifier hs-var">nodeSocket</span></a></span></span><span> </span><span id="local-6989586621680429668"><span class="annot"><span class="annottext">forall era.
ShelleyBasedEra era -&gt; CardanoNode ShelleyBasedEra era a
</span><a href="#local-6989586621680429668"><span class="hs-identifier hs-var">action</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-362"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621680429669"><span class="annot"><span class="annottext">ci :: LocalNodeConnectInfo
</span><a href="#local-6989586621680429669"><span class="hs-identifier hs-var hs-var">ci</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">NetworkId -&gt; SocketPath -&gt; LocalNodeConnectInfo
</span><a href="Hydra.Chain.CardanoClient.html#localNodeConnectInfo"><span class="hs-identifier hs-var">localNodeConnectInfo</span></a></span><span> </span><span class="annot"><span class="annottext">NetworkId
</span><a href="#local-6989586621680429666"><span class="hs-identifier hs-var">networkId</span></a></span><span> </span><span class="annot"><span class="annottext">SocketPath
</span><a href="#local-6989586621680429667"><span class="hs-identifier hs-var">nodeSocket</span></a></span><span>
</span><span id="line-363"></span><span>  </span><span id="local-6989586621680429670"><span class="annot"><span class="annottext">Either AcquiringFailure AnyCardanoEra
</span><a href="#local-6989586621680429670"><span class="hs-identifier hs-var">result</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LocalNodeConnectInfo
-&gt; Target ChainPoint
-&gt; LocalStateQueryExpr
     BlockInMode ChainPoint QueryInMode () IO AnyCardanoEra
-&gt; IO (Either AcquiringFailure AnyCardanoEra)
forall a.
LocalNodeConnectInfo
-&gt; Target ChainPoint
-&gt; LocalStateQueryExpr BlockInMode ChainPoint QueryInMode () IO a
-&gt; IO (Either AcquiringFailure a)
</span><span class="hs-identifier hs-var">executeLocalStateQueryExpr</span></span><span> </span><span class="annot"><span class="annottext">LocalNodeConnectInfo
</span><a href="#local-6989586621680429669"><span class="hs-identifier hs-var">ci</span></a></span><span> </span><span class="annot"><span class="annottext">Target ChainPoint
forall point. Target point
</span><span class="hs-identifier hs-var">VolatileTip</span></span><span> </span><span class="annot"><span class="annottext">LocalStateQueryExpr
  BlockInMode ChainPoint QueryInMode () IO AnyCardanoEra
forall b p r.
LocalStateQueryExpr b p QueryInMode r IO AnyCardanoEra
</span><a href="Hydra.Chain.CardanoClient.html#queryCurrentEraExpr"><span class="hs-identifier hs-var">queryCurrentEraExpr</span></a></span><span>
</span><span id="line-364"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">AnyCardanoEra</span></span><span> </span><span id="local-6989586621680429677"><span class="annot"><span class="annottext">CardanoEra era
</span><a href="#local-6989586621680429677"><span class="hs-identifier hs-var">era</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Either AcquiringFailure AnyCardanoEra
</span><a href="#local-6989586621680429670"><span class="hs-identifier hs-var">result</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-365"></span><span>    </span><span class="annot"><a href="file:///nix/store/pdlvkcn31k7dw3q5bcndp7f9d2z5l0h3-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/Data.Either.html#Left"><span class="hs-identifier hs-type">Left</span></a></span><span> </span><span id="local-6989586621680429678"><span class="annot"><span class="annottext">AcquiringFailure
</span><a href="#local-6989586621680429678"><span class="hs-identifier hs-var">err</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">QueryException -&gt; IO AnyCardanoEra
forall e a. Exception e =&gt; e -&gt; IO a
forall (m :: * -&gt; *) e a. (MonadThrow m, Exception e) =&gt; e -&gt; m a
</span><span class="hs-identifier hs-var">throwIO</span></span><span> </span><span class="annot"><span class="annottext">(QueryException -&gt; IO AnyCardanoEra)
-&gt; QueryException -&gt; IO AnyCardanoEra
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/pdlvkcn31k7dw3q5bcndp7f9d2z5l0h3-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">AcquiringFailure -&gt; QueryException
</span><a href="Hydra.Chain.CardanoClient.html#QueryAcquireException"><span class="hs-identifier hs-var">QueryAcquireException</span></a></span><span> </span><span class="annot"><span class="annottext">AcquiringFailure
</span><a href="#local-6989586621680429678"><span class="hs-identifier hs-var">err</span></a></span><span>
</span><span id="line-366"></span><span>    </span><span class="annot"><a href="file:///nix/store/pdlvkcn31k7dw3q5bcndp7f9d2z5l0h3-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/Data.Either.html#Right"><span class="hs-identifier hs-type">Right</span></a></span><span> </span><span id="local-6989586621680429679"><span class="annot"><span class="annottext">AnyCardanoEra
</span><a href="#local-6989586621680429679"><span class="hs-identifier hs-var">value</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">AnyCardanoEra -&gt; IO AnyCardanoEra
forall a. a -&gt; IO a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="file:///nix/store/pdlvkcn31k7dw3q5bcndp7f9d2z5l0h3-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/GHC.Base.html#pure"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">AnyCardanoEra
</span><a href="#local-6989586621680429679"><span class="hs-identifier hs-var">value</span></a></span><span>
</span><span id="line-367"></span><span>  </span><span class="annot"><span class="annottext">IO a -&gt; (ShelleyBasedEra era -&gt; IO a) -&gt; CardanoEra era -&gt; IO a
forall a era.
a -&gt; (ShelleyBasedEra era -&gt; a) -&gt; CardanoEra era -&gt; a
forall (eon :: * -&gt; *) a era.
Eon eon =&gt;
a -&gt; (eon era -&gt; a) -&gt; CardanoEra era -&gt; a
</span><span class="hs-identifier hs-var">inEonForEra</span></span><span>
</span><span id="line-368"></span><span>    </span><span class="hs-special">(</span><span class="annot"><span class="annottext">QueryException -&gt; IO a
forall e a. Exception e =&gt; e -&gt; IO a
forall (m :: * -&gt; *) e a. (MonadThrow m, Exception e) =&gt; e -&gt; m a
</span><span class="hs-identifier hs-var">throwIO</span></span><span> </span><span class="annot"><span class="annottext">(QueryException -&gt; IO a) -&gt; QueryException -&gt; IO a
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/pdlvkcn31k7dw3q5bcndp7f9d2z5l0h3-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">AnyCardanoEra -&gt; QueryException
</span><a href="Hydra.Chain.CardanoClient.html#QueryNotShelleyBasedEraException"><span class="hs-identifier hs-var">QueryNotShelleyBasedEraException</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CardanoEra era -&gt; AnyCardanoEra
forall era. CardanoEra era -&gt; AnyCardanoEra
</span><span class="hs-identifier hs-var">anyCardanoEra</span></span><span> </span><span class="annot"><span class="annottext">CardanoEra era
</span><a href="#local-6989586621680429677"><span class="hs-identifier hs-var">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-369"></span><span>    </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621680429682"><span class="annot"><span class="annottext">ShelleyBasedEra era
</span><a href="#local-6989586621680429682"><span class="hs-identifier hs-var">sbe</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">LocalNodeConnectInfo
-&gt; ShelleyBasedEra era -&gt; CardanoNode ShelleyBasedEra era a -&gt; IO a
forall {k} (eon :: k -&gt; *) (era :: k) a.
LocalNodeConnectInfo -&gt; eon era -&gt; CardanoNode eon era a -&gt; IO a
</span><a href="Hydra.Chain.CardanoClient.html#runCardanoNode"><span class="hs-identifier hs-var">runCardanoNode</span></a></span><span> </span><span class="annot"><span class="annottext">LocalNodeConnectInfo
</span><a href="#local-6989586621680429669"><span class="hs-identifier hs-var">ci</span></a></span><span> </span><span class="annot"><span class="annottext">ShelleyBasedEra era
</span><a href="#local-6989586621680429682"><span class="hs-identifier hs-var">sbe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ShelleyBasedEra era -&gt; CardanoNode ShelleyBasedEra era a
forall era.
ShelleyBasedEra era -&gt; CardanoNode ShelleyBasedEra era a
</span><a href="#local-6989586621680429668"><span class="hs-identifier hs-var">action</span></a></span><span> </span><span class="annot"><span class="annottext">ShelleyBasedEra era
</span><a href="#local-6989586621680429682"><span class="hs-identifier hs-var">sbe</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-370"></span><span>    </span><span class="annot"><span class="annottext">CardanoEra era
</span><a href="#local-6989586621680429677"><span class="hs-identifier hs-var">era</span></a></span><span>
</span><span id="line-371"></span></pre></body></html>