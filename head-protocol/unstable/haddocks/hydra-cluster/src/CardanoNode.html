<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-pragma">{-# LANGUAGE DuplicateRecordFields #-}</span><span>
</span><span id="line-2"></span><span>
</span><span id="line-3"></span><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">CardanoNode</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-4"></span><span>
</span><span id="line-5"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Hydra.Prelude</span></span><span>
</span><span id="line-6"></span><span>
</span><span id="line-7"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Cardano.Slotting.Time</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">diffRelativeTime</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">getRelativeTime</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">toRelativeTime</span></span><span class="hs-special">)</span><span>
</span><span id="line-8"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="CardanoClient.html"><span class="hs-identifier">CardanoClient</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">QueryPoint</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">QueryTip</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-9"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Control.Lens</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-operator">(?~)</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-operator">(^?!)</span></span><span class="hs-special">)</span><span>
</span><span id="line-10"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Control.Tracer</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Tracer</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">traceWith</span></span><span class="hs-special">)</span><span>
</span><span id="line-11"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Aeson</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Value</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">String</span></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-operator">(.=)</span></span><span class="hs-special">)</span><span>
</span><span id="line-12"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Aeson</span></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Aeson</span></span><span>
</span><span id="line-13"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Aeson.Lens</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">atKey</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">key</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">_Number</span></span><span class="hs-special">)</span><span>
</span><span id="line-14"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/Data.Fixed.html"><span class="hs-identifier">Data.Fixed</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/Data.Fixed.html#Centi"><span class="hs-identifier">Centi</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-15"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/text-2.0.2/src/Data.Text.html"><span class="hs-identifier">Data.Text</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/text-2.0.2/src/Data.Text.Internal.html#pack"><span class="hs-identifier">pack</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-16"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/text-2.0.2/src/Data.Text.html"><span class="hs-identifier">Data.Text</span></a></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Text</span></span><span>
</span><span id="line-17"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/time-1.12.2/src/Data.Time.Clock.POSIX.html"><span class="hs-identifier">Data.Time.Clock.POSIX</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/time-1.12.2/src/Data.Time.Clock.POSIX.html#posixSecondsToUTCTime"><span class="hs-identifier">posixSecondsToUTCTime</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/time-1.12.2/src/Data.Time.Clock.POSIX.html#utcTimeToPOSIXSeconds"><span class="hs-identifier">utcTimeToPOSIXSeconds</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-18"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Hydra.Cardano.Api</span></span><span> </span><span class="hs-special">(</span><span>
</span><span id="line-19"></span><span>  </span><span class="annot"><span class="hs-identifier">File</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-20"></span><span>  </span><span class="annot"><span class="hs-identifier">NetworkId</span></span><span class="hs-special">,</span><span>
</span><span id="line-21"></span><span>  </span><span class="annot"><span class="hs-identifier">NetworkMagic</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-22"></span><span>  </span><span class="annot"><span class="hs-identifier">SocketPath</span></span><span class="hs-special">,</span><span>
</span><span id="line-23"></span><span>  </span><span class="annot"><span class="hs-identifier">getProgress</span></span><span class="hs-special">,</span><span>
</span><span id="line-24"></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-25"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Hydra.Cardano.Api</span></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Api</span></span><span>
</span><span id="line-26"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Hydra.Chain.Backend</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">ChainBackend</span></span><span class="hs-special">)</span><span>
</span><span id="line-27"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Hydra.Chain.Backend</span></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Backend</span></span><span>
</span><span id="line-28"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Hydra.Chain.Blockfrost</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">BlockfrostBackend</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-29"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Hydra.Chain.Direct</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">DirectBackend</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-30"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Hydra.Cluster.Fixture.html"><span class="hs-identifier">Hydra.Cluster.Fixture</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hydra.Cluster.Fixture.html#KnownNetwork"><span class="hs-identifier">KnownNetwork</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Hydra.Cluster.Fixture.html#toNetworkId"><span class="hs-identifier">toNetworkId</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-31"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Hydra.Cluster.Util.html"><span class="hs-identifier">Hydra.Cluster.Util</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hydra.Cluster.Util.html#readConfigFile"><span class="hs-identifier">readConfigFile</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-32"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Hydra.Options</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">BlockfrostOptions</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">DirectOptions</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">defaultBlockfrostOptions</span></span><span class="hs-special">)</span><span>
</span><span id="line-33"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Network.HTTP.Simple</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">getResponseBody</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">httpBS</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">parseRequestThrow</span></span><span class="hs-special">)</span><span>
</span><span id="line-34"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/directory-1.3.8.5/src/System.Directory.html"><span class="hs-identifier">System.Directory</span></a></span><span> </span><span class="hs-special">(</span><span>
</span><span id="line-35"></span><span>  </span><span class="annot"><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/directory-1.3.8.5/src/System.Directory.html#createDirectoryIfMissing"><span class="hs-identifier">createDirectoryIfMissing</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-36"></span><span>  </span><span class="annot"><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/directory-1.3.8.5/src/System.Directory.html#doesFileExist"><span class="hs-identifier">doesFileExist</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-37"></span><span>  </span><span class="annot"><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/directory-1.3.8.5/src/System.Directory.html#getCurrentDirectory"><span class="hs-identifier">getCurrentDirectory</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-38"></span><span>  </span><span class="annot"><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/directory-1.3.8.5/src/System.Directory.html#removeFile"><span class="hs-identifier">removeFile</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-39"></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-40"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/System.Exit.html"><span class="hs-identifier">System.Exit</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/GHC.IO.Exception.html#ExitCode"><span class="hs-identifier">ExitCode</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-41"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/template-haskell-2.20.0.0/src/System.FilePath.html"><span class="hs-identifier">System.FilePath</span></a></span><span> </span><span class="hs-special">(</span><span>
</span><span id="line-42"></span><span>  </span><span class="annot"><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/filepath-1.4.301.0/src/System.FilePath.Posix.html#takeDirectory"><span class="hs-identifier">takeDirectory</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-43"></span><span>  </span><span class="annot"><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/filepath-1.4.301.0/src/System.FilePath.Posix.html#%3C%2F%3E"><span class="hs-operator">(&lt;/&gt;)</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-44"></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-45"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/unix-2.8.6.0/src/System.Posix.html"><span class="hs-identifier">System.Posix</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/unix-2.8.6.0/src/System.Posix.Files.Common.html#ownerReadMode"><span class="hs-identifier">ownerReadMode</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/unix-2.8.6.0/src/System.Posix.Files.html#setFileMode"><span class="hs-identifier">setFileMode</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-46"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/process-1.6.19.0/src/System.Process.html"><span class="hs-identifier">System.Process</span></a></span><span> </span><span class="hs-special">(</span><span>
</span><span id="line-47"></span><span>  </span><span class="annot"><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/process-1.6.19.0/src/System.Process.Common.html#CreateProcess"><span class="hs-identifier">CreateProcess</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-48"></span><span>  </span><span class="annot"><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/process-1.6.19.0/src/System.Process.Common.html#StdStream"><span class="hs-identifier">StdStream</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/process-1.6.19.0/src/System.Process.Common.html#CreatePipe"><span class="hs-identifier">CreatePipe</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/process-1.6.19.0/src/System.Process.Common.html#UseHandle"><span class="hs-identifier">UseHandle</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-49"></span><span>  </span><span class="annot"><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/process-1.6.19.0/src/System.Process.html#proc"><span class="hs-identifier">proc</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-50"></span><span>  </span><span class="annot"><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/process-1.6.19.0/src/System.Process.html#readProcess"><span class="hs-identifier">readProcess</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-51"></span><span>  </span><span class="annot"><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/process-1.6.19.0/src/System.Process.html#withCreateProcess"><span class="hs-identifier">withCreateProcess</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-52"></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-53"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Test.Hydra.Prelude</span></span><span>
</span><span id="line-54"></span><span>
</span><span id="line-55"></span><span class="hs-keyword">data</span><span> </span><span id="NodeLog"><span class="annot"><a href="CardanoNode.html#NodeLog"><span class="hs-identifier hs-var">NodeLog</span></a></span></span><span>
</span><span id="line-56"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="MsgNodeCmdSpec"><span class="annot"><a href="CardanoNode.html#MsgNodeCmdSpec"><span class="hs-identifier hs-var">MsgNodeCmdSpec</span></a></span></span><span> </span><span class="hs-special">{</span><span id="%24sel%3Acmd%3AMsgNodeCmdSpec"><span class="annot"><span class="annottext">NodeLog -&gt; Text
</span><a href="CardanoNode.html#%24sel%3Acmd%3AMsgNodeCmdSpec"><span class="hs-identifier hs-var hs-var">cmd</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/text-2.0.2/src/Data.Text.Internal.html#Text"><span class="hs-identifier hs-type">Text</span></a></span><span class="hs-special">}</span><span>
</span><span id="line-57"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="MsgCLI"><span class="annot"><a href="CardanoNode.html#MsgCLI"><span class="hs-identifier hs-var">MsgCLI</span></a></span></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/text-2.0.2/src/Data.Text.Internal.html#Text"><span class="hs-identifier hs-type">Text</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-58"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="MsgCLIStatus"><span class="annot"><a href="CardanoNode.html#MsgCLIStatus"><span class="hs-identifier hs-var">MsgCLIStatus</span></a></span></span><span> </span><span class="annot"><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/text-2.0.2/src/Data.Text.Internal.html#Text"><span class="hs-identifier hs-type">Text</span></a></span><span> </span><span class="annot"><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/text-2.0.2/src/Data.Text.Internal.html#Text"><span class="hs-identifier hs-type">Text</span></a></span><span>
</span><span id="line-59"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="MsgCLIRetry"><span class="annot"><a href="CardanoNode.html#MsgCLIRetry"><span class="hs-identifier hs-var">MsgCLIRetry</span></a></span></span><span> </span><span class="annot"><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/text-2.0.2/src/Data.Text.Internal.html#Text"><span class="hs-identifier hs-type">Text</span></a></span><span>
</span><span id="line-60"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="MsgCLIRetryResult"><span class="annot"><a href="CardanoNode.html#MsgCLIRetryResult"><span class="hs-identifier hs-var">MsgCLIRetryResult</span></a></span></span><span> </span><span class="annot"><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/text-2.0.2/src/Data.Text.Internal.html#Text"><span class="hs-identifier hs-type">Text</span></a></span><span> </span><span class="annot"><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#Int"><span class="hs-identifier hs-type">Int</span></a></span><span>
</span><span id="line-61"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="MsgNodeStarting"><span class="annot"><a href="CardanoNode.html#MsgNodeStarting"><span class="hs-identifier hs-var">MsgNodeStarting</span></a></span></span><span> </span><span class="hs-special">{</span><span id="%24sel%3AstateDirectory%3AMsgNodeCmdSpec"><span class="annot"><span class="annottext">NodeLog -&gt; FilePath
</span><a href="CardanoNode.html#%24sel%3AstateDirectory%3AMsgNodeCmdSpec"><span class="hs-identifier hs-var hs-var">stateDirectory</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/GHC.IO.html#FilePath"><span class="hs-identifier hs-type">FilePath</span></a></span><span class="hs-special">}</span><span>
</span><span id="line-62"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="MsgSocketIsReady"><span class="annot"><a href="CardanoNode.html#MsgSocketIsReady"><span class="hs-identifier hs-var">MsgSocketIsReady</span></a></span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">SocketPath</span></span><span>
</span><span id="line-63"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="MsgSynchronizing"><span class="annot"><a href="CardanoNode.html#MsgSynchronizing"><span class="hs-identifier hs-var">MsgSynchronizing</span></a></span></span><span> </span><span class="hs-special">{</span><span id="%24sel%3ApercentDone%3AMsgNodeCmdSpec"><span class="annot"><span class="annottext">NodeLog -&gt; Centi
</span><a href="CardanoNode.html#%24sel%3ApercentDone%3AMsgNodeCmdSpec"><span class="hs-identifier hs-var hs-var">percentDone</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/Data.Fixed.html#Centi"><span class="hs-identifier hs-type">Centi</span></a></span><span class="hs-special">}</span><span>
</span><span id="line-64"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="MsgQueryGenesisParametersFailed"><span class="annot"><a href="CardanoNode.html#MsgQueryGenesisParametersFailed"><span class="hs-identifier hs-var">MsgQueryGenesisParametersFailed</span></a></span></span><span> </span><span class="hs-special">{</span><span id="%24sel%3Aerr%3AMsgNodeCmdSpec"><span class="annot"><span class="annottext">NodeLog -&gt; Text
</span><a href="CardanoNode.html#%24sel%3Aerr%3AMsgNodeCmdSpec"><span class="hs-identifier hs-var hs-var">err</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/text-2.0.2/src/Data.Text.Internal.html#Text"><span class="hs-identifier hs-type">Text</span></a></span><span class="hs-special">}</span><span>
</span><span id="line-65"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">stock</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679485456"><span id="local-6989586621679485473"><span class="annot"><span class="annottext">NodeLog -&gt; NodeLog -&gt; Bool
(NodeLog -&gt; NodeLog -&gt; Bool)
-&gt; (NodeLog -&gt; NodeLog -&gt; Bool) -&gt; Eq NodeLog
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
$c== :: NodeLog -&gt; NodeLog -&gt; Bool
== :: NodeLog -&gt; NodeLog -&gt; Bool
$c/= :: NodeLog -&gt; NodeLog -&gt; Bool
/= :: NodeLog -&gt; NodeLog -&gt; Bool
</span><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/ghc-prim-0.10.0/src/GHC.Classes.html#Eq"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></a></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679485478"><span id="local-6989586621679485506"><span id="local-6989586621679485510"><span class="annot"><span class="annottext">Int -&gt; NodeLog -&gt; ShowS
[NodeLog] -&gt; ShowS
NodeLog -&gt; FilePath
(Int -&gt; NodeLog -&gt; ShowS)
-&gt; (NodeLog -&gt; FilePath) -&gt; ([NodeLog] -&gt; ShowS) -&gt; Show NodeLog
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; FilePath) -&gt; ([a] -&gt; ShowS) -&gt; Show a
$cshowsPrec :: Int -&gt; NodeLog -&gt; ShowS
showsPrec :: Int -&gt; NodeLog -&gt; ShowS
$cshow :: NodeLog -&gt; FilePath
show :: NodeLog -&gt; FilePath
$cshowList :: [NodeLog] -&gt; ShowS
showList :: [NodeLog] -&gt; ShowS
</span><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/GHC.Show.html#Show"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></a></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679485516"><span id="local-6989586621679485518"><span class="annot"><span class="annottext">(forall x. NodeLog -&gt; Rep NodeLog x)
-&gt; (forall x. Rep NodeLog x -&gt; NodeLog) -&gt; Generic NodeLog
forall x. Rep NodeLog x -&gt; NodeLog
forall x. NodeLog -&gt; Rep NodeLog x
forall a.
(forall x. a -&gt; Rep a x) -&gt; (forall x. Rep a x -&gt; a) -&gt; Generic a
$cfrom :: forall x. NodeLog -&gt; Rep NodeLog x
from :: forall x. NodeLog -&gt; Rep NodeLog x
$cto :: forall x. Rep NodeLog x -&gt; NodeLog
to :: forall x. Rep NodeLog x -&gt; NodeLog
</span><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/GHC.Generics.html#Generic"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Generic</span></a></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-66"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">anyclass</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679485522"><span id="local-6989586621679485529"><span id="local-6989586621679485532"><span id="local-6989586621679485535"><span id="local-6989586621679485538"><span class="annot"><span class="annottext">[NodeLog] -&gt; Value
[NodeLog] -&gt; Encoding
NodeLog -&gt; Bool
NodeLog -&gt; Value
NodeLog -&gt; Encoding
(NodeLog -&gt; Value)
-&gt; (NodeLog -&gt; Encoding)
-&gt; ([NodeLog] -&gt; Value)
-&gt; ([NodeLog] -&gt; Encoding)
-&gt; (NodeLog -&gt; Bool)
-&gt; ToJSON NodeLog
forall a.
(a -&gt; Value)
-&gt; (a -&gt; Encoding)
-&gt; ([a] -&gt; Value)
-&gt; ([a] -&gt; Encoding)
-&gt; (a -&gt; Bool)
-&gt; ToJSON a
$ctoJSON :: NodeLog -&gt; Value
toJSON :: NodeLog -&gt; Value
$ctoEncoding :: NodeLog -&gt; Encoding
toEncoding :: NodeLog -&gt; Encoding
$ctoJSONList :: [NodeLog] -&gt; Value
toJSONList :: [NodeLog] -&gt; Value
$ctoEncodingList :: [NodeLog] -&gt; Encoding
toEncodingList :: [NodeLog] -&gt; Encoding
$comitField :: NodeLog -&gt; Bool
omitField :: NodeLog -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">ToJSON</span></span></span></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-67"></span><span>
</span><span id="line-68"></span><span class="hs-keyword">type</span><span> </span><span id="Port"><span class="annot"><a href="CardanoNode.html#Port"><span class="hs-identifier hs-var">Port</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#Int"><span class="hs-identifier hs-type">Int</span></a></span><span>
</span><span id="line-69"></span><span>
</span><span id="line-70"></span><span class="hs-keyword">newtype</span><span> </span><span id="NodeId"><span class="annot"><a href="CardanoNode.html#NodeId"><span class="hs-identifier hs-var">NodeId</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="NodeId"><span class="annot"><a href="CardanoNode.html#NodeId"><span class="hs-identifier hs-var">NodeId</span></a></span></span><span> </span><span class="annot"><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#Int"><span class="hs-identifier hs-type">Int</span></a></span><span>
</span><span id="line-71"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">newtype</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679485889"><span id="local-6989586621679485893"><span class="annot"><span class="annottext">NodeId -&gt; NodeId -&gt; Bool
(NodeId -&gt; NodeId -&gt; Bool)
-&gt; (NodeId -&gt; NodeId -&gt; Bool) -&gt; Eq NodeId
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
$c== :: NodeId -&gt; NodeId -&gt; Bool
== :: NodeId -&gt; NodeId -&gt; Bool
$c/= :: NodeId -&gt; NodeId -&gt; Bool
/= :: NodeId -&gt; NodeId -&gt; Bool
</span><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/ghc-prim-0.10.0/src/GHC.Classes.html#Eq"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></a></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679485898"><span id="local-6989586621679485902"><span id="local-6989586621679485906"><span class="annot"><span class="annottext">Int -&gt; NodeId -&gt; ShowS
[NodeId] -&gt; ShowS
NodeId -&gt; FilePath
(Int -&gt; NodeId -&gt; ShowS)
-&gt; (NodeId -&gt; FilePath) -&gt; ([NodeId] -&gt; ShowS) -&gt; Show NodeId
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; FilePath) -&gt; ([a] -&gt; ShowS) -&gt; Show a
$cshowsPrec :: Int -&gt; NodeId -&gt; ShowS
showsPrec :: Int -&gt; NodeId -&gt; ShowS
$cshow :: NodeId -&gt; FilePath
show :: NodeId -&gt; FilePath
$cshowList :: [NodeId] -&gt; ShowS
showList :: [NodeId] -&gt; ShowS
</span><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/GHC.Show.html#Show"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></a></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679485911"><span id="local-6989586621679485915"><span id="local-6989586621679485919"><span id="local-6989586621679485923"><span id="local-6989586621679485927"><span id="local-6989586621679485931"><span id="local-6989586621679485935"><span class="annot"><span class="annottext">Integer -&gt; NodeId
NodeId -&gt; NodeId
NodeId -&gt; NodeId -&gt; NodeId
(NodeId -&gt; NodeId -&gt; NodeId)
-&gt; (NodeId -&gt; NodeId -&gt; NodeId)
-&gt; (NodeId -&gt; NodeId -&gt; NodeId)
-&gt; (NodeId -&gt; NodeId)
-&gt; (NodeId -&gt; NodeId)
-&gt; (NodeId -&gt; NodeId)
-&gt; (Integer -&gt; NodeId)
-&gt; Num NodeId
forall a.
(a -&gt; a -&gt; a)
-&gt; (a -&gt; a -&gt; a)
-&gt; (a -&gt; a -&gt; a)
-&gt; (a -&gt; a)
-&gt; (a -&gt; a)
-&gt; (a -&gt; a)
-&gt; (Integer -&gt; a)
-&gt; Num a
$c+ :: NodeId -&gt; NodeId -&gt; NodeId
+ :: NodeId -&gt; NodeId -&gt; NodeId
$c- :: NodeId -&gt; NodeId -&gt; NodeId
- :: NodeId -&gt; NodeId -&gt; NodeId
$c* :: NodeId -&gt; NodeId -&gt; NodeId
* :: NodeId -&gt; NodeId -&gt; NodeId
$cnegate :: NodeId -&gt; NodeId
negate :: NodeId -&gt; NodeId
$cabs :: NodeId -&gt; NodeId
abs :: NodeId -&gt; NodeId
$csignum :: NodeId -&gt; NodeId
signum :: NodeId -&gt; NodeId
$cfromInteger :: Integer -&gt; NodeId
fromInteger :: Integer -&gt; NodeId
</span><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/GHC.Num.html#Num"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Num</span></a></span></span></span></span></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-72"></span><span>
</span><span id="line-73"></span><span class="annot"><span class="hs-comment">-- | Configuration parameters for a single node devnet</span></span><span>
</span><span id="line-74"></span><span class="hs-keyword">data</span><span> </span><span id="DevnetConfig"><span class="annot"><a href="CardanoNode.html#DevnetConfig"><span class="hs-identifier hs-var">DevnetConfig</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="DevnetConfig"><span class="annot"><a href="CardanoNode.html#DevnetConfig"><span class="hs-identifier hs-var">DevnetConfig</span></a></span></span><span>
</span><span id="line-75"></span><span>  </span><span class="hs-special">{</span><span> </span><span id="%24sel%3AstateDirectory%3ADevnetConfig"><span class="annot"><span class="annottext">DevnetConfig -&gt; FilePath
</span><a href="CardanoNode.html#%24sel%3AstateDirectory%3ADevnetConfig"><span class="hs-identifier hs-var hs-var">stateDirectory</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/GHC.IO.html#FilePath"><span class="hs-identifier hs-type">FilePath</span></a></span><span>
</span><span id="line-76"></span><span>  </span><span class="annot"><span class="hs-comment">-- ^ Parent state directory</span></span><span>
</span><span id="line-77"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="%24sel%3AsystemStart%3ADevnetConfig"><span class="annot"><span class="annottext">DevnetConfig -&gt; UTCTime
</span><a href="CardanoNode.html#%24sel%3AsystemStart%3ADevnetConfig"><span class="hs-identifier hs-var hs-var">systemStart</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/time-1.12.2/src/Data.Time.Clock.Internal.UTCTime.html#UTCTime"><span class="hs-identifier hs-type">UTCTime</span></a></span><span>
</span><span id="line-78"></span><span>  </span><span class="annot"><span class="hs-comment">-- ^ Blockchain start time</span></span><span>
</span><span id="line-79"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="%24sel%3Aports%3ADevnetConfig"><span class="annot"><span class="annottext">DevnetConfig -&gt; PortsConfig
</span><a href="CardanoNode.html#%24sel%3Aports%3ADevnetConfig"><span class="hs-identifier hs-var hs-var">ports</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="CardanoNode.html#PortsConfig"><span class="hs-identifier hs-type">PortsConfig</span></a></span><span>
</span><span id="line-80"></span><span>  </span><span class="annot"><span class="hs-comment">-- ^ A list of port</span></span><span>
</span><span id="line-81"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-82"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">stock</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679485945"><span id="local-6989586621679485952"><span class="annot"><span class="annottext">DevnetConfig -&gt; DevnetConfig -&gt; Bool
(DevnetConfig -&gt; DevnetConfig -&gt; Bool)
-&gt; (DevnetConfig -&gt; DevnetConfig -&gt; Bool) -&gt; Eq DevnetConfig
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
$c== :: DevnetConfig -&gt; DevnetConfig -&gt; Bool
== :: DevnetConfig -&gt; DevnetConfig -&gt; Bool
$c/= :: DevnetConfig -&gt; DevnetConfig -&gt; Bool
/= :: DevnetConfig -&gt; DevnetConfig -&gt; Bool
</span><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/ghc-prim-0.10.0/src/GHC.Classes.html#Eq"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></a></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679485956"><span id="local-6989586621679485965"><span id="local-6989586621679485969"><span class="annot"><span class="annottext">Int -&gt; DevnetConfig -&gt; ShowS
[DevnetConfig] -&gt; ShowS
DevnetConfig -&gt; FilePath
(Int -&gt; DevnetConfig -&gt; ShowS)
-&gt; (DevnetConfig -&gt; FilePath)
-&gt; ([DevnetConfig] -&gt; ShowS)
-&gt; Show DevnetConfig
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; FilePath) -&gt; ([a] -&gt; ShowS) -&gt; Show a
$cshowsPrec :: Int -&gt; DevnetConfig -&gt; ShowS
showsPrec :: Int -&gt; DevnetConfig -&gt; ShowS
$cshow :: DevnetConfig -&gt; FilePath
show :: DevnetConfig -&gt; FilePath
$cshowList :: [DevnetConfig] -&gt; ShowS
showList :: [DevnetConfig] -&gt; ShowS
</span><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/GHC.Show.html#Show"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></a></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679485972"><span id="local-6989586621679485974"><span class="annot"><span class="annottext">(forall x. DevnetConfig -&gt; Rep DevnetConfig x)
-&gt; (forall x. Rep DevnetConfig x -&gt; DevnetConfig)
-&gt; Generic DevnetConfig
forall x. Rep DevnetConfig x -&gt; DevnetConfig
forall x. DevnetConfig -&gt; Rep DevnetConfig x
forall a.
(forall x. a -&gt; Rep a x) -&gt; (forall x. Rep a x -&gt; a) -&gt; Generic a
$cfrom :: forall x. DevnetConfig -&gt; Rep DevnetConfig x
from :: forall x. DevnetConfig -&gt; Rep DevnetConfig x
$cto :: forall x. Rep DevnetConfig x -&gt; DevnetConfig
to :: forall x. Rep DevnetConfig x -&gt; DevnetConfig
</span><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/GHC.Generics.html#Generic"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Generic</span></a></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-83"></span><span>
</span><span id="line-84"></span><span class="annot"><span class="hs-comment">-- | Arguments given to the 'cardano-node' command-line to run a node.</span></span><span>
</span><span id="line-85"></span><span class="hs-keyword">data</span><span> </span><span id="CardanoNodeArgs"><span class="annot"><a href="CardanoNode.html#CardanoNodeArgs"><span class="hs-identifier hs-var">CardanoNodeArgs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="CardanoNodeArgs"><span class="annot"><a href="CardanoNode.html#CardanoNodeArgs"><span class="hs-identifier hs-var">CardanoNodeArgs</span></a></span></span><span>
</span><span id="line-86"></span><span>  </span><span class="hs-special">{</span><span> </span><span id="%24sel%3AnodeSocket%3ACardanoNodeArgs"><span class="annot"><span class="annottext">CardanoNodeArgs -&gt; FilePath
</span><a href="CardanoNode.html#%24sel%3AnodeSocket%3ACardanoNodeArgs"><span class="hs-identifier hs-var hs-var">nodeSocket</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/GHC.IO.html#FilePath"><span class="hs-identifier hs-type">FilePath</span></a></span><span>
</span><span id="line-87"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="%24sel%3AnodeConfigFile%3ACardanoNodeArgs"><span class="annot"><span class="annottext">CardanoNodeArgs -&gt; FilePath
</span><a href="CardanoNode.html#%24sel%3AnodeConfigFile%3ACardanoNodeArgs"><span class="hs-identifier hs-var hs-var">nodeConfigFile</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/GHC.IO.html#FilePath"><span class="hs-identifier hs-type">FilePath</span></a></span><span>
</span><span id="line-88"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="%24sel%3AnodeByronGenesisFile%3ACardanoNodeArgs"><span class="annot"><span class="annottext">CardanoNodeArgs -&gt; FilePath
</span><a href="CardanoNode.html#%24sel%3AnodeByronGenesisFile%3ACardanoNodeArgs"><span class="hs-identifier hs-var hs-var">nodeByronGenesisFile</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/GHC.IO.html#FilePath"><span class="hs-identifier hs-type">FilePath</span></a></span><span>
</span><span id="line-89"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="%24sel%3AnodeShelleyGenesisFile%3ACardanoNodeArgs"><span class="annot"><span class="annottext">CardanoNodeArgs -&gt; FilePath
</span><a href="CardanoNode.html#%24sel%3AnodeShelleyGenesisFile%3ACardanoNodeArgs"><span class="hs-identifier hs-var hs-var">nodeShelleyGenesisFile</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/GHC.IO.html#FilePath"><span class="hs-identifier hs-type">FilePath</span></a></span><span>
</span><span id="line-90"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="%24sel%3AnodeAlonzoGenesisFile%3ACardanoNodeArgs"><span class="annot"><span class="annottext">CardanoNodeArgs -&gt; FilePath
</span><a href="CardanoNode.html#%24sel%3AnodeAlonzoGenesisFile%3ACardanoNodeArgs"><span class="hs-identifier hs-var hs-var">nodeAlonzoGenesisFile</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/GHC.IO.html#FilePath"><span class="hs-identifier hs-type">FilePath</span></a></span><span>
</span><span id="line-91"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="%24sel%3AnodeConwayGenesisFile%3ACardanoNodeArgs"><span class="annot"><span class="annottext">CardanoNodeArgs -&gt; FilePath
</span><a href="CardanoNode.html#%24sel%3AnodeConwayGenesisFile%3ACardanoNodeArgs"><span class="hs-identifier hs-var hs-var">nodeConwayGenesisFile</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/GHC.IO.html#FilePath"><span class="hs-identifier hs-type">FilePath</span></a></span><span>
</span><span id="line-92"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="%24sel%3AnodeTopologyFile%3ACardanoNodeArgs"><span class="annot"><span class="annottext">CardanoNodeArgs -&gt; FilePath
</span><a href="CardanoNode.html#%24sel%3AnodeTopologyFile%3ACardanoNodeArgs"><span class="hs-identifier hs-var hs-var">nodeTopologyFile</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/GHC.IO.html#FilePath"><span class="hs-identifier hs-type">FilePath</span></a></span><span>
</span><span id="line-93"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="%24sel%3AnodeDatabaseDir%3ACardanoNodeArgs"><span class="annot"><span class="annottext">CardanoNodeArgs -&gt; FilePath
</span><a href="CardanoNode.html#%24sel%3AnodeDatabaseDir%3ACardanoNodeArgs"><span class="hs-identifier hs-var hs-var">nodeDatabaseDir</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/GHC.IO.html#FilePath"><span class="hs-identifier hs-type">FilePath</span></a></span><span>
</span><span id="line-94"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="%24sel%3AnodeDlgCertFile%3ACardanoNodeArgs"><span class="annot"><span class="annottext">CardanoNodeArgs -&gt; Maybe FilePath
</span><a href="CardanoNode.html#%24sel%3AnodeDlgCertFile%3ACardanoNodeArgs"><span class="hs-identifier hs-var hs-var">nodeDlgCertFile</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/GHC.Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/GHC.IO.html#FilePath"><span class="hs-identifier hs-type">FilePath</span></a></span><span>
</span><span id="line-95"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="%24sel%3AnodeSignKeyFile%3ACardanoNodeArgs"><span class="annot"><span class="annottext">CardanoNodeArgs -&gt; Maybe FilePath
</span><a href="CardanoNode.html#%24sel%3AnodeSignKeyFile%3ACardanoNodeArgs"><span class="hs-identifier hs-var hs-var">nodeSignKeyFile</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/GHC.Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/GHC.IO.html#FilePath"><span class="hs-identifier hs-type">FilePath</span></a></span><span>
</span><span id="line-96"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="%24sel%3AnodeOpCertFile%3ACardanoNodeArgs"><span class="annot"><span class="annottext">CardanoNodeArgs -&gt; Maybe FilePath
</span><a href="CardanoNode.html#%24sel%3AnodeOpCertFile%3ACardanoNodeArgs"><span class="hs-identifier hs-var hs-var">nodeOpCertFile</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/GHC.Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/GHC.IO.html#FilePath"><span class="hs-identifier hs-type">FilePath</span></a></span><span>
</span><span id="line-97"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="%24sel%3AnodeKesKeyFile%3ACardanoNodeArgs"><span class="annot"><span class="annottext">CardanoNodeArgs -&gt; Maybe FilePath
</span><a href="CardanoNode.html#%24sel%3AnodeKesKeyFile%3ACardanoNodeArgs"><span class="hs-identifier hs-var hs-var">nodeKesKeyFile</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/GHC.Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/GHC.IO.html#FilePath"><span class="hs-identifier hs-type">FilePath</span></a></span><span>
</span><span id="line-98"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="%24sel%3AnodeVrfKeyFile%3ACardanoNodeArgs"><span class="annot"><span class="annottext">CardanoNodeArgs -&gt; Maybe FilePath
</span><a href="CardanoNode.html#%24sel%3AnodeVrfKeyFile%3ACardanoNodeArgs"><span class="hs-identifier hs-var hs-var">nodeVrfKeyFile</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/GHC.Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/GHC.IO.html#FilePath"><span class="hs-identifier hs-type">FilePath</span></a></span><span>
</span><span id="line-99"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="%24sel%3AnodePort%3ACardanoNodeArgs"><span class="annot"><span class="annottext">CardanoNodeArgs -&gt; Maybe Int
</span><a href="CardanoNode.html#%24sel%3AnodePort%3ACardanoNodeArgs"><span class="hs-identifier hs-var hs-var">nodePort</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/GHC.Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="CardanoNode.html#Port"><span class="hs-identifier hs-type">Port</span></a></span><span>
</span><span id="line-100"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-101"></span><span>
</span><span id="line-102"></span><span class="annot"><a href="CardanoNode.html#defaultCardanoNodeArgs"><span class="hs-identifier hs-type">defaultCardanoNodeArgs</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="CardanoNode.html#CardanoNodeArgs"><span class="hs-identifier hs-type">CardanoNodeArgs</span></a></span><span>
</span><span id="line-103"></span><span id="defaultCardanoNodeArgs"><span class="annot"><span class="annottext">defaultCardanoNodeArgs :: CardanoNodeArgs
</span><a href="CardanoNode.html#defaultCardanoNodeArgs"><span class="hs-identifier hs-var hs-var">defaultCardanoNodeArgs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-104"></span><span>  </span><span class="annot"><a href="CardanoNode.html#CardanoNodeArgs"><span class="hs-identifier hs-type">CardanoNodeArgs</span></a></span><span>
</span><span id="line-105"></span><span>    </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">$sel:nodeSocket:CardanoNodeArgs :: FilePath
</span><a href="CardanoNode.html#%24sel%3AnodeSocket%3ACardanoNodeArgs"><span class="hs-identifier hs-var">nodeSocket</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FilePath
</span><span class="hs-string">&quot;node.socket&quot;</span></span><span>
</span><span id="line-106"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">$sel:nodeConfigFile:CardanoNodeArgs :: FilePath
</span><a href="CardanoNode.html#%24sel%3AnodeConfigFile%3ACardanoNodeArgs"><span class="hs-identifier hs-var">nodeConfigFile</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FilePath
</span><span class="hs-string">&quot;cardano-node.json&quot;</span></span><span>
</span><span id="line-107"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">$sel:nodeByronGenesisFile:CardanoNodeArgs :: FilePath
</span><a href="CardanoNode.html#%24sel%3AnodeByronGenesisFile%3ACardanoNodeArgs"><span class="hs-identifier hs-var">nodeByronGenesisFile</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FilePath
</span><span class="hs-string">&quot;genesis-byron.json&quot;</span></span><span>
</span><span id="line-108"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">$sel:nodeShelleyGenesisFile:CardanoNodeArgs :: FilePath
</span><a href="CardanoNode.html#%24sel%3AnodeShelleyGenesisFile%3ACardanoNodeArgs"><span class="hs-identifier hs-var">nodeShelleyGenesisFile</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FilePath
</span><span class="hs-string">&quot;genesis-shelley.json&quot;</span></span><span>
</span><span id="line-109"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">$sel:nodeAlonzoGenesisFile:CardanoNodeArgs :: FilePath
</span><a href="CardanoNode.html#%24sel%3AnodeAlonzoGenesisFile%3ACardanoNodeArgs"><span class="hs-identifier hs-var">nodeAlonzoGenesisFile</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FilePath
</span><span class="hs-string">&quot;genesis-alonzo.json&quot;</span></span><span>
</span><span id="line-110"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">$sel:nodeConwayGenesisFile:CardanoNodeArgs :: FilePath
</span><a href="CardanoNode.html#%24sel%3AnodeConwayGenesisFile%3ACardanoNodeArgs"><span class="hs-identifier hs-var">nodeConwayGenesisFile</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FilePath
</span><span class="hs-string">&quot;genesis-conway.json&quot;</span></span><span>
</span><span id="line-111"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">$sel:nodeTopologyFile:CardanoNodeArgs :: FilePath
</span><a href="CardanoNode.html#%24sel%3AnodeTopologyFile%3ACardanoNodeArgs"><span class="hs-identifier hs-var">nodeTopologyFile</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FilePath
</span><span class="hs-string">&quot;topology.json&quot;</span></span><span>
</span><span id="line-112"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">$sel:nodeDatabaseDir:CardanoNodeArgs :: FilePath
</span><a href="CardanoNode.html#%24sel%3AnodeDatabaseDir%3ACardanoNodeArgs"><span class="hs-identifier hs-var">nodeDatabaseDir</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FilePath
</span><span class="hs-string">&quot;db&quot;</span></span><span>
</span><span id="line-113"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">$sel:nodeDlgCertFile:CardanoNodeArgs :: Maybe FilePath
</span><a href="CardanoNode.html#%24sel%3AnodeDlgCertFile%3ACardanoNodeArgs"><span class="hs-identifier hs-var">nodeDlgCertFile</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe FilePath
forall a. Maybe a
</span><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/GHC.Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span>
</span><span id="line-114"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">$sel:nodeSignKeyFile:CardanoNodeArgs :: Maybe FilePath
</span><a href="CardanoNode.html#%24sel%3AnodeSignKeyFile%3ACardanoNodeArgs"><span class="hs-identifier hs-var">nodeSignKeyFile</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe FilePath
forall a. Maybe a
</span><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/GHC.Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span>
</span><span id="line-115"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">$sel:nodeOpCertFile:CardanoNodeArgs :: Maybe FilePath
</span><a href="CardanoNode.html#%24sel%3AnodeOpCertFile%3ACardanoNodeArgs"><span class="hs-identifier hs-var">nodeOpCertFile</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe FilePath
forall a. Maybe a
</span><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/GHC.Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span>
</span><span id="line-116"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">$sel:nodeKesKeyFile:CardanoNodeArgs :: Maybe FilePath
</span><a href="CardanoNode.html#%24sel%3AnodeKesKeyFile%3ACardanoNodeArgs"><span class="hs-identifier hs-var">nodeKesKeyFile</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe FilePath
forall a. Maybe a
</span><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/GHC.Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span>
</span><span id="line-117"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">$sel:nodeVrfKeyFile:CardanoNodeArgs :: Maybe FilePath
</span><a href="CardanoNode.html#%24sel%3AnodeVrfKeyFile%3ACardanoNodeArgs"><span class="hs-identifier hs-var">nodeVrfKeyFile</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe FilePath
forall a. Maybe a
</span><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/GHC.Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span>
</span><span id="line-118"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">$sel:nodePort:CardanoNodeArgs :: Maybe Int
</span><a href="CardanoNode.html#%24sel%3AnodePort%3ACardanoNodeArgs"><span class="hs-identifier hs-var">nodePort</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe Int
forall a. Maybe a
</span><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/GHC.Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span>
</span><span id="line-119"></span><span>    </span><span class="hs-special">}</span><span>
</span><span id="line-120"></span><span>
</span><span id="line-121"></span><span class="hs-comment">-- | Configuration of ports from the perspective of a peer in the context of a</span><span>
</span><span id="line-122"></span><span class="hs-comment">-- fully sockected topology.</span><span>
</span><span id="line-123"></span><span class="hs-keyword">data</span><span> </span><span id="PortsConfig"><span class="annot"><a href="CardanoNode.html#PortsConfig"><span class="hs-identifier hs-var">PortsConfig</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="PortsConfig"><span class="annot"><a href="CardanoNode.html#PortsConfig"><span class="hs-identifier hs-var">PortsConfig</span></a></span></span><span>
</span><span id="line-124"></span><span>  </span><span class="hs-special">{</span><span> </span><span id="%24sel%3Aours%3APortsConfig"><span class="annot"><span class="annottext">PortsConfig -&gt; Int
</span><a href="CardanoNode.html#%24sel%3Aours%3APortsConfig"><span class="hs-identifier hs-var hs-var">ours</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="CardanoNode.html#Port"><span class="hs-identifier hs-type">Port</span></a></span><span>
</span><span id="line-125"></span><span>  </span><span class="annot"><span class="hs-comment">-- ^ Our node TCP port.</span></span><span>
</span><span id="line-126"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="%24sel%3Apeers%3APortsConfig"><span class="annot"><span class="annottext">PortsConfig -&gt; [Int]
</span><a href="CardanoNode.html#%24sel%3Apeers%3APortsConfig"><span class="hs-identifier hs-var hs-var">peers</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="CardanoNode.html#Port"><span class="hs-identifier hs-type">Port</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-127"></span><span>  </span><span class="annot"><span class="hs-comment">-- ^ Other peers TCP ports.</span></span><span>
</span><span id="line-128"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-129"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">stock</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679485996"><span id="local-6989586621679486001"><span id="local-6989586621679486004"><span class="annot"><span class="annottext">Int -&gt; PortsConfig -&gt; ShowS
[PortsConfig] -&gt; ShowS
PortsConfig -&gt; FilePath
(Int -&gt; PortsConfig -&gt; ShowS)
-&gt; (PortsConfig -&gt; FilePath)
-&gt; ([PortsConfig] -&gt; ShowS)
-&gt; Show PortsConfig
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; FilePath) -&gt; ([a] -&gt; ShowS) -&gt; Show a
$cshowsPrec :: Int -&gt; PortsConfig -&gt; ShowS
showsPrec :: Int -&gt; PortsConfig -&gt; ShowS
$cshow :: PortsConfig -&gt; FilePath
show :: PortsConfig -&gt; FilePath
$cshowList :: [PortsConfig] -&gt; ShowS
showList :: [PortsConfig] -&gt; ShowS
</span><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/GHC.Show.html#Show"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></a></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679486007"><span id="local-6989586621679486011"><span class="annot"><span class="annottext">PortsConfig -&gt; PortsConfig -&gt; Bool
(PortsConfig -&gt; PortsConfig -&gt; Bool)
-&gt; (PortsConfig -&gt; PortsConfig -&gt; Bool) -&gt; Eq PortsConfig
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
$c== :: PortsConfig -&gt; PortsConfig -&gt; Bool
== :: PortsConfig -&gt; PortsConfig -&gt; Bool
$c/= :: PortsConfig -&gt; PortsConfig -&gt; Bool
/= :: PortsConfig -&gt; PortsConfig -&gt; Bool
</span><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/ghc-prim-0.10.0/src/GHC.Classes.html#Eq"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></a></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679486014"><span id="local-6989586621679486016"><span class="annot"><span class="annottext">(forall x. PortsConfig -&gt; Rep PortsConfig x)
-&gt; (forall x. Rep PortsConfig x -&gt; PortsConfig)
-&gt; Generic PortsConfig
forall x. Rep PortsConfig x -&gt; PortsConfig
forall x. PortsConfig -&gt; Rep PortsConfig x
forall a.
(forall x. a -&gt; Rep a x) -&gt; (forall x. Rep a x -&gt; a) -&gt; Generic a
$cfrom :: forall x. PortsConfig -&gt; Rep PortsConfig x
from :: forall x. PortsConfig -&gt; Rep PortsConfig x
$cto :: forall x. Rep PortsConfig x -&gt; PortsConfig
to :: forall x. Rep PortsConfig x -&gt; PortsConfig
</span><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/GHC.Generics.html#Generic"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Generic</span></a></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-130"></span><span>
</span><span id="line-131"></span><span class="annot"><a href="CardanoNode.html#getCardanoNodeVersion"><span class="hs-identifier hs-type">getCardanoNodeVersion</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#IO"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="annot"><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/GHC.Base.html#String"><span class="hs-identifier hs-type">String</span></a></span><span>
</span><span id="line-132"></span><span id="getCardanoNodeVersion"><span class="annot"><span class="annottext">getCardanoNodeVersion :: IO FilePath
</span><a href="CardanoNode.html#getCardanoNodeVersion"><span class="hs-identifier hs-var hs-var">getCardanoNodeVersion</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-133"></span><span>  </span><span class="annot"><span class="annottext">FilePath -&gt; [FilePath] -&gt; FilePath -&gt; IO FilePath
</span><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/process-1.6.19.0/src/System.Process.html#readProcess"><span class="hs-identifier hs-var">readProcess</span></a></span><span> </span><span class="annot"><span class="annottext">FilePath
</span><span class="hs-string">&quot;cardano-node&quot;</span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">FilePath
</span><span class="hs-string">&quot;--version&quot;</span></span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">FilePath
</span><span class="hs-string">&quot;&quot;</span></span><span>
</span><span id="line-134"></span><span>
</span><span id="line-135"></span><span class="hs-comment">-- | Tries to find an communicate with an existing cardano-node running in given</span><span>
</span><span id="line-136"></span><span class="hs-comment">-- work directory. NOTE: This is using the default node socket name as defined</span><span>
</span><span id="line-137"></span><span class="hs-comment">-- by 'defaultCardanoNodeArgs'.</span><span>
</span><span id="line-138"></span><span class="annot"><a href="CardanoNode.html#findRunningCardanoNode"><span class="hs-identifier hs-type">findRunningCardanoNode</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Tracer</span></span><span> </span><span class="annot"><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#IO"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="annot"><a href="CardanoNode.html#NodeLog"><span class="hs-identifier hs-type">NodeLog</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/GHC.IO.html#FilePath"><span class="hs-identifier hs-type">FilePath</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Hydra.Cluster.Fixture.html#KnownNetwork"><span class="hs-identifier hs-type">KnownNetwork</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#IO"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/GHC.Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/time-1.12.2/src/Data.Time.Clock.Internal.NominalDiffTime.html#NominalDiffTime"><span class="hs-identifier hs-type">NominalDiffTime</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">DirectBackend</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-139"></span><span id="findRunningCardanoNode"><span class="annot"><span class="annottext">findRunningCardanoNode :: Tracer IO NodeLog
-&gt; FilePath
-&gt; KnownNetwork
-&gt; IO (Maybe (NominalDiffTime, DirectBackend))
</span><a href="CardanoNode.html#findRunningCardanoNode"><span class="hs-identifier hs-var hs-var">findRunningCardanoNode</span></a></span></span><span> </span><span id="local-6989586621679486020"><span class="annot"><span class="annottext">Tracer IO NodeLog
</span><a href="#local-6989586621679486020"><span class="hs-identifier hs-var">tracer</span></a></span></span><span> </span><span id="local-6989586621679486021"><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621679486021"><span class="hs-identifier hs-var">workDir</span></a></span></span><span> </span><span id="local-6989586621679486022"><span class="annot"><span class="annottext">KnownNetwork
</span><a href="#local-6989586621679486022"><span class="hs-identifier hs-var">knownNetwork</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-140"></span><span>  </span><span class="annot"><span class="annottext">Tracer IO NodeLog
-&gt; NetworkId
-&gt; SocketPath
-&gt; IO (Maybe (NominalDiffTime, DirectBackend))
</span><a href="CardanoNode.html#findRunningCardanoNode%27"><span class="hs-identifier hs-var">findRunningCardanoNode'</span></a></span><span> </span><span class="annot"><span class="annottext">Tracer IO NodeLog
</span><a href="#local-6989586621679486020"><span class="hs-identifier hs-var">tracer</span></a></span><span> </span><span class="annot"><span class="annottext">NetworkId
</span><a href="#local-6989586621679486024"><span class="hs-identifier hs-var">knownNetworkId</span></a></span><span> </span><span class="annot"><span class="annottext">SocketPath
</span><a href="#local-6989586621679486025"><span class="hs-identifier hs-var">socketPath</span></a></span><span>
</span><span id="line-141"></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-142"></span><span>  </span><span id="local-6989586621679486024"><span class="annot"><span class="annottext">knownNetworkId :: NetworkId
</span><a href="#local-6989586621679486024"><span class="hs-identifier hs-var hs-var">knownNetworkId</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">KnownNetwork -&gt; NetworkId
</span><a href="Hydra.Cluster.Fixture.html#toNetworkId"><span class="hs-identifier hs-var">toNetworkId</span></a></span><span> </span><span class="annot"><span class="annottext">KnownNetwork
</span><a href="#local-6989586621679486022"><span class="hs-identifier hs-var">knownNetwork</span></a></span><span>
</span><span id="line-143"></span><span>
</span><span id="line-144"></span><span>  </span><span id="local-6989586621679486025"><span class="annot"><span class="annottext">socketPath :: SocketPath
</span><a href="#local-6989586621679486025"><span class="hs-identifier hs-var hs-var">socketPath</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FilePath -&gt; SocketPath
forall content (direction :: FileDirection).
FilePath -&gt; File content direction
</span><span class="hs-identifier hs-var">File</span></span><span> </span><span class="annot"><span class="annottext">(FilePath -&gt; SocketPath) -&gt; FilePath -&gt; SocketPath
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621679486021"><span class="hs-identifier hs-var">workDir</span></a></span><span> </span><span class="annot"><span class="annottext">FilePath -&gt; ShowS
</span><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/filepath-1.4.301.0/src/System.FilePath.Posix.html#%3C%2F%3E"><span class="hs-operator hs-var">&lt;/&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621679486027"><span class="hs-identifier hs-var">nodeSocket</span></a></span><span>
</span><span id="line-145"></span><span>
</span><span id="line-146"></span><span>  </span><span class="annot"><a href="CardanoNode.html#CardanoNodeArgs"><span class="hs-identifier hs-type">CardanoNodeArgs</span></a></span><span class="hs-special">{</span><span id="local-6989586621679486027"><span class="annot"><span class="annottext">FilePath
$sel:nodeSocket:CardanoNodeArgs :: CardanoNodeArgs -&gt; FilePath
nodeSocket :: FilePath
</span><a href="CardanoNode.html#%24sel%3AnodeSocket%3ACardanoNodeArgs"><span class="hs-identifier hs-var hs-var">nodeSocket</span></a></span></span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CardanoNodeArgs
</span><a href="CardanoNode.html#defaultCardanoNodeArgs"><span class="hs-identifier hs-var">defaultCardanoNodeArgs</span></a></span><span>
</span><span id="line-147"></span><span>
</span><span id="line-148"></span><span class="hs-comment">-- | Tries to find an communicate with an existing cardano-node running in given</span><span>
</span><span id="line-149"></span><span class="hs-comment">-- network id and socket path.</span><span>
</span><span id="line-150"></span><span class="annot"><a href="CardanoNode.html#findRunningCardanoNode%27"><span class="hs-identifier hs-type">findRunningCardanoNode'</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Tracer</span></span><span> </span><span class="annot"><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#IO"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="annot"><a href="CardanoNode.html#NodeLog"><span class="hs-identifier hs-type">NodeLog</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">NetworkId</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">SocketPath</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#IO"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/GHC.Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/time-1.12.2/src/Data.Time.Clock.Internal.NominalDiffTime.html#NominalDiffTime"><span class="hs-identifier hs-type">NominalDiffTime</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">DirectBackend</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-151"></span><span id="findRunningCardanoNode%27"><span class="annot"><span class="annottext">findRunningCardanoNode' :: Tracer IO NodeLog
-&gt; NetworkId
-&gt; SocketPath
-&gt; IO (Maybe (NominalDiffTime, DirectBackend))
</span><a href="CardanoNode.html#findRunningCardanoNode%27"><span class="hs-identifier hs-var hs-var">findRunningCardanoNode'</span></a></span></span><span> </span><span id="local-6989586621679486028"><span class="annot"><span class="annottext">Tracer IO NodeLog
</span><a href="#local-6989586621679486028"><span class="hs-identifier hs-var">tracer</span></a></span></span><span> </span><span id="local-6989586621679486029"><span class="annot"><span class="annottext">NetworkId
</span><a href="#local-6989586621679486029"><span class="hs-identifier hs-var">networkId</span></a></span></span><span> </span><span id="local-6989586621679486030"><span class="annot"><span class="annottext">SocketPath
</span><a href="#local-6989586621679486030"><span class="hs-identifier hs-var">nodeSocket</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-152"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679486031"><span class="annot"><span class="annottext">backend :: DirectBackend
</span><a href="#local-6989586621679486031"><span class="hs-identifier hs-var hs-var">backend</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">DirectOptions -&gt; DirectBackend
</span><span class="hs-identifier hs-var">DirectBackend</span></span><span> </span><span class="annot"><span class="annottext">(DirectOptions -&gt; DirectBackend) -&gt; DirectOptions -&gt; DirectBackend
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">DirectOptions</span></span><span class="hs-special">{</span><span class="annot"><span class="annottext">NetworkId
networkId :: NetworkId
$sel:networkId:DirectOptions :: NetworkId
</span><a href="#local-6989586621679486029"><span class="hs-identifier hs-var hs-var">networkId</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">SocketPath
nodeSocket :: SocketPath
$sel:nodeSocket:DirectOptions :: SocketPath
</span><a href="#local-6989586621679486030"><span class="hs-identifier hs-var hs-var">nodeSocket</span></a></span><span class="hs-special">}</span><span>
</span><span id="line-153"></span><span>  </span><span class="annot"><span class="annottext">IO NominalDiffTime -&gt; IO (Either SomeException NominalDiffTime)
forall e a. Exception e =&gt; IO a -&gt; IO (Either e a)
forall (m :: * -&gt; *) e a.
(MonadCatch m, Exception e) =&gt;
m a -&gt; m (Either e a)
</span><span class="hs-identifier hs-var">try</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">DirectBackend -&gt; (MonadIO IO, MonadThrow IO) =&gt; IO NominalDiffTime
forall a (m :: * -&gt; *).
ChainBackend a =&gt;
a -&gt; (MonadIO m, MonadThrow m) =&gt; m NominalDiffTime
forall (m :: * -&gt; *).
DirectBackend -&gt; (MonadIO m, MonadThrow m) =&gt; m NominalDiffTime
</span><span class="hs-identifier hs-var">Backend.getBlockTime</span></span><span> </span><span class="annot"><span class="annottext">DirectBackend
</span><a href="#local-6989586621679486031"><span class="hs-identifier hs-var">backend</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">IO (Either SomeException NominalDiffTime)
-&gt; (Either SomeException NominalDiffTime
    -&gt; IO (Maybe (NominalDiffTime, DirectBackend)))
-&gt; IO (Maybe (NominalDiffTime, DirectBackend))
forall a b. IO a -&gt; (a -&gt; IO b) -&gt; IO b
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/GHC.Base.html#%3E%3E%3D"><span class="hs-operator hs-var">&gt;&gt;=</span></a></span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-154"></span><span>    </span><span class="annot"><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/Data.Either.html#Left"><span class="hs-identifier hs-type">Left</span></a></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679486038"><span class="annot"><span class="annottext">SomeException
</span><a href="#local-6989586621679486038"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/GHC.Exception.Type.html#SomeException"><span class="hs-identifier hs-type">SomeException</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-155"></span><span>      </span><span class="annot"><span class="annottext">Tracer IO NodeLog -&gt; NodeLog -&gt; IO ()
forall (m :: * -&gt; *) a. Tracer m a -&gt; a -&gt; m ()
</span><span class="hs-identifier hs-var">traceWith</span></span><span> </span><span class="annot"><span class="annottext">Tracer IO NodeLog
</span><a href="#local-6989586621679486028"><span class="hs-identifier hs-var">tracer</span></a></span><span> </span><span class="annot"><a href="CardanoNode.html#MsgQueryGenesisParametersFailed"><span class="hs-identifier hs-type">MsgQueryGenesisParametersFailed</span></a></span><span class="hs-special">{</span><span class="annot"><span class="annottext">$sel:err:MsgNodeCmdSpec :: Text
</span><a href="CardanoNode.html#%24sel%3Aerr%3AMsgNodeCmdSpec"><span class="hs-identifier hs-var">err</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SomeException -&gt; Text
forall b a. (Show a, IsString b) =&gt; a -&gt; b
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">SomeException
</span><a href="#local-6989586621679486038"><span class="hs-identifier hs-var">e</span></a></span><span class="hs-special">}</span><span> </span><span class="annot"><span class="annottext">IO ()
-&gt; Maybe (NominalDiffTime, DirectBackend)
-&gt; IO (Maybe (NominalDiffTime, DirectBackend))
forall (f :: * -&gt; *) a b. Functor f =&gt; f a -&gt; b -&gt; f b
</span><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/Data.Functor.html#%24%3E"><span class="hs-operator hs-var">$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe (NominalDiffTime, DirectBackend)
forall a. Maybe a
</span><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/GHC.Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span>
</span><span id="line-156"></span><span>    </span><span class="annot"><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/Data.Either.html#Right"><span class="hs-identifier hs-type">Right</span></a></span><span> </span><span id="local-6989586621679486041"><span class="annot"><span class="annottext">NominalDiffTime
</span><a href="#local-6989586621679486041"><span class="hs-identifier hs-var">blockTime</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-157"></span><span>      </span><span class="annot"><span class="annottext">Maybe (NominalDiffTime, DirectBackend)
-&gt; IO (Maybe (NominalDiffTime, DirectBackend))
forall a. a -&gt; IO a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/GHC.Base.html#pure"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">(Maybe (NominalDiffTime, DirectBackend)
 -&gt; IO (Maybe (NominalDiffTime, DirectBackend)))
-&gt; Maybe (NominalDiffTime, DirectBackend)
-&gt; IO (Maybe (NominalDiffTime, DirectBackend))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">(NominalDiffTime, DirectBackend)
-&gt; Maybe (NominalDiffTime, DirectBackend)
forall a. a -&gt; Maybe a
</span><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/GHC.Maybe.html#Just"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">NominalDiffTime
</span><a href="#local-6989586621679486041"><span class="hs-identifier hs-var">blockTime</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">DirectBackend
</span><a href="#local-6989586621679486031"><span class="hs-identifier hs-var">backend</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-158"></span><span>
</span><span id="line-159"></span><span class="hs-comment">-- | Start a single cardano-node devnet using the config from config/ and</span><span>
</span><span id="line-160"></span><span class="hs-comment">-- credentials from config/credentials/. Only the 'Faucet' actor will receive</span><span>
</span><span id="line-161"></span><span class="hs-comment">-- &quot;initialFunds&quot;. Use 'seedFromFaucet' to distribute funds other wallets.</span><span>
</span><span id="line-162"></span><span id="local-6989586621679485032"><span class="annot"><a href="CardanoNode.html#withCardanoNodeDevnet"><span class="hs-identifier hs-type">withCardanoNodeDevnet</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-163"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">Tracer</span></span><span> </span><span class="annot"><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#IO"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="annot"><a href="CardanoNode.html#NodeLog"><span class="hs-identifier hs-type">NodeLog</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-164"></span><span>  </span><span class="annot"><span class="hs-comment">-- | State directory in which credentials, db &amp; logs are persisted.</span></span><span>
</span><span id="line-165"></span><span>  </span><span class="annot"><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/GHC.IO.html#FilePath"><span class="hs-identifier hs-type">FilePath</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-166"></span><span>  </span><span class="hs-special">(</span><span class="annot"><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/time-1.12.2/src/Data.Time.Clock.Internal.NominalDiffTime.html#NominalDiffTime"><span class="hs-identifier hs-type">NominalDiffTime</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">DirectBackend</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#IO"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679485032"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-167"></span><span>  </span><span class="annot"><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#IO"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679485032"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-168"></span><span id="withCardanoNodeDevnet"><span class="annot"><span class="annottext">withCardanoNodeDevnet :: forall a.
Tracer IO NodeLog
-&gt; FilePath -&gt; (NominalDiffTime -&gt; DirectBackend -&gt; IO a) -&gt; IO a
</span><a href="CardanoNode.html#withCardanoNodeDevnet"><span class="hs-identifier hs-var hs-var">withCardanoNodeDevnet</span></a></span></span><span> </span><span id="local-6989586621679486044"><span class="annot"><span class="annottext">Tracer IO NodeLog
</span><a href="#local-6989586621679486044"><span class="hs-identifier hs-var">tracer</span></a></span></span><span> </span><span id="local-6989586621679486045"><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621679486045"><span class="hs-identifier hs-var">stateDirectory</span></a></span></span><span> </span><span id="local-6989586621679486046"><span class="annot"><span class="annottext">NominalDiffTime -&gt; DirectBackend -&gt; IO a
</span><a href="#local-6989586621679486046"><span class="hs-identifier hs-var">action</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-169"></span><span>  </span><span id="local-6989586621679486047"><span class="annot"><span class="annottext">CardanoNodeArgs
</span><a href="#local-6989586621679486047"><span class="hs-identifier hs-var">args</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">FilePath -&gt; IO CardanoNodeArgs
</span><a href="CardanoNode.html#setupCardanoDevnet"><span class="hs-identifier hs-var">setupCardanoDevnet</span></a></span><span> </span><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621679486045"><span class="hs-identifier hs-var">stateDirectory</span></a></span><span>
</span><span id="line-170"></span><span>  </span><span class="annot"><span class="annottext">Tracer IO NodeLog
-&gt; FilePath
-&gt; CardanoNodeArgs
-&gt; (NominalDiffTime -&gt; DirectBackend -&gt; IO a)
-&gt; IO a
forall a.
Tracer IO NodeLog
-&gt; FilePath
-&gt; CardanoNodeArgs
-&gt; (NominalDiffTime -&gt; DirectBackend -&gt; IO a)
-&gt; IO a
</span><a href="CardanoNode.html#withCardanoNode"><span class="hs-identifier hs-var">withCardanoNode</span></a></span><span> </span><span class="annot"><span class="annottext">Tracer IO NodeLog
</span><a href="#local-6989586621679486044"><span class="hs-identifier hs-var">tracer</span></a></span><span> </span><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621679486045"><span class="hs-identifier hs-var">stateDirectory</span></a></span><span> </span><span class="annot"><span class="annottext">CardanoNodeArgs
</span><a href="#local-6989586621679486047"><span class="hs-identifier hs-var">args</span></a></span><span> </span><span class="annot"><span class="annottext">NominalDiffTime -&gt; DirectBackend -&gt; IO a
</span><a href="#local-6989586621679486046"><span class="hs-identifier hs-var">action</span></a></span><span>
</span><span id="line-171"></span><span>
</span><span id="line-172"></span><span id="local-6989586621679485036"><span class="annot"><a href="CardanoNode.html#withBlockfrostBackend"><span class="hs-identifier hs-type">withBlockfrostBackend</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-173"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">Tracer</span></span><span> </span><span class="annot"><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#IO"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="annot"><a href="CardanoNode.html#NodeLog"><span class="hs-identifier hs-type">NodeLog</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-174"></span><span>  </span><span class="annot"><span class="hs-comment">-- | State directory in which credentials, db &amp; logs are persisted.</span></span><span>
</span><span id="line-175"></span><span>  </span><span class="annot"><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/GHC.IO.html#FilePath"><span class="hs-identifier hs-type">FilePath</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-176"></span><span>  </span><span class="hs-special">(</span><span class="annot"><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/time-1.12.2/src/Data.Time.Clock.Internal.NominalDiffTime.html#NominalDiffTime"><span class="hs-identifier hs-type">NominalDiffTime</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">BlockfrostBackend</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#IO"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679485036"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-177"></span><span>  </span><span class="annot"><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#IO"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679485036"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-178"></span><span id="withBlockfrostBackend"><span class="annot"><span class="annottext">withBlockfrostBackend :: forall a.
Tracer IO NodeLog
-&gt; FilePath
-&gt; (NominalDiffTime -&gt; BlockfrostBackend -&gt; IO a)
-&gt; IO a
</span><a href="CardanoNode.html#withBlockfrostBackend"><span class="hs-identifier hs-var hs-var">withBlockfrostBackend</span></a></span></span><span> </span><span id="local-6989586621679486057"><span class="annot"><span class="annottext">Tracer IO NodeLog
</span><a href="#local-6989586621679486057"><span class="hs-identifier hs-var">_tracer</span></a></span></span><span> </span><span id="local-6989586621679486058"><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621679486058"><span class="hs-identifier hs-var">stateDirectory</span></a></span></span><span> </span><span id="local-6989586621679486059"><span class="annot"><span class="annottext">NominalDiffTime -&gt; BlockfrostBackend -&gt; IO a
</span><a href="#local-6989586621679486059"><span class="hs-identifier hs-var">action</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-179"></span><span>  </span><span id="local-6989586621679486060"><span class="annot"><span class="annottext">CardanoNodeArgs
</span><a href="#local-6989586621679486060"><span class="hs-identifier hs-var">args</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">FilePath -&gt; IO CardanoNodeArgs
</span><a href="CardanoNode.html#setupCardanoDevnet"><span class="hs-identifier hs-var">setupCardanoDevnet</span></a></span><span> </span><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621679486058"><span class="hs-identifier hs-var">stateDirectory</span></a></span><span>
</span><span id="line-180"></span><span>  </span><span id="local-6989586621679486061"><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621679486061"><span class="hs-identifier hs-var">shelleyGenesis</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">FilePath -&gt; IO ByteString
forall (m :: * -&gt; *). MonadIO m =&gt; FilePath -&gt; m ByteString
</span><span class="hs-identifier hs-var">readFileBS</span></span><span> </span><span class="annot"><span class="annottext">(FilePath -&gt; IO ByteString)
-&gt; (ByteString -&gt; IO Value) -&gt; FilePath -&gt; IO Value
forall (m :: * -&gt; *) a b c.
Monad m =&gt;
(a -&gt; m b) -&gt; (b -&gt; m c) -&gt; a -&gt; m c
</span><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/Control.Monad.html#%3E%3D%3E"><span class="hs-operator hs-var">&gt;=&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; IO Value
forall a. FromJSON a =&gt; ByteString -&gt; IO a
</span><a href="CardanoNode.html#unsafeDecodeJson"><span class="hs-identifier hs-var">unsafeDecodeJson</span></a></span><span> </span><span class="annot"><span class="annottext">(FilePath -&gt; IO Value) -&gt; FilePath -&gt; IO Value
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621679486058"><span class="hs-identifier hs-var">stateDirectory</span></a></span><span> </span><span class="annot"><span class="annottext">FilePath -&gt; ShowS
</span><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/filepath-1.4.301.0/src/System.FilePath.Posix.html#%3C%2F%3E"><span class="hs-operator hs-var">&lt;/&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">CardanoNodeArgs -&gt; FilePath
</span><a href="CardanoNode.html#%24sel%3AnodeShelleyGenesisFile%3ACardanoNodeArgs"><span class="hs-identifier hs-var">nodeShelleyGenesisFile</span></a></span><span> </span><span class="annot"><span class="annottext">CardanoNodeArgs
</span><a href="#local-6989586621679486060"><span class="hs-identifier hs-var">args</span></a></span><span>
</span><span id="line-181"></span><span>  </span><span id="local-6989586621679486065"><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621679486065"><span class="hs-identifier hs-var">bfProjectPath</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Int -&gt; FilePath -&gt; IO FilePath
</span><a href="CardanoNode.html#findFileStartingAtDirectory"><span class="hs-identifier hs-var">findFileStartingAtDirectory</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">3</span></span><span> </span><span class="annot"><span class="annottext">FilePath
</span><span class="hs-identifier hs-var">Backend.blockfrostProjectPath</span></span><span>
</span><span id="line-182"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679486068"><span class="annot"><span class="annottext">backend :: BlockfrostBackend
</span><a href="#local-6989586621679486068"><span class="hs-identifier hs-var hs-var">backend</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">BlockfrostOptions -&gt; BlockfrostBackend
</span><span class="hs-identifier hs-var">BlockfrostBackend</span></span><span> </span><span class="annot"><span class="annottext">(BlockfrostOptions -&gt; BlockfrostBackend)
-&gt; BlockfrostOptions -&gt; BlockfrostBackend
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">BlockfrostOptions
</span><span class="hs-identifier hs-var">defaultBlockfrostOptions</span></span><span class="hs-special">{</span><span class="annot"><span class="hs-identifier hs-var">projectPath</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621679486065"><span class="hs-identifier hs-type">bfProjectPath</span></a></span><span class="hs-special">}</span><span>
</span><span id="line-183"></span><span>  </span><span class="annot"><span class="annottext">NominalDiffTime -&gt; BlockfrostBackend -&gt; IO a
</span><a href="#local-6989586621679486059"><span class="hs-identifier hs-var">action</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Value -&gt; NominalDiffTime
</span><a href="CardanoNode.html#getShelleyGenesisBlockTime"><span class="hs-identifier hs-var">getShelleyGenesisBlockTime</span></a></span><span> </span><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621679486061"><span class="hs-identifier hs-var">shelleyGenesis</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">BlockfrostBackend
</span><a href="#local-6989586621679486068"><span class="hs-identifier hs-var">backend</span></a></span><span>
</span><span id="line-184"></span><span>
</span><span id="line-185"></span><span class="hs-comment">-- | Find the given file in the current directory or its parents.</span><span>
</span><span id="line-186"></span><span class="hs-comment">--</span><span>
</span><span id="line-187"></span><span class="hs-comment">-- This function starts from the current working directory and checks if the specified file exists there.</span><span>
</span><span id="line-188"></span><span class="hs-comment">-- If not found, it recursively checks the parent directories up to the given maximum depth.</span><span>
</span><span id="line-189"></span><span class="annot"><a href="CardanoNode.html#findFileStartingAtDirectory"><span class="hs-identifier hs-type">findFileStartingAtDirectory</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#Int"><span class="hs-identifier hs-type">Int</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/GHC.IO.html#FilePath"><span class="hs-identifier hs-type">FilePath</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#IO"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="annot"><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/GHC.IO.html#FilePath"><span class="hs-identifier hs-type">FilePath</span></a></span><span>
</span><span id="line-190"></span><span id="findFileStartingAtDirectory"><span class="annot"><span class="annottext">findFileStartingAtDirectory :: Int -&gt; FilePath -&gt; IO FilePath
</span><a href="CardanoNode.html#findFileStartingAtDirectory"><span class="hs-identifier hs-var hs-var">findFileStartingAtDirectory</span></a></span></span><span> </span><span id="local-6989586621679486072"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679486072"><span class="hs-identifier hs-var">maxDepth</span></a></span></span><span> </span><span id="local-6989586621679486073"><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621679486073"><span class="hs-identifier hs-var">fileName</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-191"></span><span>  </span><span id="local-6989586621679486074"><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621679486074"><span class="hs-identifier hs-var">cwd</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">IO FilePath
</span><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/directory-1.3.8.5/src/System.Directory.html#getCurrentDirectory"><span class="hs-identifier hs-var">getCurrentDirectory</span></a></span><span>
</span><span id="line-192"></span><span>  </span><span class="annot"><span class="annottext">Int -&gt; FilePath -&gt; IO FilePath
</span><a href="#local-6989586621679486075"><span class="hs-identifier hs-var">findInDir</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679486072"><span class="hs-identifier hs-var">maxDepth</span></a></span><span> </span><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621679486074"><span class="hs-identifier hs-var">cwd</span></a></span><span>
</span><span id="line-193"></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-194"></span><span>  </span><span class="annot"><a href="#local-6989586621679486075"><span class="hs-identifier hs-type">findInDir</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#Int"><span class="hs-identifier hs-type">Int</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/GHC.IO.html#FilePath"><span class="hs-identifier hs-type">FilePath</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#IO"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="annot"><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/GHC.IO.html#FilePath"><span class="hs-identifier hs-type">FilePath</span></a></span><span>
</span><span id="line-195"></span><span>  </span><span id="local-6989586621679486075"><span class="annot"><span class="annottext">findInDir :: Int -&gt; FilePath -&gt; IO FilePath
</span><a href="#local-6989586621679486075"><span class="hs-identifier hs-var hs-var">findInDir</span></a></span></span><span> </span><span id="local-6989586621679486076"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679486076"><span class="hs-identifier hs-var">depth</span></a></span></span><span> </span><span id="local-6989586621679486077"><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621679486077"><span class="hs-identifier hs-var">dir</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-196"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679486078"><span class="annot"><span class="annottext">path :: FilePath
</span><a href="#local-6989586621679486078"><span class="hs-identifier hs-var hs-var">path</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621679486077"><span class="hs-identifier hs-var">dir</span></a></span><span> </span><span class="annot"><span class="annottext">FilePath -&gt; ShowS
</span><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/filepath-1.4.301.0/src/System.FilePath.Posix.html#%3C%2F%3E"><span class="hs-operator hs-var">&lt;/&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621679486073"><span class="hs-identifier hs-var">fileName</span></a></span><span>
</span><span id="line-197"></span><span>    </span><span id="local-6989586621679486079"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679486079"><span class="hs-identifier hs-var">exists</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">FilePath -&gt; IO Bool
</span><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/directory-1.3.8.5/src/System.Directory.html#doesFileExist"><span class="hs-identifier hs-var">doesFileExist</span></a></span><span> </span><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621679486078"><span class="hs-identifier hs-var">path</span></a></span><span>
</span><span id="line-198"></span><span>    </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679486079"><span class="hs-identifier hs-var">exists</span></a></span><span>
</span><span id="line-199"></span><span>      </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">FilePath -&gt; IO FilePath
forall a. a -&gt; IO a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/GHC.Base.html#pure"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621679486078"><span class="hs-identifier hs-var">path</span></a></span><span>
</span><span id="line-200"></span><span>      </span><span class="hs-keyword">else</span><span>
</span><span id="line-201"></span><span>        </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679486076"><span class="hs-identifier hs-var">depth</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/ghc-prim-0.10.0/src/GHC.Classes.html#%3C%3D"><span class="hs-operator hs-var">&lt;=</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span>
</span><span id="line-202"></span><span>          </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">Text -&gt; IO FilePath
forall a t. (HasCallStack, IsText t) =&gt; t -&gt; a
</span><span class="hs-identifier hs-var">error</span></span><span> </span><span class="annot"><span class="annottext">(Text -&gt; IO FilePath) -&gt; Text -&gt; IO FilePath
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;Could not locate the Blockfrost project file at &quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/GHC.Base.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">FilePath -&gt; Text
</span><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/text-2.0.2/src/Data.Text.Internal.html#pack"><span class="hs-identifier hs-var">pack</span></a></span><span> </span><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621679486077"><span class="hs-identifier hs-var">dir</span></a></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/GHC.Base.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot; or &quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/GHC.Base.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Text
forall b a. (Show a, IsString b) =&gt; a -&gt; b
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679486076"><span class="hs-identifier hs-var">depth</span></a></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/GHC.Base.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot; above.&quot;</span></span><span>
</span><span id="line-203"></span><span>          </span><span class="hs-keyword">else</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-204"></span><span>            </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679486082"><span class="annot"><span class="annottext">parent :: FilePath
</span><a href="#local-6989586621679486082"><span class="hs-identifier hs-var hs-var">parent</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FilePath
</span><span class="hs-string">&quot;..&quot;</span></span><span> </span><span class="annot"><span class="annottext">FilePath -&gt; ShowS
</span><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/filepath-1.4.301.0/src/System.FilePath.Posix.html#%3C%2F%3E"><span class="hs-operator hs-var">&lt;/&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">ShowS
</span><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/filepath-1.4.301.0/src/System.FilePath.Posix.html#takeDirectory"><span class="hs-identifier hs-var">takeDirectory</span></a></span><span> </span><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621679486077"><span class="hs-identifier hs-var">dir</span></a></span><span>
</span><span id="line-205"></span><span>            </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621679486082"><span class="hs-identifier hs-var">parent</span></a></span><span> </span><span class="annot"><span class="annottext">FilePath -&gt; FilePath -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/ghc-prim-0.10.0/src/GHC.Classes.html#%3D%3D"><span class="hs-operator hs-var">==</span></a></span><span> </span><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621679486077"><span class="hs-identifier hs-var">dir</span></a></span><span>
</span><span id="line-206"></span><span>              </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">Text -&gt; IO FilePath
forall a t. (HasCallStack, IsText t) =&gt; t -&gt; a
</span><span class="hs-identifier hs-var">error</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;Reached root directory without finding the Blockfrost project file.&quot;</span></span><span>
</span><span id="line-207"></span><span>              </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">Int -&gt; FilePath -&gt; IO FilePath
</span><a href="#local-6989586621679486075"><span class="hs-identifier hs-var">findInDir</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679486076"><span class="hs-identifier hs-var">depth</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/GHC.Num.html#-"><span class="hs-glyph hs-var">-</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621679486082"><span class="hs-identifier hs-var">parent</span></a></span><span>
</span><span id="line-208"></span><span>
</span><span id="line-209"></span><span class="annot"><a href="CardanoNode.html#withBackend"><span class="hs-identifier hs-type">withBackend</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-210"></span><span>  </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679485051"><span class="annot"><a href="#local-6989586621679485051"><span class="hs-identifier hs-type">a</span></a></span></span><span class="hs-operator">.</span><span>
</span><span id="line-211"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">Tracer</span></span><span> </span><span class="annot"><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#IO"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="annot"><a href="CardanoNode.html#NodeLog"><span class="hs-identifier hs-type">NodeLog</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-212"></span><span>  </span><span class="annot"><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/GHC.IO.html#FilePath"><span class="hs-identifier hs-type">FilePath</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-213"></span><span>  </span><span class="hs-special">(</span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679485050"><span class="annot"><a href="#local-6989586621679485050"><span class="hs-identifier hs-type">backend</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ChainBackend</span></span><span> </span><span class="annot"><a href="#local-6989586621679485050"><span class="hs-identifier hs-type">backend</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/time-1.12.2/src/Data.Time.Clock.Internal.NominalDiffTime.html#NominalDiffTime"><span class="hs-identifier hs-type">NominalDiffTime</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679485050"><span class="hs-identifier hs-type">backend</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#IO"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679485051"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-214"></span><span>  </span><span class="annot"><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#IO"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679485051"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-215"></span><span id="withBackend"><span class="annot"><span class="annottext">withBackend :: forall a.
Tracer IO NodeLog
-&gt; FilePath
-&gt; (forall backend.
    ChainBackend backend =&gt;
    NominalDiffTime -&gt; backend -&gt; IO a)
-&gt; IO a
</span><a href="CardanoNode.html#withBackend"><span class="hs-identifier hs-var hs-var">withBackend</span></a></span></span><span> </span><span id="local-6989586621679486094"><span class="annot"><span class="annottext">Tracer IO NodeLog
</span><a href="#local-6989586621679486094"><span class="hs-identifier hs-var">tracer</span></a></span></span><span> </span><span id="local-6989586621679486095"><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621679486095"><span class="hs-identifier hs-var">stateDirectory</span></a></span></span><span> </span><span id="local-6989586621679486096"><span class="annot"><span class="annottext">forall backend.
ChainBackend backend =&gt;
NominalDiffTime -&gt; backend -&gt; IO a
</span><a href="#local-6989586621679486096"><span class="hs-identifier hs-var">action</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-216"></span><span>  </span><span id="local-6989586621679486097"><span class="annot"><span class="annottext">Maybe FilePath
</span><a href="#local-6989586621679486097"><span class="hs-identifier hs-var">backend</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">FilePath -&gt; IO (Maybe FilePath)
forall (m :: * -&gt; *). MonadIO m =&gt; FilePath -&gt; m (Maybe FilePath)
</span><span class="hs-identifier hs-var">lookupEnv</span></span><span> </span><span class="annot"><span class="annottext">FilePath
</span><span class="hs-string">&quot;HYDRA_BACKEND&quot;</span></span><span>
</span><span id="line-217"></span><span>  </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Maybe FilePath
</span><a href="#local-6989586621679486097"><span class="hs-identifier hs-var">backend</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-218"></span><span>    </span><span class="annot"><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/GHC.Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span class="annot"><span class="annottext">FilePath
</span><span class="hs-string">&quot;direct&quot;</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Tracer IO NodeLog
-&gt; FilePath -&gt; (NominalDiffTime -&gt; DirectBackend -&gt; IO a) -&gt; IO a
forall a.
Tracer IO NodeLog
-&gt; FilePath -&gt; (NominalDiffTime -&gt; DirectBackend -&gt; IO a) -&gt; IO a
</span><a href="CardanoNode.html#withCardanoNodeDevnet"><span class="hs-identifier hs-var">withCardanoNodeDevnet</span></a></span><span> </span><span class="annot"><span class="annottext">Tracer IO NodeLog
</span><a href="#local-6989586621679486094"><span class="hs-identifier hs-var">tracer</span></a></span><span> </span><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621679486095"><span class="hs-identifier hs-var">stateDirectory</span></a></span><span> </span><span class="annot"><span class="annottext">NominalDiffTime -&gt; DirectBackend -&gt; IO a
forall backend.
ChainBackend backend =&gt;
NominalDiffTime -&gt; backend -&gt; IO a
</span><a href="#local-6989586621679486096"><span class="hs-identifier hs-var">action</span></a></span><span>
</span><span id="line-219"></span><span>    </span><span class="annot"><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/GHC.Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span class="annot"><span class="annottext">FilePath
</span><span class="hs-string">&quot;blockfrost&quot;</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Tracer IO NodeLog
-&gt; FilePath
-&gt; (NominalDiffTime -&gt; BlockfrostBackend -&gt; IO a)
-&gt; IO a
forall a.
Tracer IO NodeLog
-&gt; FilePath
-&gt; (NominalDiffTime -&gt; BlockfrostBackend -&gt; IO a)
-&gt; IO a
</span><a href="CardanoNode.html#withBlockfrostBackend"><span class="hs-identifier hs-var">withBlockfrostBackend</span></a></span><span> </span><span class="annot"><span class="annottext">Tracer IO NodeLog
</span><a href="#local-6989586621679486094"><span class="hs-identifier hs-var">tracer</span></a></span><span> </span><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621679486095"><span class="hs-identifier hs-var">stateDirectory</span></a></span><span> </span><span class="annot"><span class="annottext">NominalDiffTime -&gt; BlockfrostBackend -&gt; IO a
forall backend.
ChainBackend backend =&gt;
NominalDiffTime -&gt; backend -&gt; IO a
</span><a href="#local-6989586621679486096"><span class="hs-identifier hs-var">action</span></a></span><span>
</span><span id="line-220"></span><span>    </span><span class="annot"><span class="annottext">Maybe FilePath
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Tracer IO NodeLog
-&gt; FilePath -&gt; (NominalDiffTime -&gt; DirectBackend -&gt; IO a) -&gt; IO a
forall a.
Tracer IO NodeLog
-&gt; FilePath -&gt; (NominalDiffTime -&gt; DirectBackend -&gt; IO a) -&gt; IO a
</span><a href="CardanoNode.html#withCardanoNodeDevnet"><span class="hs-identifier hs-var">withCardanoNodeDevnet</span></a></span><span> </span><span class="annot"><span class="annottext">Tracer IO NodeLog
</span><a href="#local-6989586621679486094"><span class="hs-identifier hs-var">tracer</span></a></span><span> </span><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621679486095"><span class="hs-identifier hs-var">stateDirectory</span></a></span><span> </span><span class="annot"><span class="annottext">NominalDiffTime -&gt; DirectBackend -&gt; IO a
forall backend.
ChainBackend backend =&gt;
NominalDiffTime -&gt; backend -&gt; IO a
</span><a href="#local-6989586621679486096"><span class="hs-identifier hs-var">action</span></a></span><span>
</span><span id="line-221"></span><span>
</span><span id="line-222"></span><span class="annot"><span class="hs-comment">-- | Run a cardano-node as normal network participant on a known network.</span></span><span>
</span><span id="line-223"></span><span id="local-6989586621679485054"><span class="annot"><a href="CardanoNode.html#withCardanoNodeOnKnownNetwork"><span class="hs-identifier hs-type">withCardanoNodeOnKnownNetwork</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-224"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">Tracer</span></span><span> </span><span class="annot"><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#IO"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="annot"><a href="CardanoNode.html#NodeLog"><span class="hs-identifier hs-type">NodeLog</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-225"></span><span>  </span><span class="annot"><span class="hs-comment">-- | State directory in which node db &amp; logs are persisted.</span></span><span>
</span><span id="line-226"></span><span>  </span><span class="annot"><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/GHC.IO.html#FilePath"><span class="hs-identifier hs-type">FilePath</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-227"></span><span>  </span><span class="annot"><span class="hs-comment">-- | A well-known Cardano network to connect to.</span></span><span>
</span><span id="line-228"></span><span>  </span><span class="annot"><a href="Hydra.Cluster.Fixture.html#KnownNetwork"><span class="hs-identifier hs-type">KnownNetwork</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-229"></span><span>  </span><span class="hs-special">(</span><span class="annot"><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/time-1.12.2/src/Data.Time.Clock.Internal.NominalDiffTime.html#NominalDiffTime"><span class="hs-identifier hs-type">NominalDiffTime</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">DirectBackend</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#IO"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679485054"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-230"></span><span>  </span><span class="annot"><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#IO"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679485054"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-231"></span><span id="withCardanoNodeOnKnownNetwork"><span class="annot"><span class="annottext">withCardanoNodeOnKnownNetwork :: forall a.
Tracer IO NodeLog
-&gt; FilePath
-&gt; KnownNetwork
-&gt; (NominalDiffTime -&gt; DirectBackend -&gt; IO a)
-&gt; IO a
</span><a href="CardanoNode.html#withCardanoNodeOnKnownNetwork"><span class="hs-identifier hs-var hs-var">withCardanoNodeOnKnownNetwork</span></a></span></span><span> </span><span id="local-6989586621679486134"><span class="annot"><span class="annottext">Tracer IO NodeLog
</span><a href="#local-6989586621679486134"><span class="hs-identifier hs-var">tracer</span></a></span></span><span> </span><span id="local-6989586621679486135"><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621679486135"><span class="hs-identifier hs-var">stateDirectory</span></a></span></span><span> </span><span id="local-6989586621679486136"><span class="annot"><span class="annottext">KnownNetwork
</span><a href="#local-6989586621679486136"><span class="hs-identifier hs-var">knownNetwork</span></a></span></span><span> </span><span id="local-6989586621679486137"><span class="annot"><span class="annottext">NominalDiffTime -&gt; DirectBackend -&gt; IO a
</span><a href="#local-6989586621679486137"><span class="hs-identifier hs-var">action</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-232"></span><span>  </span><span class="annot"><span class="annottext">IO ()
</span><a href="#local-6989586621679486138"><span class="hs-identifier hs-var">copyKnownNetworkFiles</span></a></span><span>
</span><span id="line-233"></span><span>  </span><span class="annot"><span class="annottext">Tracer IO NodeLog
-&gt; FilePath
-&gt; CardanoNodeArgs
-&gt; (NominalDiffTime -&gt; DirectBackend -&gt; IO a)
-&gt; IO a
forall a.
Tracer IO NodeLog
-&gt; FilePath
-&gt; CardanoNodeArgs
-&gt; (NominalDiffTime -&gt; DirectBackend -&gt; IO a)
-&gt; IO a
</span><a href="CardanoNode.html#withCardanoNode"><span class="hs-identifier hs-var">withCardanoNode</span></a></span><span> </span><span class="annot"><span class="annottext">Tracer IO NodeLog
</span><a href="#local-6989586621679486134"><span class="hs-identifier hs-var">tracer</span></a></span><span> </span><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621679486135"><span class="hs-identifier hs-var">stateDirectory</span></a></span><span> </span><span class="annot"><span class="annottext">CardanoNodeArgs
</span><a href="#local-6989586621679486139"><span class="hs-identifier hs-var">args</span></a></span><span> </span><span class="annot"><span class="annottext">NominalDiffTime -&gt; DirectBackend -&gt; IO a
</span><a href="#local-6989586621679486137"><span class="hs-identifier hs-var">action</span></a></span><span>
</span><span id="line-234"></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-235"></span><span>  </span><span id="local-6989586621679486139"><span class="annot"><span class="annottext">args :: CardanoNodeArgs
</span><a href="#local-6989586621679486139"><span class="hs-identifier hs-var hs-var">args</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-236"></span><span>    </span><span class="annot"><span class="annottext">CardanoNodeArgs
</span><a href="CardanoNode.html#defaultCardanoNodeArgs"><span class="hs-identifier hs-var">defaultCardanoNodeArgs</span></a></span><span>
</span><span id="line-237"></span><span>      </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="CardanoNode.html#%24sel%3AnodeConfigFile%3ACardanoNodeArgs"><span class="hs-identifier hs-var">nodeConfigFile</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="hs-string">&quot;config.json&quot;</span></span><span>
</span><span id="line-238"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="CardanoNode.html#%24sel%3AnodeTopologyFile%3ACardanoNodeArgs"><span class="hs-identifier hs-var">nodeTopologyFile</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="hs-string">&quot;topology.json&quot;</span></span><span>
</span><span id="line-239"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="CardanoNode.html#%24sel%3AnodeByronGenesisFile%3ACardanoNodeArgs"><span class="hs-identifier hs-var">nodeByronGenesisFile</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="hs-string">&quot;byron-genesis.json&quot;</span></span><span>
</span><span id="line-240"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="CardanoNode.html#%24sel%3AnodeShelleyGenesisFile%3ACardanoNodeArgs"><span class="hs-identifier hs-var">nodeShelleyGenesisFile</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="hs-string">&quot;shelley-genesis.json&quot;</span></span><span>
</span><span id="line-241"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="CardanoNode.html#%24sel%3AnodeAlonzoGenesisFile%3ACardanoNodeArgs"><span class="hs-identifier hs-var">nodeAlonzoGenesisFile</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="hs-string">&quot;alonzo-genesis.json&quot;</span></span><span>
</span><span id="line-242"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="CardanoNode.html#%24sel%3AnodeConwayGenesisFile%3ACardanoNodeArgs"><span class="hs-identifier hs-var">nodeConwayGenesisFile</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="hs-string">&quot;conway-genesis.json&quot;</span></span><span>
</span><span id="line-243"></span><span>      </span><span class="hs-special">}</span><span>
</span><span id="line-244"></span><span>
</span><span id="line-245"></span><span>  </span><span class="hs-comment">-- Copy/download configuration files for a known network</span><span>
</span><span id="line-246"></span><span>  </span><span id="local-6989586621679486138"><span class="annot"><span class="annottext">copyKnownNetworkFiles :: IO ()
</span><a href="#local-6989586621679486138"><span class="hs-identifier hs-var hs-var">copyKnownNetworkFiles</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-247"></span><span>    </span><span class="annot"><span class="annottext">[FilePath] -&gt; (FilePath -&gt; IO ()) -&gt; IO ()
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Foldable t, Monad m) =&gt;
t a -&gt; (a -&gt; m b) -&gt; m ()
</span><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/Data.Foldable.html#forM_"><span class="hs-identifier hs-var">forM_</span></a></span><span>
</span><span id="line-248"></span><span>      </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">FilePath
</span><span class="hs-string">&quot;config.json&quot;</span></span><span>
</span><span id="line-249"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">FilePath
</span><span class="hs-string">&quot;topology.json&quot;</span></span><span>
</span><span id="line-250"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">FilePath
</span><span class="hs-string">&quot;byron-genesis.json&quot;</span></span><span>
</span><span id="line-251"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">FilePath
</span><span class="hs-string">&quot;shelley-genesis.json&quot;</span></span><span>
</span><span id="line-252"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">FilePath
</span><span class="hs-string">&quot;alonzo-genesis.json&quot;</span></span><span>
</span><span id="line-253"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">FilePath
</span><span class="hs-string">&quot;conway-genesis.json&quot;</span></span><span>
</span><span id="line-254"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">FilePath
</span><span class="hs-string">&quot;peer-snapshot.json&quot;</span></span><span>
</span><span id="line-255"></span><span>      </span><span class="hs-special">]</span><span>
</span><span id="line-256"></span><span>      </span><span class="annot"><span class="annottext">((FilePath -&gt; IO ()) -&gt; IO ()) -&gt; (FilePath -&gt; IO ()) -&gt; IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679486141"><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621679486141"><span class="hs-identifier hs-var">fn</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-257"></span><span>        </span><span class="annot"><span class="annottext">Bool -&gt; FilePath -&gt; IO ()
</span><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/directory-1.3.8.5/src/System.Directory.html#createDirectoryIfMissing"><span class="hs-identifier hs-var">createDirectoryIfMissing</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#True"><span class="hs-identifier hs-var">True</span></a></span><span> </span><span class="annot"><span class="annottext">(FilePath -&gt; IO ()) -&gt; FilePath -&gt; IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621679486135"><span class="hs-identifier hs-var">stateDirectory</span></a></span><span> </span><span class="annot"><span class="annottext">FilePath -&gt; ShowS
</span><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/filepath-1.4.301.0/src/System.FilePath.Posix.html#%3C%2F%3E"><span class="hs-operator hs-var">&lt;/&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">ShowS
</span><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/filepath-1.4.301.0/src/System.FilePath.Posix.html#takeDirectory"><span class="hs-identifier hs-var">takeDirectory</span></a></span><span> </span><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621679486141"><span class="hs-identifier hs-var">fn</span></a></span><span>
</span><span id="line-258"></span><span>        </span><span class="annot"><span class="annottext">FilePath -&gt; IO ByteString
</span><a href="#local-6989586621679486142"><span class="hs-identifier hs-var">fetchConfigFile</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621679486143"><span class="hs-identifier hs-var">knownNetworkPath</span></a></span><span> </span><span class="annot"><span class="annottext">FilePath -&gt; ShowS
</span><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/filepath-1.4.301.0/src/System.FilePath.Posix.html#%3C%2F%3E"><span class="hs-operator hs-var">&lt;/&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621679486141"><span class="hs-identifier hs-var">fn</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-259"></span><span>          </span><span class="annot"><span class="annottext">IO ByteString -&gt; (ByteString -&gt; IO ()) -&gt; IO ()
forall a b. IO a -&gt; (a -&gt; IO b) -&gt; IO b
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/GHC.Base.html#%3E%3E%3D"><span class="hs-operator hs-var">&gt;&gt;=</span></a></span><span> </span><span class="annot"><span class="annottext">FilePath -&gt; ByteString -&gt; IO ()
forall (m :: * -&gt; *). MonadIO m =&gt; FilePath -&gt; ByteString -&gt; m ()
</span><span class="hs-identifier hs-var">writeFileBS</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621679486135"><span class="hs-identifier hs-var">stateDirectory</span></a></span><span> </span><span class="annot"><span class="annottext">FilePath -&gt; ShowS
</span><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/filepath-1.4.301.0/src/System.FilePath.Posix.html#%3C%2F%3E"><span class="hs-operator hs-var">&lt;/&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621679486141"><span class="hs-identifier hs-var">fn</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-260"></span><span>    </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">KnownNetwork
</span><a href="#local-6989586621679486136"><span class="hs-identifier hs-var">knownNetwork</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-261"></span><span>      </span><span class="annot"><span class="annottext">KnownNetwork
</span><a href="Hydra.Cluster.Fixture.html#Mainnet"><span class="hs-identifier hs-var">Mainnet</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[FilePath] -&gt; (FilePath -&gt; IO ()) -&gt; IO ()
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Foldable t, Monad m) =&gt;
t a -&gt; (a -&gt; m b) -&gt; m ()
</span><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/Data.Foldable.html#forM_"><span class="hs-identifier hs-var">forM_</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">FilePath
</span><span class="hs-string">&quot;checkpoints.json&quot;</span></span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">((FilePath -&gt; IO ()) -&gt; IO ()) -&gt; (FilePath -&gt; IO ()) -&gt; IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-262"></span><span>        </span><span class="hs-glyph">\</span><span id="local-6989586621679486146"><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621679486146"><span class="hs-identifier hs-var">fn</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-263"></span><span>          </span><span class="annot"><span class="annottext">Bool -&gt; FilePath -&gt; IO ()
</span><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/directory-1.3.8.5/src/System.Directory.html#createDirectoryIfMissing"><span class="hs-identifier hs-var">createDirectoryIfMissing</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#True"><span class="hs-identifier hs-var">True</span></a></span><span> </span><span class="annot"><span class="annottext">(FilePath -&gt; IO ()) -&gt; FilePath -&gt; IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621679486135"><span class="hs-identifier hs-var">stateDirectory</span></a></span><span> </span><span class="annot"><span class="annottext">FilePath -&gt; ShowS
</span><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/filepath-1.4.301.0/src/System.FilePath.Posix.html#%3C%2F%3E"><span class="hs-operator hs-var">&lt;/&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">ShowS
</span><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/filepath-1.4.301.0/src/System.FilePath.Posix.html#takeDirectory"><span class="hs-identifier hs-var">takeDirectory</span></a></span><span> </span><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621679486146"><span class="hs-identifier hs-var">fn</span></a></span><span>
</span><span id="line-264"></span><span>          </span><span class="annot"><span class="annottext">FilePath -&gt; IO ByteString
</span><a href="#local-6989586621679486142"><span class="hs-identifier hs-var">fetchConfigFile</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621679486143"><span class="hs-identifier hs-var">knownNetworkPath</span></a></span><span> </span><span class="annot"><span class="annottext">FilePath -&gt; ShowS
</span><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/filepath-1.4.301.0/src/System.FilePath.Posix.html#%3C%2F%3E"><span class="hs-operator hs-var">&lt;/&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621679486146"><span class="hs-identifier hs-var">fn</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-265"></span><span>            </span><span class="annot"><span class="annottext">IO ByteString -&gt; (ByteString -&gt; IO ()) -&gt; IO ()
forall a b. IO a -&gt; (a -&gt; IO b) -&gt; IO b
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/GHC.Base.html#%3E%3E%3D"><span class="hs-operator hs-var">&gt;&gt;=</span></a></span><span> </span><span class="annot"><span class="annottext">FilePath -&gt; ByteString -&gt; IO ()
forall (m :: * -&gt; *). MonadIO m =&gt; FilePath -&gt; ByteString -&gt; m ()
</span><span class="hs-identifier hs-var">writeFileBS</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621679486135"><span class="hs-identifier hs-var">stateDirectory</span></a></span><span> </span><span class="annot"><span class="annottext">FilePath -&gt; ShowS
</span><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/filepath-1.4.301.0/src/System.FilePath.Posix.html#%3C%2F%3E"><span class="hs-operator hs-var">&lt;/&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621679486146"><span class="hs-identifier hs-var">fn</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-266"></span><span>      </span><span class="annot"><span class="annottext">KnownNetwork
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">() -&gt; IO ()
forall a. a -&gt; IO a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/GHC.Base.html#pure"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-267"></span><span>
</span><span id="line-268"></span><span>  </span><span id="local-6989586621679486143"><span class="annot"><span class="annottext">knownNetworkPath :: FilePath
</span><a href="#local-6989586621679486143"><span class="hs-identifier hs-var hs-var">knownNetworkPath</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-269"></span><span>    </span><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621679486147"><span class="hs-identifier hs-var">knownNetworkConfigBaseURL</span></a></span><span> </span><span class="annot"><span class="annottext">FilePath -&gt; ShowS
</span><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/filepath-1.4.301.0/src/System.FilePath.Posix.html#%3C%2F%3E"><span class="hs-operator hs-var">&lt;/&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621679486148"><span class="hs-identifier hs-var">knownNetworkName</span></a></span><span>
</span><span id="line-270"></span><span>
</span><span id="line-271"></span><span>  </span><span class="hs-comment">-- Base path on remote</span><span>
</span><span id="line-272"></span><span>  </span><span id="local-6989586621679486147"><span class="annot"><span class="annottext">knownNetworkConfigBaseURL :: FilePath
</span><a href="#local-6989586621679486147"><span class="hs-identifier hs-var hs-var">knownNetworkConfigBaseURL</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FilePath
</span><span class="hs-string">&quot;https://book.world.dev.cardano.org/environments&quot;</span></span><span>
</span><span id="line-273"></span><span>
</span><span id="line-274"></span><span>  </span><span class="hs-comment">-- Network name on remote</span><span>
</span><span id="line-275"></span><span>  </span><span id="local-6989586621679486148"><span class="annot"><span class="annottext">knownNetworkName :: FilePath
</span><a href="#local-6989586621679486148"><span class="hs-identifier hs-var hs-var">knownNetworkName</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">KnownNetwork
</span><a href="#local-6989586621679486136"><span class="hs-identifier hs-var">knownNetwork</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-276"></span><span>    </span><span class="annot"><span class="annottext">KnownNetwork
</span><a href="Hydra.Cluster.Fixture.html#Preview"><span class="hs-identifier hs-var">Preview</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">FilePath
</span><span class="hs-string">&quot;preview&quot;</span></span><span>
</span><span id="line-277"></span><span>    </span><span class="annot"><span class="annottext">KnownNetwork
</span><a href="Hydra.Cluster.Fixture.html#Preproduction"><span class="hs-identifier hs-var">Preproduction</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">FilePath
</span><span class="hs-string">&quot;preprod&quot;</span></span><span>
</span><span id="line-278"></span><span>    </span><span class="annot"><span class="annottext">KnownNetwork
</span><a href="Hydra.Cluster.Fixture.html#Mainnet"><span class="hs-identifier hs-var">Mainnet</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">FilePath
</span><span class="hs-string">&quot;mainnet&quot;</span></span><span>
</span><span id="line-279"></span><span>    </span><span class="annot"><span class="annottext">KnownNetwork
</span><a href="Hydra.Cluster.Fixture.html#Sanchonet"><span class="hs-identifier hs-var">Sanchonet</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">FilePath
</span><span class="hs-string">&quot;sanchonet&quot;</span></span><span>
</span><span id="line-280"></span><span>    </span><span class="hs-comment">-- NOTE: Here we map blockfrost networks to cardano ones since we expect to find actor keys</span><span>
</span><span id="line-281"></span><span>    </span><span class="hs-comment">-- in known locations when running smoke-tests.</span><span>
</span><span id="line-282"></span><span>    </span><span class="annot"><span class="annottext">KnownNetwork
</span><a href="Hydra.Cluster.Fixture.html#BlockfrostPreview"><span class="hs-identifier hs-var">BlockfrostPreview</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">FilePath
</span><span class="hs-string">&quot;preview&quot;</span></span><span>
</span><span id="line-283"></span><span>    </span><span class="annot"><span class="annottext">KnownNetwork
</span><a href="Hydra.Cluster.Fixture.html#BlockfrostPreprod"><span class="hs-identifier hs-var">BlockfrostPreprod</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">FilePath
</span><span class="hs-string">&quot;preprod&quot;</span></span><span>
</span><span id="line-284"></span><span>    </span><span class="annot"><span class="annottext">KnownNetwork
</span><a href="Hydra.Cluster.Fixture.html#BlockfrostMainnet"><span class="hs-identifier hs-var">BlockfrostMainnet</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">FilePath
</span><span class="hs-string">&quot;mainnet&quot;</span></span><span>
</span><span id="line-285"></span><span>
</span><span id="line-286"></span><span>  </span><span class="annot"><a href="#local-6989586621679486142"><span class="hs-identifier hs-type">fetchConfigFile</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/GHC.Base.html#String"><span class="hs-identifier hs-type">String</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#IO"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="annot"><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/bytestring-0.11.5.4/src/Data.ByteString.Internal.Type.html#ByteString"><span class="hs-identifier hs-type">ByteString</span></a></span><span>
</span><span id="line-287"></span><span>  </span><span id="local-6989586621679486142"><span class="annot"><span class="annottext">fetchConfigFile :: FilePath -&gt; IO ByteString
</span><a href="#local-6989586621679486142"><span class="hs-identifier hs-var hs-var">fetchConfigFile</span></a></span></span><span> </span><span id="local-6989586621679486156"><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621679486156"><span class="hs-identifier hs-var">path</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-288"></span><span>    </span><span class="annot"><span class="annottext">FilePath -&gt; IO Request
forall (m :: * -&gt; *). MonadThrow m =&gt; FilePath -&gt; m Request
</span><span class="hs-identifier hs-var">parseRequestThrow</span></span><span> </span><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621679486156"><span class="hs-identifier hs-var">path</span></a></span><span> </span><span class="annot"><span class="annottext">IO Request
-&gt; (Request -&gt; IO (Response ByteString))
-&gt; IO (Response ByteString)
forall a b. IO a -&gt; (a -&gt; IO b) -&gt; IO b
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/GHC.Base.html#%3E%3E%3D"><span class="hs-operator hs-var">&gt;&gt;=</span></a></span><span> </span><span class="annot"><span class="annottext">Request -&gt; IO (Response ByteString)
forall (m :: * -&gt; *).
MonadIO m =&gt;
Request -&gt; m (Response ByteString)
</span><span class="hs-identifier hs-var">httpBS</span></span><span> </span><span class="annot"><span class="annottext">IO (Response ByteString)
-&gt; (Response ByteString -&gt; ByteString) -&gt; IO ByteString
forall (f :: * -&gt; *) a b. Functor f =&gt; f a -&gt; (a -&gt; b) -&gt; f b
</span><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/Data.Functor.html#%3C%26%3E"><span class="hs-operator hs-var">&lt;&amp;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Response ByteString -&gt; ByteString
forall a. Response a -&gt; a
</span><span class="hs-identifier hs-var">getResponseBody</span></span><span>
</span><span id="line-289"></span><span>
</span><span id="line-290"></span><span class="hs-comment">-- | Setup the cardano-node to run a local devnet producing blocks. This copies</span><span>
</span><span id="line-291"></span><span class="hs-comment">-- the appropriate files and prepares 'CardanoNodeArgs' for 'withCardanoNode'.</span><span>
</span><span id="line-292"></span><span class="annot"><a href="CardanoNode.html#setupCardanoDevnet"><span class="hs-identifier hs-type">setupCardanoDevnet</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/GHC.IO.html#FilePath"><span class="hs-identifier hs-type">FilePath</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#IO"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="annot"><a href="CardanoNode.html#CardanoNodeArgs"><span class="hs-identifier hs-type">CardanoNodeArgs</span></a></span><span>
</span><span id="line-293"></span><span id="setupCardanoDevnet"><span class="annot"><span class="annottext">setupCardanoDevnet :: FilePath -&gt; IO CardanoNodeArgs
</span><a href="CardanoNode.html#setupCardanoDevnet"><span class="hs-identifier hs-var hs-var">setupCardanoDevnet</span></a></span></span><span> </span><span id="local-6989586621679486158"><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621679486158"><span class="hs-identifier hs-var">stateDirectory</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-294"></span><span>  </span><span class="annot"><span class="annottext">Bool -&gt; FilePath -&gt; IO ()
</span><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/directory-1.3.8.5/src/System.Directory.html#createDirectoryIfMissing"><span class="hs-identifier hs-var">createDirectoryIfMissing</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#True"><span class="hs-identifier hs-var">True</span></a></span><span> </span><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621679486158"><span class="hs-identifier hs-var">stateDirectory</span></a></span><span>
</span><span id="line-295"></span><span>  </span><span class="hs-special">[</span><span id="local-6989586621679486159"><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621679486159"><span class="hs-identifier hs-var">dlgCert</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679486160"><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621679486160"><span class="hs-identifier hs-var">signKey</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679486161"><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621679486161"><span class="hs-identifier hs-var">vrfKey</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679486162"><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621679486162"><span class="hs-identifier hs-var">kesKey</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679486163"><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621679486163"><span class="hs-identifier hs-var">opCert</span></a></span></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">&lt;-</span><span>
</span><span id="line-296"></span><span>    </span><span class="annot"><span class="annottext">(FilePath -&gt; IO FilePath) -&gt; [FilePath] -&gt; IO [FilePath]
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; m b) -&gt; [a] -&gt; m [b]
</span><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/Data.Traversable.html#mapM"><span class="hs-identifier hs-var">mapM</span></a></span><span>
</span><span id="line-297"></span><span>      </span><span class="annot"><span class="annottext">FilePath -&gt; IO FilePath
</span><a href="#local-6989586621679486165"><span class="hs-identifier hs-var">copyDevnetCredential</span></a></span><span>
</span><span id="line-298"></span><span>      </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">FilePath
</span><span class="hs-string">&quot;byron-delegation.cert&quot;</span></span><span>
</span><span id="line-299"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">FilePath
</span><span class="hs-string">&quot;byron-delegate.key&quot;</span></span><span>
</span><span id="line-300"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">FilePath
</span><span class="hs-string">&quot;vrf.skey&quot;</span></span><span>
</span><span id="line-301"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">FilePath
</span><span class="hs-string">&quot;kes.skey&quot;</span></span><span>
</span><span id="line-302"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">FilePath
</span><span class="hs-string">&quot;opcert.cert&quot;</span></span><span>
</span><span id="line-303"></span><span>      </span><span class="hs-special">]</span><span>
</span><span id="line-304"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679486166"><span class="annot"><span class="annottext">args :: CardanoNodeArgs
</span><a href="#local-6989586621679486166"><span class="hs-identifier hs-var hs-var">args</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-305"></span><span>        </span><span class="annot"><span class="annottext">CardanoNodeArgs
</span><a href="CardanoNode.html#defaultCardanoNodeArgs"><span class="hs-identifier hs-var">defaultCardanoNodeArgs</span></a></span><span>
</span><span id="line-306"></span><span>          </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="CardanoNode.html#%24sel%3AnodeDlgCertFile%3ACardanoNodeArgs"><span class="hs-identifier hs-var">nodeDlgCertFile</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/GHC.Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679486159"><span class="hs-identifier hs-type">dlgCert</span></a></span><span>
</span><span id="line-307"></span><span>          </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="CardanoNode.html#%24sel%3AnodeSignKeyFile%3ACardanoNodeArgs"><span class="hs-identifier hs-var">nodeSignKeyFile</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/GHC.Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679486160"><span class="hs-identifier hs-type">signKey</span></a></span><span>
</span><span id="line-308"></span><span>          </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="CardanoNode.html#%24sel%3AnodeVrfKeyFile%3ACardanoNodeArgs"><span class="hs-identifier hs-var">nodeVrfKeyFile</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/GHC.Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679486161"><span class="hs-identifier hs-type">vrfKey</span></a></span><span>
</span><span id="line-309"></span><span>          </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="CardanoNode.html#%24sel%3AnodeKesKeyFile%3ACardanoNodeArgs"><span class="hs-identifier hs-var">nodeKesKeyFile</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/GHC.Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679486162"><span class="hs-identifier hs-type">kesKey</span></a></span><span>
</span><span id="line-310"></span><span>          </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="CardanoNode.html#%24sel%3AnodeOpCertFile%3ACardanoNodeArgs"><span class="hs-identifier hs-var">nodeOpCertFile</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/GHC.Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679486163"><span class="hs-identifier hs-type">opCert</span></a></span><span>
</span><span id="line-311"></span><span>          </span><span class="hs-special">}</span><span>
</span><span id="line-312"></span><span>  </span><span class="annot"><span class="annottext">CardanoNodeArgs -&gt; IO ()
</span><a href="#local-6989586621679486167"><span class="hs-identifier hs-var">copyDevnetFiles</span></a></span><span> </span><span class="annot"><span class="annottext">CardanoNodeArgs
</span><a href="#local-6989586621679486166"><span class="hs-identifier hs-var">args</span></a></span><span>
</span><span id="line-313"></span><span>  </span><span class="annot"><span class="annottext">FilePath -&gt; CardanoNodeArgs -&gt; IO ()
</span><a href="CardanoNode.html#refreshSystemStart"><span class="hs-identifier hs-var">refreshSystemStart</span></a></span><span> </span><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621679486158"><span class="hs-identifier hs-var">stateDirectory</span></a></span><span> </span><span class="annot"><span class="annottext">CardanoNodeArgs
</span><a href="#local-6989586621679486166"><span class="hs-identifier hs-var">args</span></a></span><span>
</span><span id="line-314"></span><span>  </span><span class="annot"><span class="annottext">[Int] -&gt; CardanoNodeArgs -&gt; IO ()
</span><a href="#local-6989586621679486169"><span class="hs-identifier hs-var">writeTopology</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">CardanoNodeArgs
</span><a href="#local-6989586621679486166"><span class="hs-identifier hs-var">args</span></a></span><span>
</span><span id="line-315"></span><span>  </span><span class="annot"><span class="annottext">CardanoNodeArgs -&gt; IO CardanoNodeArgs
forall a. a -&gt; IO a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/GHC.Base.html#pure"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">CardanoNodeArgs
</span><a href="#local-6989586621679486166"><span class="hs-identifier hs-var">args</span></a></span><span>
</span><span id="line-316"></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-317"></span><span>  </span><span id="local-6989586621679486165"><span class="annot"><span class="annottext">copyDevnetCredential :: FilePath -&gt; IO FilePath
</span><a href="#local-6989586621679486165"><span class="hs-identifier hs-var hs-var">copyDevnetCredential</span></a></span></span><span> </span><span id="local-6989586621679486170"><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621679486170"><span class="hs-identifier hs-var">file</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-318"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679486171"><span class="annot"><span class="annottext">destination :: FilePath
</span><a href="#local-6989586621679486171"><span class="hs-identifier hs-var hs-var">destination</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621679486158"><span class="hs-identifier hs-var">stateDirectory</span></a></span><span> </span><span class="annot"><span class="annottext">FilePath -&gt; ShowS
</span><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/filepath-1.4.301.0/src/System.FilePath.Posix.html#%3C%2F%3E"><span class="hs-operator hs-var">&lt;/&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621679486170"><span class="hs-identifier hs-var">file</span></a></span><span>
</span><span id="line-319"></span><span>    </span><span class="annot"><span class="annottext">IO Bool -&gt; IO () -&gt; IO ()
forall (m :: * -&gt; *). Monad m =&gt; m Bool -&gt; m () -&gt; m ()
</span><span class="hs-identifier hs-var">unlessM</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FilePath -&gt; IO Bool
</span><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/directory-1.3.8.5/src/System.Directory.html#doesFileExist"><span class="hs-identifier hs-var">doesFileExist</span></a></span><span> </span><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621679486171"><span class="hs-identifier hs-var">destination</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(IO () -&gt; IO ()) -&gt; IO () -&gt; IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-320"></span><span>      </span><span class="annot"><span class="annottext">FilePath -&gt; IO ByteString
</span><a href="Hydra.Cluster.Util.html#readConfigFile"><span class="hs-identifier hs-var">readConfigFile</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FilePath
</span><span class="hs-string">&quot;devnet&quot;</span></span><span> </span><span class="annot"><span class="annottext">FilePath -&gt; ShowS
</span><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/filepath-1.4.301.0/src/System.FilePath.Posix.html#%3C%2F%3E"><span class="hs-operator hs-var">&lt;/&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621679486170"><span class="hs-identifier hs-var">file</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-321"></span><span>        </span><span class="annot"><span class="annottext">IO ByteString -&gt; (ByteString -&gt; IO ()) -&gt; IO ()
forall a b. IO a -&gt; (a -&gt; IO b) -&gt; IO b
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/GHC.Base.html#%3E%3E%3D"><span class="hs-operator hs-var">&gt;&gt;=</span></a></span><span> </span><span class="annot"><span class="annottext">FilePath -&gt; ByteString -&gt; IO ()
forall (m :: * -&gt; *). MonadIO m =&gt; FilePath -&gt; ByteString -&gt; m ()
</span><span class="hs-identifier hs-var">writeFileBS</span></span><span> </span><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621679486171"><span class="hs-identifier hs-var">destination</span></a></span><span>
</span><span id="line-322"></span><span>    </span><span class="annot"><span class="annottext">FilePath -&gt; FileMode -&gt; IO ()
</span><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/unix-2.8.6.0/src/System.Posix.Files.html#setFileMode"><span class="hs-identifier hs-var">setFileMode</span></a></span><span> </span><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621679486171"><span class="hs-identifier hs-var">destination</span></a></span><span> </span><span class="annot"><span class="annottext">FileMode
</span><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/unix-2.8.6.0/src/System.Posix.Files.Common.html#ownerReadMode"><span class="hs-identifier hs-var">ownerReadMode</span></a></span><span>
</span><span id="line-323"></span><span>    </span><span class="annot"><span class="annottext">FilePath -&gt; IO FilePath
forall a. a -&gt; IO a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/GHC.Base.html#pure"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621679486170"><span class="hs-identifier hs-var">file</span></a></span><span>
</span><span id="line-324"></span><span>
</span><span id="line-325"></span><span>  </span><span id="local-6989586621679486167"><span class="annot"><span class="annottext">copyDevnetFiles :: CardanoNodeArgs -&gt; IO ()
</span><a href="#local-6989586621679486167"><span class="hs-identifier hs-var hs-var">copyDevnetFiles</span></a></span></span><span> </span><span id="local-6989586621679486173"><span class="annot"><span class="annottext">CardanoNodeArgs
</span><a href="#local-6989586621679486173"><span class="hs-identifier hs-var">args</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-326"></span><span>    </span><span class="annot"><span class="annottext">FilePath -&gt; IO ByteString
</span><a href="Hydra.Cluster.Util.html#readConfigFile"><span class="hs-identifier hs-var">readConfigFile</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FilePath
</span><span class="hs-string">&quot;devnet&quot;</span></span><span> </span><span class="annot"><span class="annottext">FilePath -&gt; ShowS
</span><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/filepath-1.4.301.0/src/System.FilePath.Posix.html#%3C%2F%3E"><span class="hs-operator hs-var">&lt;/&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">FilePath
</span><span class="hs-string">&quot;cardano-node.json&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-327"></span><span>      </span><span class="annot"><span class="annottext">IO ByteString -&gt; (ByteString -&gt; IO ()) -&gt; IO ()
forall a b. IO a -&gt; (a -&gt; IO b) -&gt; IO b
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/GHC.Base.html#%3E%3E%3D"><span class="hs-operator hs-var">&gt;&gt;=</span></a></span><span> </span><span class="annot"><span class="annottext">FilePath -&gt; ByteString -&gt; IO ()
forall (m :: * -&gt; *). MonadIO m =&gt; FilePath -&gt; ByteString -&gt; m ()
</span><span class="hs-identifier hs-var">writeFileBS</span></span><span>
</span><span id="line-328"></span><span>        </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621679486158"><span class="hs-identifier hs-var">stateDirectory</span></a></span><span> </span><span class="annot"><span class="annottext">FilePath -&gt; ShowS
</span><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/filepath-1.4.301.0/src/System.FilePath.Posix.html#%3C%2F%3E"><span class="hs-operator hs-var">&lt;/&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">CardanoNodeArgs -&gt; FilePath
</span><a href="CardanoNode.html#%24sel%3AnodeConfigFile%3ACardanoNodeArgs"><span class="hs-identifier hs-var">nodeConfigFile</span></a></span><span> </span><span class="annot"><span class="annottext">CardanoNodeArgs
</span><a href="#local-6989586621679486173"><span class="hs-identifier hs-var">args</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-329"></span><span>    </span><span class="annot"><span class="annottext">FilePath -&gt; IO ByteString
</span><a href="Hydra.Cluster.Util.html#readConfigFile"><span class="hs-identifier hs-var">readConfigFile</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FilePath
</span><span class="hs-string">&quot;devnet&quot;</span></span><span> </span><span class="annot"><span class="annottext">FilePath -&gt; ShowS
</span><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/filepath-1.4.301.0/src/System.FilePath.Posix.html#%3C%2F%3E"><span class="hs-operator hs-var">&lt;/&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">FilePath
</span><span class="hs-string">&quot;genesis-byron.json&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-330"></span><span>      </span><span class="annot"><span class="annottext">IO ByteString -&gt; (ByteString -&gt; IO ()) -&gt; IO ()
forall a b. IO a -&gt; (a -&gt; IO b) -&gt; IO b
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/GHC.Base.html#%3E%3E%3D"><span class="hs-operator hs-var">&gt;&gt;=</span></a></span><span> </span><span class="annot"><span class="annottext">FilePath -&gt; ByteString -&gt; IO ()
forall (m :: * -&gt; *). MonadIO m =&gt; FilePath -&gt; ByteString -&gt; m ()
</span><span class="hs-identifier hs-var">writeFileBS</span></span><span>
</span><span id="line-331"></span><span>        </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621679486158"><span class="hs-identifier hs-var">stateDirectory</span></a></span><span> </span><span class="annot"><span class="annottext">FilePath -&gt; ShowS
</span><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/filepath-1.4.301.0/src/System.FilePath.Posix.html#%3C%2F%3E"><span class="hs-operator hs-var">&lt;/&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">CardanoNodeArgs -&gt; FilePath
</span><a href="CardanoNode.html#%24sel%3AnodeByronGenesisFile%3ACardanoNodeArgs"><span class="hs-identifier hs-var">nodeByronGenesisFile</span></a></span><span> </span><span class="annot"><span class="annottext">CardanoNodeArgs
</span><a href="#local-6989586621679486173"><span class="hs-identifier hs-var">args</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-332"></span><span>    </span><span class="annot"><span class="annottext">FilePath -&gt; IO ByteString
</span><a href="Hydra.Cluster.Util.html#readConfigFile"><span class="hs-identifier hs-var">readConfigFile</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FilePath
</span><span class="hs-string">&quot;devnet&quot;</span></span><span> </span><span class="annot"><span class="annottext">FilePath -&gt; ShowS
</span><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/filepath-1.4.301.0/src/System.FilePath.Posix.html#%3C%2F%3E"><span class="hs-operator hs-var">&lt;/&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">FilePath
</span><span class="hs-string">&quot;genesis-shelley.json&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-333"></span><span>      </span><span class="annot"><span class="annottext">IO ByteString -&gt; (ByteString -&gt; IO ()) -&gt; IO ()
forall a b. IO a -&gt; (a -&gt; IO b) -&gt; IO b
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/GHC.Base.html#%3E%3E%3D"><span class="hs-operator hs-var">&gt;&gt;=</span></a></span><span> </span><span class="annot"><span class="annottext">FilePath -&gt; ByteString -&gt; IO ()
forall (m :: * -&gt; *). MonadIO m =&gt; FilePath -&gt; ByteString -&gt; m ()
</span><span class="hs-identifier hs-var">writeFileBS</span></span><span>
</span><span id="line-334"></span><span>        </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621679486158"><span class="hs-identifier hs-var">stateDirectory</span></a></span><span> </span><span class="annot"><span class="annottext">FilePath -&gt; ShowS
</span><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/filepath-1.4.301.0/src/System.FilePath.Posix.html#%3C%2F%3E"><span class="hs-operator hs-var">&lt;/&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">CardanoNodeArgs -&gt; FilePath
</span><a href="CardanoNode.html#%24sel%3AnodeShelleyGenesisFile%3ACardanoNodeArgs"><span class="hs-identifier hs-var">nodeShelleyGenesisFile</span></a></span><span> </span><span class="annot"><span class="annottext">CardanoNodeArgs
</span><a href="#local-6989586621679486173"><span class="hs-identifier hs-var">args</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-335"></span><span>    </span><span class="annot"><span class="annottext">FilePath -&gt; IO ByteString
</span><a href="Hydra.Cluster.Util.html#readConfigFile"><span class="hs-identifier hs-var">readConfigFile</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FilePath
</span><span class="hs-string">&quot;devnet&quot;</span></span><span> </span><span class="annot"><span class="annottext">FilePath -&gt; ShowS
</span><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/filepath-1.4.301.0/src/System.FilePath.Posix.html#%3C%2F%3E"><span class="hs-operator hs-var">&lt;/&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">FilePath
</span><span class="hs-string">&quot;genesis-alonzo.json&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-336"></span><span>      </span><span class="annot"><span class="annottext">IO ByteString -&gt; (ByteString -&gt; IO ()) -&gt; IO ()
forall a b. IO a -&gt; (a -&gt; IO b) -&gt; IO b
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/GHC.Base.html#%3E%3E%3D"><span class="hs-operator hs-var">&gt;&gt;=</span></a></span><span> </span><span class="annot"><span class="annottext">FilePath -&gt; ByteString -&gt; IO ()
forall (m :: * -&gt; *). MonadIO m =&gt; FilePath -&gt; ByteString -&gt; m ()
</span><span class="hs-identifier hs-var">writeFileBS</span></span><span>
</span><span id="line-337"></span><span>        </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621679486158"><span class="hs-identifier hs-var">stateDirectory</span></a></span><span> </span><span class="annot"><span class="annottext">FilePath -&gt; ShowS
</span><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/filepath-1.4.301.0/src/System.FilePath.Posix.html#%3C%2F%3E"><span class="hs-operator hs-var">&lt;/&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">CardanoNodeArgs -&gt; FilePath
</span><a href="CardanoNode.html#%24sel%3AnodeAlonzoGenesisFile%3ACardanoNodeArgs"><span class="hs-identifier hs-var">nodeAlonzoGenesisFile</span></a></span><span> </span><span class="annot"><span class="annottext">CardanoNodeArgs
</span><a href="#local-6989586621679486173"><span class="hs-identifier hs-var">args</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-338"></span><span>    </span><span class="annot"><span class="annottext">FilePath -&gt; IO ByteString
</span><a href="Hydra.Cluster.Util.html#readConfigFile"><span class="hs-identifier hs-var">readConfigFile</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FilePath
</span><span class="hs-string">&quot;devnet&quot;</span></span><span> </span><span class="annot"><span class="annottext">FilePath -&gt; ShowS
</span><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/filepath-1.4.301.0/src/System.FilePath.Posix.html#%3C%2F%3E"><span class="hs-operator hs-var">&lt;/&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">FilePath
</span><span class="hs-string">&quot;genesis-conway.json&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-339"></span><span>      </span><span class="annot"><span class="annottext">IO ByteString -&gt; (ByteString -&gt; IO ()) -&gt; IO ()
forall a b. IO a -&gt; (a -&gt; IO b) -&gt; IO b
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/GHC.Base.html#%3E%3E%3D"><span class="hs-operator hs-var">&gt;&gt;=</span></a></span><span> </span><span class="annot"><span class="annottext">FilePath -&gt; ByteString -&gt; IO ()
forall (m :: * -&gt; *). MonadIO m =&gt; FilePath -&gt; ByteString -&gt; m ()
</span><span class="hs-identifier hs-var">writeFileBS</span></span><span>
</span><span id="line-340"></span><span>        </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621679486158"><span class="hs-identifier hs-var">stateDirectory</span></a></span><span> </span><span class="annot"><span class="annottext">FilePath -&gt; ShowS
</span><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/filepath-1.4.301.0/src/System.FilePath.Posix.html#%3C%2F%3E"><span class="hs-operator hs-var">&lt;/&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">CardanoNodeArgs -&gt; FilePath
</span><a href="CardanoNode.html#%24sel%3AnodeConwayGenesisFile%3ACardanoNodeArgs"><span class="hs-identifier hs-var">nodeConwayGenesisFile</span></a></span><span> </span><span class="annot"><span class="annottext">CardanoNodeArgs
</span><a href="#local-6989586621679486173"><span class="hs-identifier hs-var">args</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-341"></span><span>
</span><span id="line-342"></span><span>  </span><span id="local-6989586621679486169"><span class="annot"><span class="annottext">writeTopology :: [Int] -&gt; CardanoNodeArgs -&gt; IO ()
</span><a href="#local-6989586621679486169"><span class="hs-identifier hs-var hs-var">writeTopology</span></a></span></span><span> </span><span id="local-6989586621679486174"><span class="annot"><span class="annottext">[Int]
</span><a href="#local-6989586621679486174"><span class="hs-identifier hs-var">peers</span></a></span></span><span> </span><span id="local-6989586621679486175"><span class="annot"><span class="annottext">CardanoNodeArgs
</span><a href="#local-6989586621679486175"><span class="hs-identifier hs-var">args</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-343"></span><span>    </span><span class="annot"><span class="annottext">FilePath -&gt; Value -&gt; IO ()
forall a. ToJSON a =&gt; FilePath -&gt; a -&gt; IO ()
</span><span class="hs-identifier hs-var">Aeson.encodeFile</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621679486158"><span class="hs-identifier hs-var">stateDirectory</span></a></span><span> </span><span class="annot"><span class="annottext">FilePath -&gt; ShowS
</span><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/filepath-1.4.301.0/src/System.FilePath.Posix.html#%3C%2F%3E"><span class="hs-operator hs-var">&lt;/&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">CardanoNodeArgs -&gt; FilePath
</span><a href="CardanoNode.html#%24sel%3AnodeTopologyFile%3ACardanoNodeArgs"><span class="hs-identifier hs-var">nodeTopologyFile</span></a></span><span> </span><span class="annot"><span class="annottext">CardanoNodeArgs
</span><a href="#local-6989586621679486175"><span class="hs-identifier hs-var">args</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Value -&gt; IO ()) -&gt; Value -&gt; IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-344"></span><span>      </span><span class="annot"><span class="annottext">[Int] -&gt; Value
</span><a href="CardanoNode.html#mkTopology"><span class="hs-identifier hs-var">mkTopology</span></a></span><span> </span><span class="annot"><span class="annottext">[Int]
</span><a href="#local-6989586621679486174"><span class="hs-identifier hs-var">peers</span></a></span><span>
</span><span id="line-345"></span><span>
</span><span id="line-346"></span><span id="local-6989586621679485034"><span class="annot"><a href="CardanoNode.html#withCardanoNode"><span class="hs-identifier hs-type">withCardanoNode</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-347"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">Tracer</span></span><span> </span><span class="annot"><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#IO"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="annot"><a href="CardanoNode.html#NodeLog"><span class="hs-identifier hs-type">NodeLog</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-348"></span><span>  </span><span class="annot"><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/GHC.IO.html#FilePath"><span class="hs-identifier hs-type">FilePath</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-349"></span><span>  </span><span class="annot"><a href="CardanoNode.html#CardanoNodeArgs"><span class="hs-identifier hs-type">CardanoNodeArgs</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-350"></span><span>  </span><span class="hs-special">(</span><span class="annot"><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/time-1.12.2/src/Data.Time.Clock.Internal.NominalDiffTime.html#NominalDiffTime"><span class="hs-identifier hs-type">NominalDiffTime</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">DirectBackend</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#IO"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679485034"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-351"></span><span>  </span><span class="annot"><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#IO"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679485034"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-352"></span><span id="withCardanoNode"><span class="annot"><span class="annottext">withCardanoNode :: forall a.
Tracer IO NodeLog
-&gt; FilePath
-&gt; CardanoNodeArgs
-&gt; (NominalDiffTime -&gt; DirectBackend -&gt; IO a)
-&gt; IO a
</span><a href="CardanoNode.html#withCardanoNode"><span class="hs-identifier hs-var hs-var">withCardanoNode</span></a></span></span><span> </span><span id="local-6989586621679486217"><span class="annot"><span class="annottext">Tracer IO NodeLog
</span><a href="#local-6989586621679486217"><span class="hs-identifier hs-var">tr</span></a></span></span><span> </span><span id="local-6989586621679486218"><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621679486218"><span class="hs-identifier hs-var">stateDirectory</span></a></span></span><span> </span><span id="local-6989586621679486219"><span class="annot"><span class="annottext">CardanoNodeArgs
</span><a href="#local-6989586621679486219"><span class="hs-identifier hs-var">args</span></a></span></span><span> </span><span id="local-6989586621679486220"><span class="annot"><span class="annottext">NominalDiffTime -&gt; DirectBackend -&gt; IO a
</span><a href="#local-6989586621679486220"><span class="hs-identifier hs-var">action</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-353"></span><span>  </span><span class="annot"><span class="annottext">Tracer IO NodeLog -&gt; NodeLog -&gt; IO ()
forall (m :: * -&gt; *) a. Tracer m a -&gt; a -&gt; m ()
</span><span class="hs-identifier hs-var">traceWith</span></span><span> </span><span class="annot"><span class="annottext">Tracer IO NodeLog
</span><a href="#local-6989586621679486217"><span class="hs-identifier hs-var">tr</span></a></span><span> </span><span class="annot"><span class="annottext">(NodeLog -&gt; IO ()) -&gt; NodeLog -&gt; IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Text -&gt; NodeLog
</span><a href="CardanoNode.html#MsgNodeCmdSpec"><span class="hs-identifier hs-var">MsgNodeCmdSpec</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CmdSpec -&gt; Text
forall b a. (Show a, IsString b) =&gt; a -&gt; b
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">(CmdSpec -&gt; Text) -&gt; CmdSpec -&gt; Text
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">CreateProcess -&gt; CmdSpec
</span><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/process-1.6.19.0/src/System.Process.Common.html#cmdspec"><span class="hs-identifier hs-var">cmdspec</span></a></span><span> </span><span class="annot"><span class="annottext">CreateProcess
</span><a href="#local-6989586621679486222"><span class="hs-identifier hs-var">process</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-354"></span><span>  </span><span class="annot"><span class="annottext">FilePath -&gt; (Handle -&gt; IO a) -&gt; IO a
forall a. FilePath -&gt; (Handle -&gt; IO a) -&gt; IO a
</span><span class="hs-identifier hs-var">withLogFile</span></span><span> </span><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621679486224"><span class="hs-identifier hs-var">logFilePath</span></a></span><span> </span><span class="annot"><span class="annottext">((Handle -&gt; IO a) -&gt; IO a) -&gt; (Handle -&gt; IO a) -&gt; IO a
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679486225"><span class="annot"><span class="annottext">Handle
</span><a href="#local-6989586621679486225"><span class="hs-identifier hs-var">out</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-355"></span><span>    </span><span class="annot"><span class="annottext">Handle -&gt; BufferMode -&gt; IO ()
forall (m :: * -&gt; *). MonadIO m =&gt; Handle -&gt; BufferMode -&gt; m ()
</span><span class="hs-identifier hs-var">hSetBuffering</span></span><span> </span><span class="annot"><span class="annottext">Handle
</span><a href="#local-6989586621679486225"><span class="hs-identifier hs-var">out</span></a></span><span> </span><span class="annot"><span class="annottext">BufferMode
</span><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/GHC.IO.Handle.Types.html#NoBuffering"><span class="hs-identifier hs-var">NoBuffering</span></a></span><span>
</span><span id="line-356"></span><span>    </span><span class="annot"><span class="annottext">CreateProcess
-&gt; (Maybe Handle
    -&gt; Maybe Handle -&gt; Maybe Handle -&gt; ProcessHandle -&gt; IO a)
-&gt; IO a
forall a.
CreateProcess
-&gt; (Maybe Handle
    -&gt; Maybe Handle -&gt; Maybe Handle -&gt; ProcessHandle -&gt; IO a)
-&gt; IO a
</span><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/process-1.6.19.0/src/System.Process.html#withCreateProcess"><span class="hs-identifier hs-var">withCreateProcess</span></a></span><span> </span><span class="annot"><span class="annottext">CreateProcess
</span><a href="#local-6989586621679486222"><span class="hs-identifier hs-var">process</span></a></span><span class="hs-special">{</span><span class="annot"><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/process-1.6.19.0/src/System.Process.Common.html#std_out"><span class="hs-identifier hs-var">std_out</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/process-1.6.19.0/src/System.Process.Common.html#UseHandle"><span class="hs-identifier hs-type">UseHandle</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679486225"><span class="hs-identifier hs-type">out</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/process-1.6.19.0/src/System.Process.Common.html#std_err"><span class="hs-identifier hs-var">std_err</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/process-1.6.19.0/src/System.Process.Common.html#CreatePipe"><span class="hs-identifier hs-type">CreatePipe</span></a></span><span class="hs-special">}</span><span> </span><span class="annot"><span class="annottext">((Maybe Handle
  -&gt; Maybe Handle -&gt; Maybe Handle -&gt; ProcessHandle -&gt; IO a)
 -&gt; IO a)
-&gt; (Maybe Handle
    -&gt; Maybe Handle -&gt; Maybe Handle -&gt; ProcessHandle -&gt; IO a)
-&gt; IO a
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-357"></span><span>      </span><span class="hs-glyph">\</span><span id="local-6989586621679486230"><span class="annot"><span class="annottext">Maybe Handle
</span><a href="#local-6989586621679486230"><span class="hs-identifier hs-var">_stdin</span></a></span></span><span> </span><span id="local-6989586621679486231"><span class="annot"><span class="annottext">Maybe Handle
</span><a href="#local-6989586621679486231"><span class="hs-identifier hs-var">_stdout</span></a></span></span><span> </span><span id="local-6989586621679486232"><span class="annot"><span class="annottext">Maybe Handle
</span><a href="#local-6989586621679486232"><span class="hs-identifier hs-var">mError</span></a></span></span><span> </span><span id="local-6989586621679486233"><span class="annot"><span class="annottext">ProcessHandle
</span><a href="#local-6989586621679486233"><span class="hs-identifier hs-var">processHandle</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-358"></span><span>        </span><span class="hs-special">(</span><span class="annot"><span class="annottext">IO a -&gt; IO () -&gt; IO a
forall a b. IO a -&gt; IO b -&gt; IO a
forall (m :: * -&gt; *) a b. MonadThrow m =&gt; m a -&gt; m b -&gt; m a
</span><span class="hs-operator hs-var">`finally`</span></span><span> </span><span class="annot"><span class="annottext">IO ()
</span><a href="#local-6989586621679486235"><span class="hs-identifier hs-var">cleanupSocketFile</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(IO a -&gt; IO a) -&gt; IO a -&gt; IO a
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-359"></span><span>          </span><span class="annot"><span class="annottext">(FilePath, IO Void) -&gt; (FilePath, IO a) -&gt; IO (Either Void a)
forall (m :: * -&gt; *) a b.
(MonadThread m, MonadAsync m) =&gt;
(FilePath, m a) -&gt; (FilePath, m b) -&gt; m (Either a b)
</span><span class="hs-identifier hs-var">raceLabelled</span></span><span>
</span><span id="line-360"></span><span>            </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FilePath
</span><span class="hs-string">&quot;check-cardano-node-process-not-died&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Text -&gt; ProcessHandle -&gt; Maybe Handle -&gt; IO Void
</span><span class="hs-identifier hs-var">checkProcessHasNotDied</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;cardano-node&quot;</span></span><span> </span><span class="annot"><span class="annottext">ProcessHandle
</span><a href="#local-6989586621679486233"><span class="hs-identifier hs-var">processHandle</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Handle
</span><a href="#local-6989586621679486232"><span class="hs-identifier hs-var">mError</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-361"></span><span>            </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FilePath
</span><span class="hs-string">&quot;wait-for-node&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">IO a
</span><a href="#local-6989586621679486238"><span class="hs-identifier hs-var">waitForNode</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-362"></span><span>            </span><span class="annot"><span class="annottext">IO (Either Void a) -&gt; (Either Void a -&gt; a) -&gt; IO a
forall (f :: * -&gt; *) a b. Functor f =&gt; f a -&gt; (a -&gt; b) -&gt; f b
</span><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/Data.Functor.html#%3C%26%3E"><span class="hs-operator hs-var">&lt;&amp;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">(Void -&gt; a) -&gt; (a -&gt; a) -&gt; Either Void a -&gt; a
forall a c b. (a -&gt; c) -&gt; (b -&gt; c) -&gt; Either a b -&gt; c
</span><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/Data.Either.html#either"><span class="hs-identifier hs-var">either</span></a></span><span> </span><span class="annot"><span class="annottext">Void -&gt; a
forall a. Void -&gt; a
</span><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/GHC.Base.html#absurd"><span class="hs-identifier hs-var">absurd</span></a></span><span> </span><span class="annot"><span class="annottext">a -&gt; a
forall a. a -&gt; a
</span><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/GHC.Base.html#id"><span class="hs-identifier hs-var">id</span></a></span><span>
</span><span id="line-363"></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-364"></span><span>  </span><span class="annot"><a href="CardanoNode.html#CardanoNodeArgs"><span class="hs-identifier hs-type">CardanoNodeArgs</span></a></span><span class="hs-special">{</span><span id="local-6989586621679486242"><span class="annot"><span class="annottext">FilePath
$sel:nodeSocket:CardanoNodeArgs :: CardanoNodeArgs -&gt; FilePath
nodeSocket :: FilePath
</span><a href="CardanoNode.html#%24sel%3AnodeSocket%3ACardanoNodeArgs"><span class="hs-identifier hs-var hs-var">nodeSocket</span></a></span></span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CardanoNodeArgs
</span><a href="#local-6989586621679486219"><span class="hs-identifier hs-var">args</span></a></span><span>
</span><span id="line-365"></span><span>
</span><span id="line-366"></span><span>  </span><span id="local-6989586621679486222"><span class="annot"><span class="annottext">process :: CreateProcess
</span><a href="#local-6989586621679486222"><span class="hs-identifier hs-var hs-var">process</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe FilePath -&gt; CardanoNodeArgs -&gt; CreateProcess
</span><a href="CardanoNode.html#cardanoNodeProcess"><span class="hs-identifier hs-var">cardanoNodeProcess</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FilePath -&gt; Maybe FilePath
forall a. a -&gt; Maybe a
</span><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/GHC.Maybe.html#Just"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621679486218"><span class="hs-identifier hs-var">stateDirectory</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">CardanoNodeArgs
</span><a href="#local-6989586621679486219"><span class="hs-identifier hs-var">args</span></a></span><span>
</span><span id="line-367"></span><span>
</span><span id="line-368"></span><span>  </span><span id="local-6989586621679486224"><span class="annot"><span class="annottext">logFilePath :: FilePath
</span><a href="#local-6989586621679486224"><span class="hs-identifier hs-var hs-var">logFilePath</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621679486218"><span class="hs-identifier hs-var">stateDirectory</span></a></span><span> </span><span class="annot"><span class="annottext">FilePath -&gt; ShowS
</span><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/filepath-1.4.301.0/src/System.FilePath.Posix.html#%3C%2F%3E"><span class="hs-operator hs-var">&lt;/&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">FilePath
</span><span class="hs-string">&quot;logs&quot;</span></span><span> </span><span class="annot"><span class="annottext">FilePath -&gt; ShowS
</span><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/filepath-1.4.301.0/src/System.FilePath.Posix.html#%3C%2F%3E"><span class="hs-operator hs-var">&lt;/&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">FilePath
</span><span class="hs-string">&quot;cardano-node.log&quot;</span></span><span>
</span><span id="line-369"></span><span>
</span><span id="line-370"></span><span>  </span><span id="local-6989586621679486244"><span class="annot"><span class="annottext">socketPath :: FilePath
</span><a href="#local-6989586621679486244"><span class="hs-identifier hs-var hs-var">socketPath</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621679486218"><span class="hs-identifier hs-var">stateDirectory</span></a></span><span> </span><span class="annot"><span class="annottext">FilePath -&gt; ShowS
</span><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/filepath-1.4.301.0/src/System.FilePath.Posix.html#%3C%2F%3E"><span class="hs-operator hs-var">&lt;/&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621679486242"><span class="hs-identifier hs-var">nodeSocket</span></a></span><span>
</span><span id="line-371"></span><span>
</span><span id="line-372"></span><span>  </span><span id="local-6989586621679486238"><span class="annot"><span class="annottext">waitForNode :: IO a
</span><a href="#local-6989586621679486238"><span class="hs-identifier hs-var hs-var">waitForNode</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-373"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679486245"><span class="annot"><span class="annottext">nodeSocketPath :: SocketPath
</span><a href="#local-6989586621679486245"><span class="hs-identifier hs-var hs-var">nodeSocketPath</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FilePath -&gt; SocketPath
forall content (direction :: FileDirection).
FilePath -&gt; File content direction
</span><span class="hs-identifier hs-var">File</span></span><span> </span><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621679486244"><span class="hs-identifier hs-var">socketPath</span></a></span><span>
</span><span id="line-374"></span><span>    </span><span class="annot"><span class="annottext">Tracer IO NodeLog -&gt; NodeLog -&gt; IO ()
forall (m :: * -&gt; *) a. Tracer m a -&gt; a -&gt; m ()
</span><span class="hs-identifier hs-var">traceWith</span></span><span> </span><span class="annot"><span class="annottext">Tracer IO NodeLog
</span><a href="#local-6989586621679486217"><span class="hs-identifier hs-var">tr</span></a></span><span> </span><span class="annot"><span class="annottext">(NodeLog -&gt; IO ()) -&gt; NodeLog -&gt; IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><a href="CardanoNode.html#MsgNodeStarting"><span class="hs-identifier hs-type">MsgNodeStarting</span></a></span><span class="hs-special">{</span><span class="annot"><span class="annottext">FilePath
$sel:stateDirectory:MsgNodeCmdSpec :: FilePath
stateDirectory :: FilePath
</span><a href="CardanoNode.html#%24sel%3AstateDirectory%3AMsgNodeCmdSpec"><span class="hs-identifier hs-var hs-var">stateDirectory</span></a></span><span class="hs-special">}</span><span>
</span><span id="line-375"></span><span>    </span><span class="annot"><span class="annottext">SocketPath -&gt; IO ()
</span><a href="CardanoNode.html#waitForSocket"><span class="hs-identifier hs-var">waitForSocket</span></a></span><span> </span><span class="annot"><span class="annottext">SocketPath
</span><a href="#local-6989586621679486245"><span class="hs-identifier hs-var">nodeSocketPath</span></a></span><span>
</span><span id="line-376"></span><span>    </span><span class="annot"><span class="annottext">Tracer IO NodeLog -&gt; NodeLog -&gt; IO ()
forall (m :: * -&gt; *) a. Tracer m a -&gt; a -&gt; m ()
</span><span class="hs-identifier hs-var">traceWith</span></span><span> </span><span class="annot"><span class="annottext">Tracer IO NodeLog
</span><a href="#local-6989586621679486217"><span class="hs-identifier hs-var">tr</span></a></span><span> </span><span class="annot"><span class="annottext">(NodeLog -&gt; IO ()) -&gt; NodeLog -&gt; IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">SocketPath -&gt; NodeLog
</span><a href="CardanoNode.html#MsgSocketIsReady"><span class="hs-identifier hs-var">MsgSocketIsReady</span></a></span><span> </span><span class="annot"><span class="annottext">SocketPath
</span><a href="#local-6989586621679486245"><span class="hs-identifier hs-var">nodeSocketPath</span></a></span><span>
</span><span id="line-377"></span><span>    </span><span id="local-6989586621679486247"><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621679486247"><span class="hs-identifier hs-var">shelleyGenesis</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">FilePath -&gt; IO Value
</span><a href="#local-6989586621679486248"><span class="hs-identifier hs-var">readShelleyGenesisJSON</span></a></span><span> </span><span class="annot"><span class="annottext">(FilePath -&gt; IO Value) -&gt; FilePath -&gt; IO Value
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621679486218"><span class="hs-identifier hs-var">stateDirectory</span></a></span><span> </span><span class="annot"><span class="annottext">FilePath -&gt; ShowS
</span><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/filepath-1.4.301.0/src/System.FilePath.Posix.html#%3C%2F%3E"><span class="hs-operator hs-var">&lt;/&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">CardanoNodeArgs -&gt; FilePath
</span><a href="CardanoNode.html#%24sel%3AnodeShelleyGenesisFile%3ACardanoNodeArgs"><span class="hs-identifier hs-var">nodeShelleyGenesisFile</span></a></span><span> </span><span class="annot"><span class="annottext">CardanoNodeArgs
</span><a href="#local-6989586621679486219"><span class="hs-identifier hs-var">args</span></a></span><span>
</span><span id="line-378"></span><span>    </span><span class="annot"><span class="annottext">NominalDiffTime -&gt; DirectBackend -&gt; IO a
</span><a href="#local-6989586621679486220"><span class="hs-identifier hs-var">action</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Value -&gt; NominalDiffTime
</span><a href="CardanoNode.html#getShelleyGenesisBlockTime"><span class="hs-identifier hs-var">getShelleyGenesisBlockTime</span></a></span><span> </span><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621679486247"><span class="hs-identifier hs-var">shelleyGenesis</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">DirectOptions -&gt; DirectBackend
</span><span class="hs-identifier hs-var">DirectBackend</span></span><span> </span><span class="annot"><span class="annottext">(DirectOptions -&gt; DirectBackend) -&gt; DirectOptions -&gt; DirectBackend
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">DirectOptions</span></span><span class="hs-special">{</span><span class="annot"><span class="annottext">$sel:networkId:DirectOptions :: NetworkId
</span><span class="hs-identifier hs-var">networkId</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Value -&gt; NetworkId
</span><a href="#local-6989586621679486249"><span class="hs-identifier hs-var">getShelleyGenesisNetworkId</span></a></span><span> </span><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621679486247"><span class="hs-identifier hs-var">shelleyGenesis</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">$sel:nodeSocket:DirectOptions :: SocketPath
</span><span class="hs-identifier hs-var">nodeSocket</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FilePath -&gt; SocketPath
forall content (direction :: FileDirection).
FilePath -&gt; File content direction
</span><span class="hs-identifier hs-var">File</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621679486218"><span class="hs-identifier hs-var">stateDirectory</span></a></span><span> </span><span class="annot"><span class="annottext">FilePath -&gt; ShowS
</span><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/filepath-1.4.301.0/src/System.FilePath.Posix.html#%3C%2F%3E"><span class="hs-operator hs-var">&lt;/&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621679486242"><span class="hs-identifier hs-var">nodeSocket</span></a></span><span class="hs-special">)</span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-379"></span><span>
</span><span id="line-380"></span><span>  </span><span id="local-6989586621679486235"><span class="annot"><span class="annottext">cleanupSocketFile :: IO ()
</span><a href="#local-6989586621679486235"><span class="hs-identifier hs-var hs-var">cleanupSocketFile</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-381"></span><span>    </span><span class="annot"><span class="annottext">IO Bool -&gt; IO () -&gt; IO ()
forall (m :: * -&gt; *). Monad m =&gt; m Bool -&gt; m () -&gt; m ()
</span><span class="hs-identifier hs-var">whenM</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FilePath -&gt; IO Bool
</span><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/directory-1.3.8.5/src/System.Directory.html#doesFileExist"><span class="hs-identifier hs-var">doesFileExist</span></a></span><span> </span><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621679486244"><span class="hs-identifier hs-var">socketPath</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(IO () -&gt; IO ()) -&gt; IO () -&gt; IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-382"></span><span>      </span><span class="annot"><span class="annottext">FilePath -&gt; IO ()
</span><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/directory-1.3.8.5/src/System.Directory.html#removeFile"><span class="hs-identifier hs-var">removeFile</span></a></span><span> </span><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621679486244"><span class="hs-identifier hs-var">socketPath</span></a></span><span>
</span><span id="line-383"></span><span>
</span><span id="line-384"></span><span>  </span><span id="local-6989586621679486248"><span class="annot"><span class="annottext">readShelleyGenesisJSON :: FilePath -&gt; IO Value
</span><a href="#local-6989586621679486248"><span class="hs-identifier hs-var hs-var">readShelleyGenesisJSON</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FilePath -&gt; IO ByteString
forall (m :: * -&gt; *). MonadIO m =&gt; FilePath -&gt; m ByteString
</span><span class="hs-identifier hs-var">readFileBS</span></span><span> </span><span class="annot"><span class="annottext">(FilePath -&gt; IO ByteString)
-&gt; (ByteString -&gt; IO Value) -&gt; FilePath -&gt; IO Value
forall (m :: * -&gt; *) a b c.
Monad m =&gt;
(a -&gt; m b) -&gt; (b -&gt; m c) -&gt; a -&gt; m c
</span><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/Control.Monad.html#%3E%3D%3E"><span class="hs-operator hs-var">&gt;=&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; IO Value
forall a. FromJSON a =&gt; ByteString -&gt; IO a
</span><a href="CardanoNode.html#unsafeDecodeJson"><span class="hs-identifier hs-var">unsafeDecodeJson</span></a></span><span>
</span><span id="line-385"></span><span>
</span><span id="line-386"></span><span>  </span><span class="hs-comment">-- Read 'NetworkId' from shelley genesis JSON file</span><span>
</span><span id="line-387"></span><span>  </span><span class="annot"><a href="#local-6989586621679486249"><span class="hs-identifier hs-type">getShelleyGenesisNetworkId</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Value</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">NetworkId</span></span><span>
</span><span id="line-388"></span><span>  </span><span id="local-6989586621679486249"><span class="annot"><span class="annottext">getShelleyGenesisNetworkId :: Value -&gt; NetworkId
</span><a href="#local-6989586621679486249"><span class="hs-identifier hs-var hs-var">getShelleyGenesisNetworkId</span></a></span></span><span> </span><span id="local-6989586621679486254"><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621679486254"><span class="hs-identifier hs-var">json</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-389"></span><span>    </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621679486254"><span class="hs-identifier hs-var">json</span></a></span><span> </span><span class="annot"><span class="annottext">Value -&gt; Getting (Endo Value) Value Value -&gt; Value
forall s a. HasCallStack =&gt; s -&gt; Getting (Endo a) s a -&gt; a
</span><span class="hs-operator hs-var">^?!</span></span><span> </span><span class="annot"><span class="annottext">Key -&gt; Traversal' Value Value
forall t. AsValue t =&gt; Key -&gt; Traversal' t Value
</span><span class="hs-identifier hs-var">key</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;networkId&quot;</span></span><span> </span><span class="annot"><span class="annottext">Value -&gt; Value -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/ghc-prim-0.10.0/src/GHC.Classes.html#%3D%3D"><span class="hs-operator hs-var">==</span></a></span><span> </span><span class="annot"><span class="annottext">Value
</span><span class="hs-string">&quot;Mainnet&quot;</span></span><span>
</span><span id="line-390"></span><span>      </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">NetworkId
</span><span class="hs-identifier hs-var">Api.Mainnet</span></span><span>
</span><span id="line-391"></span><span>      </span><span class="hs-keyword">else</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-392"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679486256"><span class="annot"><span class="annottext">magic :: Scientific
</span><a href="#local-6989586621679486256"><span class="hs-identifier hs-var hs-var">magic</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621679486254"><span class="hs-identifier hs-var">json</span></a></span><span> </span><span class="annot"><span class="annottext">Value -&gt; Getting (Endo Scientific) Value Scientific -&gt; Scientific
forall s a. HasCallStack =&gt; s -&gt; Getting (Endo a) s a -&gt; a
</span><span class="hs-operator hs-var">^?!</span></span><span> </span><span class="annot"><span class="annottext">Key -&gt; Traversal' Value Value
forall t. AsValue t =&gt; Key -&gt; Traversal' t Value
</span><span class="hs-identifier hs-var">key</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;networkMagic&quot;</span></span><span> </span><span class="annot"><span class="annottext">((Value -&gt; Const (Endo Scientific) Value)
 -&gt; Value -&gt; Const (Endo Scientific) Value)
-&gt; Getting (Endo Scientific) Value Scientific
-&gt; Getting (Endo Scientific) Value Scientific
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">Getting (Endo Scientific) Value Scientific
forall t. AsNumber t =&gt; Prism' t Scientific
Prism' Value Scientific
</span><span class="hs-identifier hs-var">_Number</span></span><span>
</span><span id="line-393"></span><span>        </span><span class="annot"><span class="annottext">NetworkMagic -&gt; NetworkId
</span><span class="hs-identifier hs-var">Api.Testnet</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Word32 -&gt; NetworkMagic
</span><span class="hs-identifier hs-var">Api.NetworkMagic</span></span><span> </span><span class="annot"><span class="annottext">(Word32 -&gt; NetworkMagic) -&gt; Word32 -&gt; NetworkMagic
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Scientific -&gt; Word32
forall b. Integral b =&gt; Scientific -&gt; b
forall a b. (RealFrac a, Integral b) =&gt; a -&gt; b
</span><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/GHC.Real.html#truncate"><span class="hs-identifier hs-var">truncate</span></a></span><span> </span><span class="annot"><span class="annottext">Scientific
</span><a href="#local-6989586621679486256"><span class="hs-identifier hs-var">magic</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-394"></span><span>
</span><span id="line-395"></span><span class="hs-comment">-- Read expected time between blocks from shelley genesis</span><span>
</span><span id="line-396"></span><span class="annot"><a href="CardanoNode.html#getShelleyGenesisBlockTime"><span class="hs-identifier hs-type">getShelleyGenesisBlockTime</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Value</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/time-1.12.2/src/Data.Time.Clock.Internal.NominalDiffTime.html#NominalDiffTime"><span class="hs-identifier hs-type">NominalDiffTime</span></a></span><span>
</span><span id="line-397"></span><span id="getShelleyGenesisBlockTime"><span class="annot"><span class="annottext">getShelleyGenesisBlockTime :: Value -&gt; NominalDiffTime
</span><a href="CardanoNode.html#getShelleyGenesisBlockTime"><span class="hs-identifier hs-var hs-var">getShelleyGenesisBlockTime</span></a></span></span><span> </span><span id="local-6989586621679486261"><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621679486261"><span class="hs-identifier hs-var">json</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-398"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679486262"><span class="annot"><span class="annottext">slotLength :: Scientific
</span><a href="#local-6989586621679486262"><span class="hs-identifier hs-var hs-var">slotLength</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621679486261"><span class="hs-identifier hs-var">json</span></a></span><span> </span><span class="annot"><span class="annottext">Value -&gt; Getting (Endo Scientific) Value Scientific -&gt; Scientific
forall s a. HasCallStack =&gt; s -&gt; Getting (Endo a) s a -&gt; a
</span><span class="hs-operator hs-var">^?!</span></span><span> </span><span class="annot"><span class="annottext">Key -&gt; Traversal' Value Value
forall t. AsValue t =&gt; Key -&gt; Traversal' t Value
</span><span class="hs-identifier hs-var">key</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;slotLength&quot;</span></span><span> </span><span class="annot"><span class="annottext">((Value -&gt; Const (Endo Scientific) Value)
 -&gt; Value -&gt; Const (Endo Scientific) Value)
-&gt; Getting (Endo Scientific) Value Scientific
-&gt; Getting (Endo Scientific) Value Scientific
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">Getting (Endo Scientific) Value Scientific
forall t. AsNumber t =&gt; Prism' t Scientific
Prism' Value Scientific
</span><span class="hs-identifier hs-var">_Number</span></span><span>
</span><span id="line-399"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679486263"><span class="annot"><span class="annottext">activeSlotsCoeff :: Scientific
</span><a href="#local-6989586621679486263"><span class="hs-identifier hs-var hs-var">activeSlotsCoeff</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621679486261"><span class="hs-identifier hs-var">json</span></a></span><span> </span><span class="annot"><span class="annottext">Value -&gt; Getting (Endo Scientific) Value Scientific -&gt; Scientific
forall s a. HasCallStack =&gt; s -&gt; Getting (Endo a) s a -&gt; a
</span><span class="hs-operator hs-var">^?!</span></span><span> </span><span class="annot"><span class="annottext">Key -&gt; Traversal' Value Value
forall t. AsValue t =&gt; Key -&gt; Traversal' t Value
</span><span class="hs-identifier hs-var">key</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;activeSlotsCoeff&quot;</span></span><span> </span><span class="annot"><span class="annottext">((Value -&gt; Const (Endo Scientific) Value)
 -&gt; Value -&gt; Const (Endo Scientific) Value)
-&gt; Getting (Endo Scientific) Value Scientific
-&gt; Getting (Endo Scientific) Value Scientific
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">Getting (Endo Scientific) Value Scientific
forall t. AsNumber t =&gt; Prism' t Scientific
Prism' Value Scientific
</span><span class="hs-identifier hs-var">_Number</span></span><span>
</span><span id="line-400"></span><span>  </span><span class="annot"><span class="annottext">NominalDiffTime -&gt; Rational -&gt; NominalDiffTime
</span><a href="CardanoNode.html#computeBlockTime"><span class="hs-identifier hs-var">computeBlockTime</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Scientific -&gt; NominalDiffTime
forall a b. (Real a, Fractional b) =&gt; a -&gt; b
</span><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/GHC.Real.html#realToFrac"><span class="hs-identifier hs-var">realToFrac</span></a></span><span> </span><span class="annot"><span class="annottext">Scientific
</span><a href="#local-6989586621679486262"><span class="hs-identifier hs-var">slotLength</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Scientific -&gt; Rational
forall a. Real a =&gt; a -&gt; Rational
</span><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/GHC.Real.html#toRational"><span class="hs-identifier hs-var">toRational</span></a></span><span> </span><span class="annot"><span class="annottext">Scientific
</span><a href="#local-6989586621679486263"><span class="hs-identifier hs-var">activeSlotsCoeff</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-401"></span><span>
</span><span id="line-402"></span><span class="hs-comment">-- | Compute the block time (expected time between blocks) given a slot length</span><span>
</span><span id="line-403"></span><span class="hs-comment">-- as diff time and active slot coefficient.</span><span>
</span><span id="line-404"></span><span class="annot"><a href="CardanoNode.html#computeBlockTime"><span class="hs-identifier hs-type">computeBlockTime</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/time-1.12.2/src/Data.Time.Clock.Internal.NominalDiffTime.html#NominalDiffTime"><span class="hs-identifier hs-type">NominalDiffTime</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/GHC.Real.html#Rational"><span class="hs-identifier hs-type">Rational</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/time-1.12.2/src/Data.Time.Clock.Internal.NominalDiffTime.html#NominalDiffTime"><span class="hs-identifier hs-type">NominalDiffTime</span></a></span><span>
</span><span id="line-405"></span><span id="computeBlockTime"><span class="annot"><span class="annottext">computeBlockTime :: NominalDiffTime -&gt; Rational -&gt; NominalDiffTime
</span><a href="CardanoNode.html#computeBlockTime"><span class="hs-identifier hs-var hs-var">computeBlockTime</span></a></span></span><span> </span><span id="local-6989586621679486265"><span class="annot"><span class="annottext">NominalDiffTime
</span><a href="#local-6989586621679486265"><span class="hs-identifier hs-var">slotLength</span></a></span></span><span> </span><span id="local-6989586621679486266"><span class="annot"><span class="annottext">Rational
</span><a href="#local-6989586621679486266"><span class="hs-identifier hs-var">activeSlotsCoeff</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-406"></span><span>  </span><span class="annot"><span class="annottext">NominalDiffTime
</span><a href="#local-6989586621679486265"><span class="hs-identifier hs-var">slotLength</span></a></span><span> </span><span class="annot"><span class="annottext">NominalDiffTime -&gt; NominalDiffTime -&gt; NominalDiffTime
forall a. Fractional a =&gt; a -&gt; a -&gt; a
</span><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/GHC.Real.html#%2F"><span class="hs-operator hs-var">/</span></a></span><span> </span><span class="annot"><span class="annottext">Rational -&gt; NominalDiffTime
forall a b. (Real a, Fractional b) =&gt; a -&gt; b
</span><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/GHC.Real.html#realToFrac"><span class="hs-identifier hs-var">realToFrac</span></a></span><span> </span><span class="annot"><span class="annottext">Rational
</span><a href="#local-6989586621679486266"><span class="hs-identifier hs-var">activeSlotsCoeff</span></a></span><span>
</span><span id="line-407"></span><span>
</span><span id="line-408"></span><span class="hs-comment">-- | Wait until the node is fully caught up with the network. This can take a</span><span>
</span><span id="line-409"></span><span class="hs-comment">-- while!</span><span>
</span><span id="line-410"></span><span id="local-6989586621679485123"><span class="annot"><a href="CardanoNode.html#waitForFullySynchronized"><span class="hs-identifier hs-type">waitForFullySynchronized</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-411"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">ChainBackend</span></span><span> </span><span class="annot"><a href="#local-6989586621679485123"><span class="hs-identifier hs-type">backend</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-412"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">Tracer</span></span><span> </span><span class="annot"><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#IO"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="annot"><a href="CardanoNode.html#NodeLog"><span class="hs-identifier hs-type">NodeLog</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-413"></span><span>  </span><span class="annot"><a href="#local-6989586621679485123"><span class="hs-identifier hs-type">backend</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-414"></span><span>  </span><span class="annot"><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#IO"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span></span><span>
</span><span id="line-415"></span><span id="waitForFullySynchronized"><span class="annot"><span class="annottext">waitForFullySynchronized :: forall backend.
ChainBackend backend =&gt;
Tracer IO NodeLog -&gt; backend -&gt; IO ()
</span><a href="CardanoNode.html#waitForFullySynchronized"><span class="hs-identifier hs-var hs-var">waitForFullySynchronized</span></a></span></span><span> </span><span id="local-6989586621679486313"><span class="annot"><span class="annottext">Tracer IO NodeLog
</span><a href="#local-6989586621679486313"><span class="hs-identifier hs-var">tracer</span></a></span></span><span> </span><span id="local-6989586621679486314"><span class="annot"><span class="annottext">backend
</span><a href="#local-6989586621679486314"><span class="hs-identifier hs-var">backend</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-416"></span><span>  </span><span id="local-6989586621679486315"><span class="annot"><span class="annottext">SystemStart
</span><a href="#local-6989586621679486315"><span class="hs-identifier hs-var">systemStart</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">backend -&gt; QueryPoint -&gt; IO SystemStart
forall a (m :: * -&gt; *).
(ChainBackend a, MonadIO m, MonadThrow m) =&gt;
a -&gt; QueryPoint -&gt; m SystemStart
forall (m :: * -&gt; *).
(MonadIO m, MonadThrow m) =&gt;
backend -&gt; QueryPoint -&gt; m SystemStart
</span><span class="hs-identifier hs-var">Backend.querySystemStart</span></span><span> </span><span class="annot"><span class="annottext">backend
</span><a href="#local-6989586621679486314"><span class="hs-identifier hs-var">backend</span></a></span><span> </span><span class="annot"><span class="annottext">QueryPoint
</span><span class="hs-identifier hs-var">QueryTip</span></span><span>
</span><span id="line-417"></span><span>  </span><span class="annot"><span class="annottext">SystemStart -&gt; IO ()
</span><a href="#local-6989586621679486317"><span class="hs-identifier hs-var">check</span></a></span><span> </span><span class="annot"><span class="annottext">SystemStart
</span><a href="#local-6989586621679486315"><span class="hs-identifier hs-var">systemStart</span></a></span><span>
</span><span id="line-418"></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-419"></span><span>  </span><span id="local-6989586621679486317"><span class="annot"><span class="annottext">check :: SystemStart -&gt; IO ()
</span><a href="#local-6989586621679486317"><span class="hs-identifier hs-var hs-var">check</span></a></span></span><span> </span><span id="local-6989586621679486318"><span class="annot"><span class="annottext">SystemStart
</span><a href="#local-6989586621679486318"><span class="hs-identifier hs-var">systemStart</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-420"></span><span>    </span><span id="local-6989586621679486319"><span class="annot"><span class="annottext">RelativeTime
</span><a href="#local-6989586621679486319"><span class="hs-identifier hs-var">targetTime</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">SystemStart -&gt; UTCTime -&gt; RelativeTime
</span><span class="hs-identifier hs-var">toRelativeTime</span></span><span> </span><span class="annot"><span class="annottext">SystemStart
</span><a href="#local-6989586621679486318"><span class="hs-identifier hs-var">systemStart</span></a></span><span> </span><span class="annot"><span class="annottext">(UTCTime -&gt; RelativeTime) -&gt; IO UTCTime -&gt; IO RelativeTime
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/Data.Functor.html#%3C%24%3E"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">IO UTCTime
forall (m :: * -&gt; *). MonadTime m =&gt; m UTCTime
</span><span class="hs-identifier hs-var">getCurrentTime</span></span><span>
</span><span id="line-421"></span><span>    </span><span id="local-6989586621679486322"><span class="annot"><span class="annottext">EraHistory
</span><a href="#local-6989586621679486322"><span class="hs-identifier hs-var">eraHistory</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">backend -&gt; QueryPoint -&gt; IO EraHistory
forall a (m :: * -&gt; *).
(ChainBackend a, MonadIO m, MonadThrow m) =&gt;
a -&gt; QueryPoint -&gt; m EraHistory
forall (m :: * -&gt; *).
(MonadIO m, MonadThrow m) =&gt;
backend -&gt; QueryPoint -&gt; m EraHistory
</span><span class="hs-identifier hs-var">Backend.queryEraHistory</span></span><span> </span><span class="annot"><span class="annottext">backend
</span><a href="#local-6989586621679486314"><span class="hs-identifier hs-var">backend</span></a></span><span> </span><span class="annot"><span class="annottext">QueryPoint
</span><span class="hs-identifier hs-var">QueryTip</span></span><span>
</span><span id="line-422"></span><span>    </span><span id="local-6989586621679486324"><span class="annot"><span class="annottext">SlotNo
</span><a href="#local-6989586621679486324"><span class="hs-identifier hs-var">tipSlotNo</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">SlotNo -&gt; Maybe SlotNo -&gt; SlotNo
forall a. a -&gt; Maybe a -&gt; a
</span><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/Data.Maybe.html#fromMaybe"><span class="hs-identifier hs-var">fromMaybe</span></a></span><span> </span><span class="annot"><span class="annottext">SlotNo
</span><span class="hs-number">0</span></span><span> </span><span class="annot"><span class="annottext">(Maybe SlotNo -&gt; SlotNo)
-&gt; (ChainPoint -&gt; Maybe SlotNo) -&gt; ChainPoint -&gt; SlotNo
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">ChainPoint -&gt; Maybe SlotNo
</span><span class="hs-identifier hs-var">Api.chainPointToSlotNo</span></span><span> </span><span class="annot"><span class="annottext">(ChainPoint -&gt; SlotNo) -&gt; IO ChainPoint -&gt; IO SlotNo
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/Data.Functor.html#%3C%24%3E"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">backend -&gt; IO ChainPoint
forall a (m :: * -&gt; *).
(ChainBackend a, MonadIO m, MonadThrow m) =&gt;
a -&gt; m ChainPoint
forall (m :: * -&gt; *).
(MonadIO m, MonadThrow m) =&gt;
backend -&gt; m ChainPoint
</span><span class="hs-identifier hs-var">Backend.queryTip</span></span><span> </span><span class="annot"><span class="annottext">backend
</span><a href="#local-6989586621679486314"><span class="hs-identifier hs-var">backend</span></a></span><span>
</span><span id="line-423"></span><span>    </span><span class="hs-special">(</span><span id="local-6989586621679486328"><span class="annot"><span class="annottext">RelativeTime
</span><a href="#local-6989586621679486328"><span class="hs-identifier hs-var">tipTime</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679486329"><span class="annot"><span class="annottext">SlotLength
</span><a href="#local-6989586621679486329"><span class="hs-identifier hs-var">_slotLength</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(PastHorizonException -&gt; IO (RelativeTime, SlotLength))
-&gt; ((RelativeTime, SlotLength) -&gt; IO (RelativeTime, SlotLength))
-&gt; Either PastHorizonException (RelativeTime, SlotLength)
-&gt; IO (RelativeTime, SlotLength)
forall a c b. (a -&gt; c) -&gt; (b -&gt; c) -&gt; Either a b -&gt; c
</span><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/Data.Either.html#either"><span class="hs-identifier hs-var">either</span></a></span><span> </span><span class="annot"><span class="annottext">PastHorizonException -&gt; IO (RelativeTime, SlotLength)
forall e a. Exception e =&gt; e -&gt; IO a
forall (m :: * -&gt; *) e a. (MonadThrow m, Exception e) =&gt; e -&gt; m a
</span><span class="hs-identifier hs-var">throwIO</span></span><span> </span><span class="annot"><span class="annottext">(RelativeTime, SlotLength) -&gt; IO (RelativeTime, SlotLength)
forall a. a -&gt; IO a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/GHC.Base.html#pure"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">(Either PastHorizonException (RelativeTime, SlotLength)
 -&gt; IO (RelativeTime, SlotLength))
-&gt; Either PastHorizonException (RelativeTime, SlotLength)
-&gt; IO (RelativeTime, SlotLength)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">SlotNo
-&gt; EraHistory
-&gt; Either PastHorizonException (RelativeTime, SlotLength)
</span><span class="hs-identifier hs-var">getProgress</span></span><span> </span><span class="annot"><span class="annottext">SlotNo
</span><a href="#local-6989586621679486324"><span class="hs-identifier hs-var">tipSlotNo</span></a></span><span> </span><span class="annot"><span class="annottext">EraHistory
</span><a href="#local-6989586621679486322"><span class="hs-identifier hs-var">eraHistory</span></a></span><span>
</span><span id="line-424"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679486331"><span class="annot"><span class="annottext">timeDifference :: NominalDiffTime
</span><a href="#local-6989586621679486331"><span class="hs-identifier hs-var hs-var">timeDifference</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">RelativeTime -&gt; RelativeTime -&gt; NominalDiffTime
</span><span class="hs-identifier hs-var">diffRelativeTime</span></span><span> </span><span class="annot"><span class="annottext">RelativeTime
</span><a href="#local-6989586621679486319"><span class="hs-identifier hs-var">targetTime</span></a></span><span> </span><span class="annot"><span class="annottext">RelativeTime
</span><a href="#local-6989586621679486328"><span class="hs-identifier hs-var">tipTime</span></a></span><span>
</span><span id="line-425"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679486332"><span class="annot"><span class="annottext">percentDone :: Centi
</span><a href="#local-6989586621679486332"><span class="hs-identifier hs-var hs-var">percentDone</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">NominalDiffTime -&gt; Centi
forall a b. (Real a, Fractional b) =&gt; a -&gt; b
</span><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/GHC.Real.html#realToFrac"><span class="hs-identifier hs-var">realToFrac</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">NominalDiffTime
</span><span class="hs-number">100.0</span></span><span> </span><span class="annot"><span class="annottext">NominalDiffTime -&gt; NominalDiffTime -&gt; NominalDiffTime
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/GHC.Num.html#%2A"><span class="hs-operator hs-var">*</span></a></span><span> </span><span class="annot"><span class="annottext">RelativeTime -&gt; NominalDiffTime
</span><span class="hs-identifier hs-var">getRelativeTime</span></span><span> </span><span class="annot"><span class="annottext">RelativeTime
</span><a href="#local-6989586621679486328"><span class="hs-identifier hs-var">tipTime</span></a></span><span> </span><span class="annot"><span class="annottext">NominalDiffTime -&gt; NominalDiffTime -&gt; NominalDiffTime
forall a. Fractional a =&gt; a -&gt; a -&gt; a
</span><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/GHC.Real.html#%2F"><span class="hs-operator hs-var">/</span></a></span><span> </span><span class="annot"><span class="annottext">RelativeTime -&gt; NominalDiffTime
</span><span class="hs-identifier hs-var">getRelativeTime</span></span><span> </span><span class="annot"><span class="annottext">RelativeTime
</span><a href="#local-6989586621679486319"><span class="hs-identifier hs-var">targetTime</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-426"></span><span>    </span><span id="local-6989586621679486334"><span class="annot"><span class="annottext">NominalDiffTime
</span><a href="#local-6989586621679486334"><span class="hs-identifier hs-var">blockTime</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">backend -&gt; (MonadIO IO, MonadThrow IO) =&gt; IO NominalDiffTime
forall a (m :: * -&gt; *).
ChainBackend a =&gt;
a -&gt; (MonadIO m, MonadThrow m) =&gt; m NominalDiffTime
forall (m :: * -&gt; *).
backend -&gt; (MonadIO m, MonadThrow m) =&gt; m NominalDiffTime
</span><span class="hs-identifier hs-var">Backend.getBlockTime</span></span><span> </span><span class="annot"><span class="annottext">backend
</span><a href="#local-6989586621679486314"><span class="hs-identifier hs-var">backend</span></a></span><span>
</span><span id="line-427"></span><span>    </span><span class="annot"><span class="annottext">Tracer IO NodeLog -&gt; NodeLog -&gt; IO ()
forall (m :: * -&gt; *) a. Tracer m a -&gt; a -&gt; m ()
</span><span class="hs-identifier hs-var">traceWith</span></span><span> </span><span class="annot"><span class="annottext">Tracer IO NodeLog
</span><a href="#local-6989586621679486313"><span class="hs-identifier hs-var">tracer</span></a></span><span> </span><span class="annot"><span class="annottext">(NodeLog -&gt; IO ()) -&gt; NodeLog -&gt; IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><a href="CardanoNode.html#MsgSynchronizing"><span class="hs-identifier hs-type">MsgSynchronizing</span></a></span><span class="hs-special">{</span><span class="annot"><span class="annottext">Centi
$sel:percentDone:MsgNodeCmdSpec :: Centi
percentDone :: Centi
</span><a href="CardanoNode.html#%24sel%3ApercentDone%3AMsgNodeCmdSpec"><span class="hs-identifier hs-var hs-var">percentDone</span></a></span><span class="hs-special">}</span><span>
</span><span id="line-428"></span><span>    </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">NominalDiffTime
</span><a href="#local-6989586621679486331"><span class="hs-identifier hs-var">timeDifference</span></a></span><span> </span><span class="annot"><span class="annottext">NominalDiffTime -&gt; NominalDiffTime -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/ghc-prim-0.10.0/src/GHC.Classes.html#%3C"><span class="hs-operator hs-var">&lt;</span></a></span><span> </span><span class="annot"><span class="annottext">NominalDiffTime
</span><a href="#local-6989586621679486334"><span class="hs-identifier hs-var">blockTime</span></a></span><span>
</span><span id="line-429"></span><span>      </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">() -&gt; IO ()
forall a. a -&gt; IO a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/GHC.Base.html#pure"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-430"></span><span>      </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">DiffTime -&gt; IO ()
forall (m :: * -&gt; *). MonadDelay m =&gt; DiffTime -&gt; m ()
</span><span class="hs-identifier hs-var">threadDelay</span></span><span> </span><span class="annot"><span class="annottext">DiffTime
</span><span class="hs-number">3</span></span><span> </span><span class="annot"><span class="annottext">IO () -&gt; IO () -&gt; IO ()
forall a b. IO a -&gt; IO b -&gt; IO b
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; m b -&gt; m b
</span><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/GHC.Base.html#%3E%3E"><span class="hs-operator hs-var">&gt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SystemStart -&gt; IO ()
</span><a href="#local-6989586621679486317"><span class="hs-identifier hs-var">check</span></a></span><span> </span><span class="annot"><span class="annottext">SystemStart
</span><a href="#local-6989586621679486318"><span class="hs-identifier hs-var">systemStart</span></a></span><span>
</span><span id="line-431"></span><span>
</span><span id="line-432"></span><span class="annot"><span class="hs-comment">-- | Wait for the node socket file to become available.</span></span><span>
</span><span id="line-433"></span><span class="annot"><a href="CardanoNode.html#waitForSocket"><span class="hs-identifier hs-type">waitForSocket</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">SocketPath</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#IO"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-434"></span><span id="waitForSocket"><span class="annot"><span class="annottext">waitForSocket :: SocketPath -&gt; IO ()
</span><a href="CardanoNode.html#waitForSocket"><span class="hs-identifier hs-var hs-var">waitForSocket</span></a></span></span><span> </span><span id="local-6989586621679486337"><span class="annot"><span class="annottext">SocketPath
</span><a href="#local-6989586621679486337"><span class="hs-identifier hs-var">socketPath</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-435"></span><span>  </span><span class="annot"><span class="annottext">IO Bool -&gt; IO () -&gt; IO ()
forall (m :: * -&gt; *). Monad m =&gt; m Bool -&gt; m () -&gt; m ()
</span><span class="hs-identifier hs-var">unlessM</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FilePath -&gt; IO Bool
</span><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/directory-1.3.8.5/src/System.Directory.html#doesFileExist"><span class="hs-identifier hs-var">doesFileExist</span></a></span><span> </span><span class="annot"><span class="annottext">(FilePath -&gt; IO Bool) -&gt; FilePath -&gt; IO Bool
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">SocketPath -&gt; FilePath
forall content (direction :: FileDirection).
File content direction -&gt; FilePath
</span><span class="hs-identifier hs-var">unFile</span></span><span> </span><span class="annot"><span class="annottext">SocketPath
</span><a href="#local-6989586621679486337"><span class="hs-identifier hs-var">socketPath</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(IO () -&gt; IO ()) -&gt; IO () -&gt; IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-436"></span><span>    </span><span class="annot"><span class="annottext">DiffTime -&gt; IO ()
forall (m :: * -&gt; *). MonadDelay m =&gt; DiffTime -&gt; m ()
</span><span class="hs-identifier hs-var">threadDelay</span></span><span> </span><span class="annot"><span class="annottext">DiffTime
</span><span class="hs-number">0.1</span></span><span>
</span><span id="line-437"></span><span>    </span><span class="annot"><span class="annottext">SocketPath -&gt; IO ()
</span><a href="CardanoNode.html#waitForSocket"><span class="hs-identifier hs-var">waitForSocket</span></a></span><span> </span><span class="annot"><span class="annottext">SocketPath
</span><a href="#local-6989586621679486337"><span class="hs-identifier hs-var">socketPath</span></a></span><span>
</span><span id="line-438"></span><span>
</span><span id="line-439"></span><span class="annot"><span class="hs-comment">-- | Generate command-line arguments for launching @cardano-node@.</span></span><span>
</span><span id="line-440"></span><span class="annot"><a href="CardanoNode.html#cardanoNodeProcess"><span class="hs-identifier hs-type">cardanoNodeProcess</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/GHC.Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/GHC.IO.html#FilePath"><span class="hs-identifier hs-type">FilePath</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="CardanoNode.html#CardanoNodeArgs"><span class="hs-identifier hs-type">CardanoNodeArgs</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/process-1.6.19.0/src/System.Process.Common.html#CreateProcess"><span class="hs-identifier hs-type">CreateProcess</span></a></span><span>
</span><span id="line-441"></span><span id="cardanoNodeProcess"><span class="annot"><span class="annottext">cardanoNodeProcess :: Maybe FilePath -&gt; CardanoNodeArgs -&gt; CreateProcess
</span><a href="CardanoNode.html#cardanoNodeProcess"><span class="hs-identifier hs-var hs-var">cardanoNodeProcess</span></a></span></span><span> </span><span id="local-6989586621679486339"><span class="annot"><span class="annottext">Maybe FilePath
</span><a href="#local-6989586621679486339"><span class="hs-identifier hs-var">cwd</span></a></span></span><span> </span><span id="local-6989586621679486340"><span class="annot"><span class="annottext">CardanoNodeArgs
</span><a href="#local-6989586621679486340"><span class="hs-identifier hs-var">args</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-442"></span><span>  </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FilePath -&gt; [FilePath] -&gt; CreateProcess
</span><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/process-1.6.19.0/src/System.Process.html#proc"><span class="hs-identifier hs-var">proc</span></a></span><span> </span><span class="annot"><span class="annottext">FilePath
</span><span class="hs-string">&quot;cardano-node&quot;</span></span><span> </span><span class="annot"><span class="annottext">[FilePath]
</span><a href="#local-6989586621679486341"><span class="hs-identifier hs-var">strArgs</span></a></span><span class="hs-special">)</span><span class="hs-special">{</span><span class="annot"><a href="#local-6989586621679486339"><span class="hs-identifier hs-type hs-var">cwd</span></a></span><span class="hs-special">}</span><span>
</span><span id="line-443"></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-444"></span><span>  </span><span class="annot"><a href="CardanoNode.html#CardanoNodeArgs"><span class="hs-identifier hs-type">CardanoNodeArgs</span></a></span><span>
</span><span id="line-445"></span><span>    </span><span class="hs-special">{</span><span> </span><span id="local-6989586621679486343"><span class="annot"><span class="annottext">FilePath
$sel:nodeConfigFile:CardanoNodeArgs :: CardanoNodeArgs -&gt; FilePath
nodeConfigFile :: FilePath
</span><a href="CardanoNode.html#%24sel%3AnodeConfigFile%3ACardanoNodeArgs"><span class="hs-identifier hs-var hs-var">nodeConfigFile</span></a></span></span><span>
</span><span id="line-446"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="local-6989586621679486344"><span class="annot"><span class="annottext">FilePath
$sel:nodeTopologyFile:CardanoNodeArgs :: CardanoNodeArgs -&gt; FilePath
nodeTopologyFile :: FilePath
</span><a href="CardanoNode.html#%24sel%3AnodeTopologyFile%3ACardanoNodeArgs"><span class="hs-identifier hs-var hs-var">nodeTopologyFile</span></a></span></span><span>
</span><span id="line-447"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="local-6989586621679486345"><span class="annot"><span class="annottext">FilePath
$sel:nodeDatabaseDir:CardanoNodeArgs :: CardanoNodeArgs -&gt; FilePath
nodeDatabaseDir :: FilePath
</span><a href="CardanoNode.html#%24sel%3AnodeDatabaseDir%3ACardanoNodeArgs"><span class="hs-identifier hs-var hs-var">nodeDatabaseDir</span></a></span></span><span>
</span><span id="line-448"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="local-6989586621679486346"><span class="annot"><span class="annottext">FilePath
$sel:nodeSocket:CardanoNodeArgs :: CardanoNodeArgs -&gt; FilePath
nodeSocket :: FilePath
</span><a href="CardanoNode.html#%24sel%3AnodeSocket%3ACardanoNodeArgs"><span class="hs-identifier hs-var hs-var">nodeSocket</span></a></span></span><span>
</span><span id="line-449"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="local-6989586621679486347"><span class="annot"><span class="annottext">Maybe Int
$sel:nodePort:CardanoNodeArgs :: CardanoNodeArgs -&gt; Maybe Int
nodePort :: Maybe Int
</span><a href="CardanoNode.html#%24sel%3AnodePort%3ACardanoNodeArgs"><span class="hs-identifier hs-var hs-var">nodePort</span></a></span></span><span>
</span><span id="line-450"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="local-6989586621679486348"><span class="annot"><span class="annottext">Maybe FilePath
$sel:nodeSignKeyFile:CardanoNodeArgs :: CardanoNodeArgs -&gt; Maybe FilePath
nodeSignKeyFile :: Maybe FilePath
</span><a href="CardanoNode.html#%24sel%3AnodeSignKeyFile%3ACardanoNodeArgs"><span class="hs-identifier hs-var hs-var">nodeSignKeyFile</span></a></span></span><span>
</span><span id="line-451"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="local-6989586621679486349"><span class="annot"><span class="annottext">Maybe FilePath
$sel:nodeDlgCertFile:CardanoNodeArgs :: CardanoNodeArgs -&gt; Maybe FilePath
nodeDlgCertFile :: Maybe FilePath
</span><a href="CardanoNode.html#%24sel%3AnodeDlgCertFile%3ACardanoNodeArgs"><span class="hs-identifier hs-var hs-var">nodeDlgCertFile</span></a></span></span><span>
</span><span id="line-452"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="local-6989586621679486350"><span class="annot"><span class="annottext">Maybe FilePath
$sel:nodeOpCertFile:CardanoNodeArgs :: CardanoNodeArgs -&gt; Maybe FilePath
nodeOpCertFile :: Maybe FilePath
</span><a href="CardanoNode.html#%24sel%3AnodeOpCertFile%3ACardanoNodeArgs"><span class="hs-identifier hs-var hs-var">nodeOpCertFile</span></a></span></span><span>
</span><span id="line-453"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="local-6989586621679486351"><span class="annot"><span class="annottext">Maybe FilePath
$sel:nodeKesKeyFile:CardanoNodeArgs :: CardanoNodeArgs -&gt; Maybe FilePath
nodeKesKeyFile :: Maybe FilePath
</span><a href="CardanoNode.html#%24sel%3AnodeKesKeyFile%3ACardanoNodeArgs"><span class="hs-identifier hs-var hs-var">nodeKesKeyFile</span></a></span></span><span>
</span><span id="line-454"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="local-6989586621679486352"><span class="annot"><span class="annottext">Maybe FilePath
$sel:nodeVrfKeyFile:CardanoNodeArgs :: CardanoNodeArgs -&gt; Maybe FilePath
nodeVrfKeyFile :: Maybe FilePath
</span><a href="CardanoNode.html#%24sel%3AnodeVrfKeyFile%3ACardanoNodeArgs"><span class="hs-identifier hs-var hs-var">nodeVrfKeyFile</span></a></span></span><span>
</span><span id="line-455"></span><span>    </span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CardanoNodeArgs
</span><a href="#local-6989586621679486340"><span class="hs-identifier hs-var">args</span></a></span><span>
</span><span id="line-456"></span><span>
</span><span id="line-457"></span><span>  </span><span id="local-6989586621679486341"><span class="annot"><span class="annottext">strArgs :: [FilePath]
</span><a href="#local-6989586621679486341"><span class="hs-identifier hs-var hs-var">strArgs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-458"></span><span>    </span><span class="annot"><span class="annottext">FilePath
</span><span class="hs-string">&quot;run&quot;</span></span><span>
</span><span id="line-459"></span><span>      </span><span class="annot"><span class="annottext">FilePath -&gt; [FilePath] -&gt; [FilePath]
forall a. a -&gt; [a] -&gt; [a]
</span><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#%3A"><span class="hs-glyph hs-var">:</span></a></span><span> </span><span class="annot"><span class="annottext">[[FilePath]] -&gt; [FilePath]
forall a. Monoid a =&gt; [a] -&gt; a
</span><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/GHC.Base.html#mconcat"><span class="hs-identifier hs-var">mconcat</span></a></span><span>
</span><span id="line-460"></span><span>        </span><span class="hs-special">[</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">FilePath
</span><span class="hs-string">&quot;--config&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621679486343"><span class="hs-identifier hs-var">nodeConfigFile</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-461"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">FilePath
</span><span class="hs-string">&quot;--topology&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621679486344"><span class="hs-identifier hs-var">nodeTopologyFile</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-462"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">FilePath
</span><span class="hs-string">&quot;--database-path&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621679486345"><span class="hs-identifier hs-var">nodeDatabaseDir</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-463"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">FilePath
</span><span class="hs-string">&quot;--socket-path&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621679486346"><span class="hs-identifier hs-var">nodeSocket</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-464"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">FilePath -&gt; Maybe FilePath -&gt; [FilePath]
forall a. a -&gt; Maybe a -&gt; [a]
</span><a href="#local-6989586621679486353"><span class="hs-identifier hs-var">opt</span></a></span><span> </span><span class="annot"><span class="annottext">FilePath
</span><span class="hs-string">&quot;--port&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; FilePath
forall b a. (Show a, IsString b) =&gt; a -&gt; b
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">(Int -&gt; FilePath) -&gt; Maybe Int -&gt; Maybe FilePath
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/Data.Functor.html#%3C%24%3E"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Int
</span><a href="#local-6989586621679486347"><span class="hs-identifier hs-var">nodePort</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-465"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">FilePath -&gt; Maybe FilePath -&gt; [FilePath]
forall a. a -&gt; Maybe a -&gt; [a]
</span><a href="#local-6989586621679486353"><span class="hs-identifier hs-var">opt</span></a></span><span> </span><span class="annot"><span class="annottext">FilePath
</span><span class="hs-string">&quot;--byron-signing-key&quot;</span></span><span> </span><span class="annot"><span class="annottext">Maybe FilePath
</span><a href="#local-6989586621679486348"><span class="hs-identifier hs-var">nodeSignKeyFile</span></a></span><span>
</span><span id="line-466"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">FilePath -&gt; Maybe FilePath -&gt; [FilePath]
forall a. a -&gt; Maybe a -&gt; [a]
</span><a href="#local-6989586621679486353"><span class="hs-identifier hs-var">opt</span></a></span><span> </span><span class="annot"><span class="annottext">FilePath
</span><span class="hs-string">&quot;--byron-delegation-certificate&quot;</span></span><span> </span><span class="annot"><span class="annottext">Maybe FilePath
</span><a href="#local-6989586621679486349"><span class="hs-identifier hs-var">nodeDlgCertFile</span></a></span><span>
</span><span id="line-467"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">FilePath -&gt; Maybe FilePath -&gt; [FilePath]
forall a. a -&gt; Maybe a -&gt; [a]
</span><a href="#local-6989586621679486353"><span class="hs-identifier hs-var">opt</span></a></span><span> </span><span class="annot"><span class="annottext">FilePath
</span><span class="hs-string">&quot;--shelley-operational-certificate&quot;</span></span><span> </span><span class="annot"><span class="annottext">Maybe FilePath
</span><a href="#local-6989586621679486350"><span class="hs-identifier hs-var">nodeOpCertFile</span></a></span><span>
</span><span id="line-468"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">FilePath -&gt; Maybe FilePath -&gt; [FilePath]
forall a. a -&gt; Maybe a -&gt; [a]
</span><a href="#local-6989586621679486353"><span class="hs-identifier hs-var">opt</span></a></span><span> </span><span class="annot"><span class="annottext">FilePath
</span><span class="hs-string">&quot;--shelley-kes-key&quot;</span></span><span> </span><span class="annot"><span class="annottext">Maybe FilePath
</span><a href="#local-6989586621679486351"><span class="hs-identifier hs-var">nodeKesKeyFile</span></a></span><span>
</span><span id="line-469"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">FilePath -&gt; Maybe FilePath -&gt; [FilePath]
forall a. a -&gt; Maybe a -&gt; [a]
</span><a href="#local-6989586621679486353"><span class="hs-identifier hs-var">opt</span></a></span><span> </span><span class="annot"><span class="annottext">FilePath
</span><span class="hs-string">&quot;--shelley-vrf-key&quot;</span></span><span> </span><span class="annot"><span class="annottext">Maybe FilePath
</span><a href="#local-6989586621679486352"><span class="hs-identifier hs-var">nodeVrfKeyFile</span></a></span><span>
</span><span id="line-470"></span><span>        </span><span class="hs-special">]</span><span>
</span><span id="line-471"></span><span>
</span><span id="line-472"></span><span>  </span><span id="local-6989586621679485151"><span class="annot"><a href="#local-6989586621679486353"><span class="hs-identifier hs-type">opt</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="#local-6989586621679485151"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/GHC.Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679485151"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621679485151"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">]</span></span><span>
</span><span id="line-473"></span><span>  </span><span id="local-6989586621679486353"><span class="annot"><span class="annottext">opt :: forall a. a -&gt; Maybe a -&gt; [a]
</span><a href="#local-6989586621679486353"><span class="hs-identifier hs-var hs-var">opt</span></a></span></span><span> </span><span id="local-6989586621679486354"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679486354"><span class="hs-identifier hs-var">arg</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-474"></span><span>    </span><span class="annot"><span class="annottext">Maybe a
</span><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/GHC.Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-475"></span><span>    </span><span class="annot"><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/GHC.Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621679486355"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679486355"><span class="hs-identifier hs-var">val</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679486354"><span class="hs-identifier hs-var">arg</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679486355"><span class="hs-identifier hs-var">val</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-476"></span><span>
</span><span id="line-477"></span><span class="hs-comment">-- | Initialize the system start time to now (modulo a small offset needed to</span><span>
</span><span id="line-478"></span><span class="hs-comment">-- give time to the system to bootstrap correctly).</span><span>
</span><span id="line-479"></span><span class="annot"><a href="CardanoNode.html#initSystemStart"><span class="hs-identifier hs-type">initSystemStart</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#IO"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="annot"><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/time-1.12.2/src/Data.Time.Clock.Internal.UTCTime.html#UTCTime"><span class="hs-identifier hs-type">UTCTime</span></a></span><span>
</span><span id="line-480"></span><span id="initSystemStart"><span class="annot"><span class="annottext">initSystemStart :: IO UTCTime
</span><a href="CardanoNode.html#initSystemStart"><span class="hs-identifier hs-var hs-var">initSystemStart</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-481"></span><span>  </span><span class="annot"><span class="annottext">NominalDiffTime -&gt; UTCTime -&gt; UTCTime
</span><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/time-1.12.2/src/Data.Time.Clock.Internal.UTCDiff.html#addUTCTime"><span class="hs-identifier hs-var">addUTCTime</span></a></span><span> </span><span class="annot"><span class="annottext">NominalDiffTime
</span><span class="hs-number">1</span></span><span> </span><span class="annot"><span class="annottext">(UTCTime -&gt; UTCTime) -&gt; IO UTCTime -&gt; IO UTCTime
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/Data.Functor.html#%3C%24%3E"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">IO UTCTime
forall (m :: * -&gt; *). MonadTime m =&gt; m UTCTime
</span><span class="hs-identifier hs-var">getCurrentTime</span></span><span>
</span><span id="line-482"></span><span>
</span><span id="line-483"></span><span class="annot"><span class="hs-comment">-- | Re-generate configuration and genesis files with fresh system start times.</span></span><span>
</span><span id="line-484"></span><span class="annot"><a href="CardanoNode.html#refreshSystemStart"><span class="hs-identifier hs-type">refreshSystemStart</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-485"></span><span>  </span><span class="annot"><span class="hs-comment">-- | Working directory in which paths of 'CardanoNodeArgs' are resolved.</span></span><span>
</span><span id="line-486"></span><span>  </span><span class="annot"><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/GHC.IO.html#FilePath"><span class="hs-identifier hs-type">FilePath</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-487"></span><span>  </span><span class="annot"><a href="CardanoNode.html#CardanoNodeArgs"><span class="hs-identifier hs-type">CardanoNodeArgs</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-488"></span><span>  </span><span class="annot"><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#IO"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-489"></span><span id="refreshSystemStart"><span class="annot"><span class="annottext">refreshSystemStart :: FilePath -&gt; CardanoNodeArgs -&gt; IO ()
</span><a href="CardanoNode.html#refreshSystemStart"><span class="hs-identifier hs-var hs-var">refreshSystemStart</span></a></span></span><span> </span><span id="local-6989586621679486358"><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621679486358"><span class="hs-identifier hs-var">stateDirectory</span></a></span></span><span> </span><span id="local-6989586621679486359"><span class="annot"><span class="annottext">CardanoNodeArgs
</span><a href="#local-6989586621679486359"><span class="hs-identifier hs-var">args</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-490"></span><span>  </span><span id="local-6989586621679486360"><span class="annot"><span class="annottext">UTCTime
</span><a href="#local-6989586621679486360"><span class="hs-identifier hs-var">systemStart</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">IO UTCTime
</span><a href="CardanoNode.html#initSystemStart"><span class="hs-identifier hs-var">initSystemStart</span></a></span><span>
</span><span id="line-491"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679486361"><span class="annot"><span class="annottext">startTime :: Int
</span><a href="#local-6989586621679486361"><span class="hs-identifier hs-var hs-var">startTime</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a b. (RealFrac a, Integral b) =&gt; a -&gt; b
</span><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/GHC.Real.html#round"><span class="hs-identifier hs-var">round</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#Int"><span class="hs-identifier hs-type">Int</span></a></span><span> </span><span class="annot"><span class="annottext">(NominalDiffTime -&gt; Int) -&gt; NominalDiffTime -&gt; Int
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">UTCTime -&gt; NominalDiffTime
</span><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/time-1.12.2/src/Data.Time.Clock.POSIX.html#utcTimeToPOSIXSeconds"><span class="hs-identifier hs-var">utcTimeToPOSIXSeconds</span></a></span><span> </span><span class="annot"><span class="annottext">UTCTime
</span><a href="#local-6989586621679486360"><span class="hs-identifier hs-var">systemStart</span></a></span><span>
</span><span id="line-492"></span><span>  </span><span id="local-6989586621679486363"><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621679486363"><span class="hs-identifier hs-var">byronGenesis</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span>
</span><span id="line-493"></span><span>    </span><span class="annot"><span class="annottext">forall a. FromJSON a =&gt; FilePath -&gt; IO a
</span><a href="CardanoNode.html#unsafeDecodeJsonFile"><span class="hs-identifier hs-var">unsafeDecodeJsonFile</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><span class="hs-identifier hs-type">Aeson.Value</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621679486358"><span class="hs-identifier hs-var">stateDirectory</span></a></span><span> </span><span class="annot"><span class="annottext">FilePath -&gt; ShowS
</span><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/filepath-1.4.301.0/src/System.FilePath.Posix.html#%3C%2F%3E"><span class="hs-operator hs-var">&lt;/&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">CardanoNodeArgs -&gt; FilePath
</span><a href="CardanoNode.html#%24sel%3AnodeByronGenesisFile%3ACardanoNodeArgs"><span class="hs-identifier hs-var">nodeByronGenesisFile</span></a></span><span> </span><span class="annot"><span class="annottext">CardanoNodeArgs
</span><a href="#local-6989586621679486359"><span class="hs-identifier hs-var">args</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-494"></span><span>      </span><span class="annot"><span class="annottext">IO Value -&gt; (Value -&gt; Value) -&gt; IO Value
forall (f :: * -&gt; *) a b. Functor f =&gt; f a -&gt; (a -&gt; b) -&gt; f b
</span><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/Data.Functor.html#%3C%26%3E"><span class="hs-operator hs-var">&lt;&amp;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Key -&gt; Traversal' Value (Maybe Value)
forall t. AsValue t =&gt; Key -&gt; Traversal' t (Maybe Value)
</span><span class="hs-identifier hs-var">atKey</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;startTime&quot;</span></span><span> </span><span class="annot"><span class="annottext">((Maybe Value -&gt; Identity (Maybe Value))
 -&gt; Value -&gt; Identity Value)
-&gt; Value -&gt; Value -&gt; Value
forall s t a b. ASetter s t a (Maybe b) -&gt; b -&gt; s -&gt; t
</span><span class="hs-operator hs-var">?~</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Value
forall a. ToJSON a =&gt; a -&gt; Value
</span><span class="hs-identifier hs-var">toJSON</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679486361"><span class="hs-identifier hs-var">startTime</span></a></span><span>
</span><span id="line-495"></span><span>
</span><span id="line-496"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679486366"><span class="annot"><span class="annottext">systemStartUTC :: UTCTime
</span><a href="#local-6989586621679486366"><span class="hs-identifier hs-var hs-var">systemStartUTC</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-497"></span><span>        </span><span class="annot"><span class="annottext">NominalDiffTime -&gt; UTCTime
</span><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/time-1.12.2/src/Data.Time.Clock.POSIX.html#posixSecondsToUTCTime"><span class="hs-identifier hs-var">posixSecondsToUTCTime</span></a></span><span> </span><span class="annot"><span class="annottext">(NominalDiffTime -&gt; UTCTime)
-&gt; (Int -&gt; NominalDiffTime) -&gt; Int -&gt; UTCTime
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">Rational -&gt; NominalDiffTime
forall a. Fractional a =&gt; Rational -&gt; a
</span><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/GHC.Real.html#fromRational"><span class="hs-identifier hs-var">fromRational</span></a></span><span> </span><span class="annot"><span class="annottext">(Rational -&gt; NominalDiffTime)
-&gt; (Int -&gt; Rational) -&gt; Int -&gt; NominalDiffTime
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Rational
forall a. Real a =&gt; a -&gt; Rational
</span><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/GHC.Real.html#toRational"><span class="hs-identifier hs-var">toRational</span></a></span><span> </span><span class="annot"><span class="annottext">(Int -&gt; UTCTime) -&gt; Int -&gt; UTCTime
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679486361"><span class="hs-identifier hs-var">startTime</span></a></span><span>
</span><span id="line-498"></span><span>  </span><span id="local-6989586621679486367"><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621679486367"><span class="hs-identifier hs-var">shelleyGenesis</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span>
</span><span id="line-499"></span><span>    </span><span class="annot"><span class="annottext">forall a. FromJSON a =&gt; FilePath -&gt; IO a
</span><a href="CardanoNode.html#unsafeDecodeJsonFile"><span class="hs-identifier hs-var">unsafeDecodeJsonFile</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><span class="hs-identifier hs-type">Aeson.Value</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621679486358"><span class="hs-identifier hs-var">stateDirectory</span></a></span><span> </span><span class="annot"><span class="annottext">FilePath -&gt; ShowS
</span><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/filepath-1.4.301.0/src/System.FilePath.Posix.html#%3C%2F%3E"><span class="hs-operator hs-var">&lt;/&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">CardanoNodeArgs -&gt; FilePath
</span><a href="CardanoNode.html#%24sel%3AnodeShelleyGenesisFile%3ACardanoNodeArgs"><span class="hs-identifier hs-var">nodeShelleyGenesisFile</span></a></span><span> </span><span class="annot"><span class="annottext">CardanoNodeArgs
</span><a href="#local-6989586621679486359"><span class="hs-identifier hs-var">args</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-500"></span><span>      </span><span class="annot"><span class="annottext">IO Value -&gt; (Value -&gt; Value) -&gt; IO Value
forall (f :: * -&gt; *) a b. Functor f =&gt; f a -&gt; (a -&gt; b) -&gt; f b
</span><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/Data.Functor.html#%3C%26%3E"><span class="hs-operator hs-var">&lt;&amp;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Key -&gt; Traversal' Value (Maybe Value)
forall t. AsValue t =&gt; Key -&gt; Traversal' t (Maybe Value)
</span><span class="hs-identifier hs-var">atKey</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;systemStart&quot;</span></span><span> </span><span class="annot"><span class="annottext">((Maybe Value -&gt; Identity (Maybe Value))
 -&gt; Value -&gt; Identity Value)
-&gt; Value -&gt; Value -&gt; Value
forall s t a b. ASetter s t a (Maybe b) -&gt; b -&gt; s -&gt; t
</span><span class="hs-operator hs-var">?~</span></span><span> </span><span class="annot"><span class="annottext">UTCTime -&gt; Value
forall a. ToJSON a =&gt; a -&gt; Value
</span><span class="hs-identifier hs-var">toJSON</span></span><span> </span><span class="annot"><span class="annottext">UTCTime
</span><a href="#local-6989586621679486366"><span class="hs-identifier hs-var">systemStartUTC</span></a></span><span>
</span><span id="line-501"></span><span>
</span><span id="line-502"></span><span>  </span><span id="local-6989586621679486368"><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621679486368"><span class="hs-identifier hs-var">config</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span>
</span><span id="line-503"></span><span>    </span><span class="annot"><span class="annottext">forall a. FromJSON a =&gt; FilePath -&gt; IO a
</span><a href="CardanoNode.html#unsafeDecodeJsonFile"><span class="hs-identifier hs-var">unsafeDecodeJsonFile</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><span class="hs-identifier hs-type">Aeson.Value</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621679486358"><span class="hs-identifier hs-var">stateDirectory</span></a></span><span> </span><span class="annot"><span class="annottext">FilePath -&gt; ShowS
</span><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/filepath-1.4.301.0/src/System.FilePath.Posix.html#%3C%2F%3E"><span class="hs-operator hs-var">&lt;/&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">CardanoNodeArgs -&gt; FilePath
</span><a href="CardanoNode.html#%24sel%3AnodeConfigFile%3ACardanoNodeArgs"><span class="hs-identifier hs-var">nodeConfigFile</span></a></span><span> </span><span class="annot"><span class="annottext">CardanoNodeArgs
</span><a href="#local-6989586621679486359"><span class="hs-identifier hs-var">args</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-504"></span><span>      </span><span class="annot"><span class="annottext">IO Value -&gt; (Value -&gt; Value) -&gt; IO Value
forall (f :: * -&gt; *) a b. Functor f =&gt; f a -&gt; (a -&gt; b) -&gt; f b
</span><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/Data.Functor.html#%3C%26%3E"><span class="hs-operator hs-var">&lt;&amp;&gt;</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Key -&gt; Traversal' Value (Maybe Value)
forall t. AsValue t =&gt; Key -&gt; Traversal' t (Maybe Value)
</span><span class="hs-identifier hs-var">atKey</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;ByronGenesisFile&quot;</span></span><span> </span><span class="annot"><span class="annottext">((Maybe Value -&gt; Identity (Maybe Value))
 -&gt; Value -&gt; Identity Value)
-&gt; Value -&gt; Value -&gt; Value
forall s t a b. ASetter s t a (Maybe b) -&gt; b -&gt; s -&gt; t
</span><span class="hs-operator hs-var">?~</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Value
forall a. ToJSON a =&gt; a -&gt; Value
</span><span class="hs-identifier hs-var">toJSON</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FilePath -&gt; Text
</span><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/text-2.0.2/src/Data.Text.Internal.html#pack"><span class="hs-identifier hs-var">Text.pack</span></a></span><span> </span><span class="annot"><span class="annottext">(FilePath -&gt; Text) -&gt; FilePath -&gt; Text
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">CardanoNodeArgs -&gt; FilePath
</span><a href="CardanoNode.html#%24sel%3AnodeByronGenesisFile%3ACardanoNodeArgs"><span class="hs-identifier hs-var">nodeByronGenesisFile</span></a></span><span> </span><span class="annot"><span class="annottext">CardanoNodeArgs
</span><a href="#local-6989586621679486359"><span class="hs-identifier hs-var">args</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-505"></span><span>        </span><span class="annot"><span class="annottext">(Value -&gt; Value) -&gt; (Value -&gt; Value) -&gt; Value -&gt; Value
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Key -&gt; Traversal' Value (Maybe Value)
forall t. AsValue t =&gt; Key -&gt; Traversal' t (Maybe Value)
</span><span class="hs-identifier hs-var">atKey</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;ShelleyGenesisFile&quot;</span></span><span> </span><span class="annot"><span class="annottext">((Maybe Value -&gt; Identity (Maybe Value))
 -&gt; Value -&gt; Identity Value)
-&gt; Value -&gt; Value -&gt; Value
forall s t a b. ASetter s t a (Maybe b) -&gt; b -&gt; s -&gt; t
</span><span class="hs-operator hs-var">?~</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Value
</span><span class="hs-identifier hs-var">String</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FilePath -&gt; Text
</span><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/text-2.0.2/src/Data.Text.Internal.html#pack"><span class="hs-identifier hs-var">Text.pack</span></a></span><span> </span><span class="annot"><span class="annottext">(FilePath -&gt; Text) -&gt; FilePath -&gt; Text
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">CardanoNodeArgs -&gt; FilePath
</span><a href="CardanoNode.html#%24sel%3AnodeShelleyGenesisFile%3ACardanoNodeArgs"><span class="hs-identifier hs-var">nodeShelleyGenesisFile</span></a></span><span> </span><span class="annot"><span class="annottext">CardanoNodeArgs
</span><a href="#local-6989586621679486359"><span class="hs-identifier hs-var">args</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-506"></span><span>
</span><span id="line-507"></span><span>  </span><span class="annot"><span class="annottext">FilePath -&gt; Value -&gt; IO ()
forall a. ToJSON a =&gt; FilePath -&gt; a -&gt; IO ()
</span><span class="hs-identifier hs-var">Aeson.encodeFile</span></span><span>
</span><span id="line-508"></span><span>    </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621679486358"><span class="hs-identifier hs-var">stateDirectory</span></a></span><span> </span><span class="annot"><span class="annottext">FilePath -&gt; ShowS
</span><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/filepath-1.4.301.0/src/System.FilePath.Posix.html#%3C%2F%3E"><span class="hs-operator hs-var">&lt;/&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">CardanoNodeArgs -&gt; FilePath
</span><a href="CardanoNode.html#%24sel%3AnodeByronGenesisFile%3ACardanoNodeArgs"><span class="hs-identifier hs-var">nodeByronGenesisFile</span></a></span><span> </span><span class="annot"><span class="annottext">CardanoNodeArgs
</span><a href="#local-6989586621679486359"><span class="hs-identifier hs-var">args</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-509"></span><span>    </span><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621679486363"><span class="hs-identifier hs-var">byronGenesis</span></a></span><span>
</span><span id="line-510"></span><span>  </span><span class="annot"><span class="annottext">FilePath -&gt; Value -&gt; IO ()
forall a. ToJSON a =&gt; FilePath -&gt; a -&gt; IO ()
</span><span class="hs-identifier hs-var">Aeson.encodeFile</span></span><span>
</span><span id="line-511"></span><span>    </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621679486358"><span class="hs-identifier hs-var">stateDirectory</span></a></span><span> </span><span class="annot"><span class="annottext">FilePath -&gt; ShowS
</span><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/filepath-1.4.301.0/src/System.FilePath.Posix.html#%3C%2F%3E"><span class="hs-operator hs-var">&lt;/&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">CardanoNodeArgs -&gt; FilePath
</span><a href="CardanoNode.html#%24sel%3AnodeShelleyGenesisFile%3ACardanoNodeArgs"><span class="hs-identifier hs-var">nodeShelleyGenesisFile</span></a></span><span> </span><span class="annot"><span class="annottext">CardanoNodeArgs
</span><a href="#local-6989586621679486359"><span class="hs-identifier hs-var">args</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-512"></span><span>    </span><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621679486367"><span class="hs-identifier hs-var">shelleyGenesis</span></a></span><span>
</span><span id="line-513"></span><span>  </span><span class="annot"><span class="annottext">FilePath -&gt; Value -&gt; IO ()
forall a. ToJSON a =&gt; FilePath -&gt; a -&gt; IO ()
</span><span class="hs-identifier hs-var">Aeson.encodeFile</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621679486358"><span class="hs-identifier hs-var">stateDirectory</span></a></span><span> </span><span class="annot"><span class="annottext">FilePath -&gt; ShowS
</span><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/filepath-1.4.301.0/src/System.FilePath.Posix.html#%3C%2F%3E"><span class="hs-operator hs-var">&lt;/&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">CardanoNodeArgs -&gt; FilePath
</span><a href="CardanoNode.html#%24sel%3AnodeConfigFile%3ACardanoNodeArgs"><span class="hs-identifier hs-var">nodeConfigFile</span></a></span><span> </span><span class="annot"><span class="annottext">CardanoNodeArgs
</span><a href="#local-6989586621679486359"><span class="hs-identifier hs-var">args</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621679486368"><span class="hs-identifier hs-var">config</span></a></span><span>
</span><span id="line-514"></span><span>
</span><span id="line-515"></span><span class="annot"><span class="hs-comment">-- | Generate a topology file from a list of peers.</span></span><span>
</span><span id="line-516"></span><span class="annot"><a href="CardanoNode.html#mkTopology"><span class="hs-identifier hs-type">mkTopology</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="CardanoNode.html#Port"><span class="hs-identifier hs-type">Port</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Aeson.Value</span></span><span>
</span><span id="line-517"></span><span id="mkTopology"><span class="annot"><span class="annottext">mkTopology :: [Int] -&gt; Value
</span><a href="CardanoNode.html#mkTopology"><span class="hs-identifier hs-var hs-var">mkTopology</span></a></span></span><span> </span><span id="local-6989586621679486369"><span class="annot"><span class="annottext">[Int]
</span><a href="#local-6989586621679486369"><span class="hs-identifier hs-var">peers</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-518"></span><span>  </span><span class="annot"><span class="annottext">[Pair] -&gt; Value
</span><span class="hs-identifier hs-var">Aeson.object</span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;Producers&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key -&gt; [Value] -&gt; Pair
forall v. ToJSON v =&gt; Key -&gt; v -&gt; Pair
forall e kv v. (KeyValue e kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">(Int -&gt; Value) -&gt; [Int] -&gt; [Value]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/GHC.Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Value
</span><a href="#local-6989586621679486371"><span class="hs-identifier hs-var">encodePeer</span></a></span><span> </span><span class="annot"><span class="annottext">[Int]
</span><a href="#local-6989586621679486369"><span class="hs-identifier hs-var">peers</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-519"></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-520"></span><span>  </span><span class="annot"><a href="#local-6989586621679486371"><span class="hs-identifier hs-type">encodePeer</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#Int"><span class="hs-identifier hs-type">Int</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Aeson.Value</span></span><span>
</span><span id="line-521"></span><span>  </span><span id="local-6989586621679486371"><span class="annot"><span class="annottext">encodePeer :: Int -&gt; Value
</span><a href="#local-6989586621679486371"><span class="hs-identifier hs-var hs-var">encodePeer</span></a></span></span><span> </span><span id="local-6989586621679486372"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679486372"><span class="hs-identifier hs-var">port</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-522"></span><span>    </span><span class="annot"><span class="annottext">[Pair] -&gt; Value
</span><span class="hs-identifier hs-var">Aeson.object</span></span><span>
</span><span id="line-523"></span><span>      </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;addr&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key -&gt; Text -&gt; Pair
forall v. ToJSON v =&gt; Key -&gt; v -&gt; Pair
forall e kv v. (KeyValue e kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;127.0.0.1&quot;</span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/text-2.0.2/src/Data.Text.Internal.html#Text"><span class="hs-identifier hs-type">Text</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;port&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key -&gt; Int -&gt; Pair
forall v. ToJSON v =&gt; Key -&gt; v -&gt; Pair
forall e kv v. (KeyValue e kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679486372"><span class="hs-identifier hs-var">port</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;valency&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key -&gt; Int -&gt; Pair
forall v. ToJSON v =&gt; Key -&gt; v -&gt; Pair
forall e kv v. (KeyValue e kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#Int"><span class="hs-identifier hs-type">Int</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-524"></span><span>
</span><span id="line-525"></span><span class="hs-keyword">data</span><span> </span><span id="ProcessHasExited"><span class="annot"><a href="CardanoNode.html#ProcessHasExited"><span class="hs-identifier hs-var">ProcessHasExited</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="ProcessHasExited"><span class="annot"><a href="CardanoNode.html#ProcessHasExited"><span class="hs-identifier hs-var">ProcessHasExited</span></a></span></span><span> </span><span class="annot"><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/text-2.0.2/src/Data.Text.Internal.html#Text"><span class="hs-identifier hs-type">Text</span></a></span><span> </span><span class="annot"><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/GHC.IO.Exception.html#ExitCode"><span class="hs-identifier hs-type">ExitCode</span></a></span><span>
</span><span id="line-526"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">stock</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679486375"><span id="local-6989586621679486381"><span id="local-6989586621679486385"><span class="annot"><span class="annottext">Int -&gt; ProcessHasExited -&gt; ShowS
[ProcessHasExited] -&gt; ShowS
ProcessHasExited -&gt; FilePath
(Int -&gt; ProcessHasExited -&gt; ShowS)
-&gt; (ProcessHasExited -&gt; FilePath)
-&gt; ([ProcessHasExited] -&gt; ShowS)
-&gt; Show ProcessHasExited
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; FilePath) -&gt; ([a] -&gt; ShowS) -&gt; Show a
$cshowsPrec :: Int -&gt; ProcessHasExited -&gt; ShowS
showsPrec :: Int -&gt; ProcessHasExited -&gt; ShowS
$cshow :: ProcessHasExited -&gt; FilePath
show :: ProcessHasExited -&gt; FilePath
$cshowList :: [ProcessHasExited] -&gt; ShowS
showList :: [ProcessHasExited] -&gt; ShowS
</span><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/GHC.Show.html#Show"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></a></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-527"></span><span>
</span><span id="line-528"></span><span class="hs-comment">-- | Cardano-cli wrapper to query protocol parameters. While we have also client</span><span>
</span><span id="line-529"></span><span class="hs-comment">-- functions in Hydra.Chain.CardanoClient and Hydra.Cluster.CardanoClient,</span><span>
</span><span id="line-530"></span><span class="hs-comment">-- sometimes we deliberately want to use the cardano-cli to ensure</span><span>
</span><span id="line-531"></span><span class="hs-comment">-- compatibility.</span><span>
</span><span id="line-532"></span><span class="annot"><a href="CardanoNode.html#cliQueryProtocolParameters"><span class="hs-identifier hs-type">cliQueryProtocolParameters</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">SocketPath</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">NetworkId</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#IO"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Value</span></span><span>
</span><span id="line-533"></span><span id="cliQueryProtocolParameters"><span class="annot"><span class="annottext">cliQueryProtocolParameters :: SocketPath -&gt; NetworkId -&gt; IO Value
</span><a href="CardanoNode.html#cliQueryProtocolParameters"><span class="hs-identifier hs-var hs-var">cliQueryProtocolParameters</span></a></span></span><span> </span><span id="local-6989586621679486388"><span class="annot"><span class="annottext">SocketPath
</span><a href="#local-6989586621679486388"><span class="hs-identifier hs-var">nodeSocket</span></a></span></span><span> </span><span id="local-6989586621679486389"><span class="annot"><span class="annottext">NetworkId
</span><a href="#local-6989586621679486389"><span class="hs-identifier hs-var">networkId</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-534"></span><span>  </span><span id="local-6989586621679486390"><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621679486390"><span class="hs-identifier hs-var">out</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">FilePath -&gt; [FilePath] -&gt; FilePath -&gt; IO FilePath
</span><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/process-1.6.19.0/src/System.Process.html#readProcess"><span class="hs-identifier hs-var">readProcess</span></a></span><span> </span><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621679486391"><span class="hs-identifier hs-var">cmd</span></a></span><span> </span><span class="annot"><span class="annottext">[FilePath]
</span><a href="#local-6989586621679486392"><span class="hs-identifier hs-var">args</span></a></span><span> </span><span class="annot"><span class="annottext">FilePath
</span><span class="hs-string">&quot;&quot;</span></span><span>
</span><span id="line-535"></span><span>  </span><span class="annot"><span class="annottext">ByteString -&gt; IO Value
forall a. FromJSON a =&gt; ByteString -&gt; IO a
</span><a href="CardanoNode.html#unsafeDecodeJson"><span class="hs-identifier hs-var">unsafeDecodeJson</span></a></span><span> </span><span class="annot"><span class="annottext">(ByteString -&gt; IO Value) -&gt; ByteString -&gt; IO Value
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">FilePath -&gt; ByteString
forall a. IsString a =&gt; FilePath -&gt; a
</span><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/Data.String.html#fromString"><span class="hs-identifier hs-var">fromString</span></a></span><span> </span><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621679486390"><span class="hs-identifier hs-var">out</span></a></span><span>
</span><span id="line-536"></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-537"></span><span>  </span><span id="local-6989586621679486391"><span class="annot"><span class="annottext">cmd :: FilePath
</span><a href="#local-6989586621679486391"><span class="hs-identifier hs-var hs-var">cmd</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FilePath
</span><span class="hs-string">&quot;cardano-cli&quot;</span></span><span>
</span><span id="line-538"></span><span>
</span><span id="line-539"></span><span>  </span><span id="local-6989586621679486392"><span class="annot"><span class="annottext">args :: [FilePath]
</span><a href="#local-6989586621679486392"><span class="hs-identifier hs-var hs-var">args</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-540"></span><span>    </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">FilePath
</span><span class="hs-string">&quot;conway&quot;</span></span><span>
</span><span id="line-541"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">FilePath
</span><span class="hs-string">&quot;query&quot;</span></span><span>
</span><span id="line-542"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">FilePath
</span><span class="hs-string">&quot;protocol-parameters&quot;</span></span><span>
</span><span id="line-543"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">FilePath
</span><span class="hs-string">&quot;--socket-path&quot;</span></span><span>
</span><span id="line-544"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">SocketPath -&gt; FilePath
forall content (direction :: FileDirection).
File content direction -&gt; FilePath
</span><span class="hs-identifier hs-var">unFile</span></span><span> </span><span class="annot"><span class="annottext">SocketPath
</span><a href="#local-6989586621679486388"><span class="hs-identifier hs-var">nodeSocket</span></a></span><span>
</span><span id="line-545"></span><span>    </span><span class="hs-special">]</span><span>
</span><span id="line-546"></span><span>      </span><span class="annot"><span class="annottext">[FilePath] -&gt; [FilePath] -&gt; [FilePath]
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/GHC.Base.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">NetworkId
</span><a href="#local-6989586621679486389"><span class="hs-identifier hs-var">networkId</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-547"></span><span>        </span><span class="annot"><span class="annottext">NetworkId
</span><span class="hs-identifier hs-var">Api.Mainnet</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">FilePath
</span><span class="hs-string">&quot;--mainnet&quot;</span></span><span class="hs-special">]</span><span>
</span><span id="line-548"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">Api.Testnet</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">NetworkMagic</span></span><span> </span><span id="local-6989586621679486394"><span class="annot"><span class="annottext">Word32
</span><a href="#local-6989586621679486394"><span class="hs-identifier hs-var">magic</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">FilePath
</span><span class="hs-string">&quot;--testnet-magic&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Word32 -&gt; FilePath
forall b a. (Show a, IsString b) =&gt; a -&gt; b
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">Word32
</span><a href="#local-6989586621679486394"><span class="hs-identifier hs-var">magic</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-549"></span><span>      </span><span class="annot"><span class="annottext">[FilePath] -&gt; [FilePath] -&gt; [FilePath]
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/GHC.Base.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">FilePath
</span><span class="hs-string">&quot;--out-file&quot;</span></span><span>
</span><span id="line-550"></span><span>         </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">FilePath
</span><span class="hs-string">&quot;/dev/stdout&quot;</span></span><span>
</span><span id="line-551"></span><span>         </span><span class="hs-special">]</span><span>
</span><span id="line-552"></span><span>
</span><span id="line-553"></span><span class="hs-comment">--</span><span>
</span><span id="line-554"></span><span class="hs-comment">-- Helpers</span><span>
</span><span id="line-555"></span><span class="hs-comment">--</span><span>
</span><span id="line-556"></span><span>
</span><span id="line-557"></span><span id="local-6989586621679485043"><span class="annot"><a href="CardanoNode.html#unsafeDecodeJson"><span class="hs-identifier hs-type">unsafeDecodeJson</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">FromJSON</span></span><span> </span><span class="annot"><a href="#local-6989586621679485043"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/bytestring-0.11.5.4/src/Data.ByteString.Internal.Type.html#ByteString"><span class="hs-identifier hs-type">ByteString</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#IO"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679485043"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-558"></span><span id="unsafeDecodeJson"><span class="annot"><span class="annottext">unsafeDecodeJson :: forall a. FromJSON a =&gt; ByteString -&gt; IO a
</span><a href="CardanoNode.html#unsafeDecodeJson"><span class="hs-identifier hs-var hs-var">unsafeDecodeJson</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(FilePath -&gt; IO a) -&gt; (a -&gt; IO a) -&gt; Either FilePath a -&gt; IO a
forall a c b. (a -&gt; c) -&gt; (b -&gt; c) -&gt; Either a b -&gt; c
</span><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/Data.Either.html#either"><span class="hs-identifier hs-var">either</span></a></span><span> </span><span class="annot"><span class="annottext">FilePath -&gt; IO a
forall a. FilePath -&gt; IO a
forall (m :: * -&gt; *) a. MonadFail m =&gt; FilePath -&gt; m a
</span><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/Control.Monad.Fail.html#fail"><span class="hs-identifier hs-var">fail</span></a></span><span> </span><span class="annot"><span class="annottext">a -&gt; IO a
forall a. a -&gt; IO a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/GHC.Base.html#pure"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">(Either FilePath a -&gt; IO a)
-&gt; (ByteString -&gt; Either FilePath a) -&gt; ByteString -&gt; IO a
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; Either FilePath a
forall a. FromJSON a =&gt; ByteString -&gt; Either FilePath a
</span><span class="hs-identifier hs-var">Aeson.eitherDecodeStrict</span></span><span>
</span><span id="line-559"></span><span>
</span><span id="line-560"></span><span id="local-6989586621679485154"><span class="annot"><a href="CardanoNode.html#unsafeDecodeJsonFile"><span class="hs-identifier hs-type">unsafeDecodeJsonFile</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">FromJSON</span></span><span> </span><span class="annot"><a href="#local-6989586621679485154"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/GHC.IO.html#FilePath"><span class="hs-identifier hs-type">FilePath</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#IO"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679485154"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-561"></span><span id="unsafeDecodeJsonFile"><span class="annot"><span class="annottext">unsafeDecodeJsonFile :: forall a. FromJSON a =&gt; FilePath -&gt; IO a
</span><a href="CardanoNode.html#unsafeDecodeJsonFile"><span class="hs-identifier hs-var hs-var">unsafeDecodeJsonFile</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FilePath -&gt; IO (Either FilePath a)
forall a. FromJSON a =&gt; FilePath -&gt; IO (Either FilePath a)
</span><span class="hs-identifier hs-var">Aeson.eitherDecodeFileStrict</span></span><span> </span><span class="annot"><span class="annottext">(FilePath -&gt; IO (Either FilePath a))
-&gt; (Either FilePath a -&gt; IO a) -&gt; FilePath -&gt; IO a
forall (m :: * -&gt; *) a b c.
Monad m =&gt;
(a -&gt; m b) -&gt; (b -&gt; m c) -&gt; a -&gt; m c
</span><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/Control.Monad.html#%3E%3D%3E"><span class="hs-operator hs-var">&gt;=&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">(FilePath -&gt; IO a) -&gt; (a -&gt; IO a) -&gt; Either FilePath a -&gt; IO a
forall a c b. (a -&gt; c) -&gt; (b -&gt; c) -&gt; Either a b -&gt; c
</span><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/Data.Either.html#either"><span class="hs-identifier hs-var">either</span></a></span><span> </span><span class="annot"><span class="annottext">FilePath -&gt; IO a
forall a. FilePath -&gt; IO a
forall (m :: * -&gt; *) a. MonadFail m =&gt; FilePath -&gt; m a
</span><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/Control.Monad.Fail.html#fail"><span class="hs-identifier hs-var">fail</span></a></span><span> </span><span class="annot"><span class="annottext">a -&gt; IO a
forall a. a -&gt; IO a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="file:///nix/store/cz9ly62f92wivwp9aah4py51j2fnx6kf-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src/GHC.Base.html#pure"><span class="hs-identifier hs-var">pure</span></a></span><span>
</span><span id="line-562"></span></pre></body></html>