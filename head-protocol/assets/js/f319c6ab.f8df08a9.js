"use strict";(self.webpackChunkhydra_head_protocol_docs=self.webpackChunkhydra_head_protocol_docs||[]).push([[4706],{77660:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>d,contentTitle:()=>a,default:()=>h,frontMatter:()=>r,metadata:()=>t,toc:()=>c});const t=JSON.parse('{"id":"known-issues","title":"Known issues and limitations","description":"Before running a Hydra node on the Cardano mainnet, it is important to be aware of several known issues and limitations. Operating a Hydra node requires a deep understanding of the underlying infrastructure, and you may risk your funds if you are unfamiliar with the implementation and usage processes.","source":"@site/docs/known-issues.md","sourceDirName":".","slug":"/known-issues","permalink":"/head-protocol/docs/known-issues","draft":false,"unlisted":false,"editUrl":"https://github.com/cardano-scaling/hydra/tree/master/docs/docs/known-issues.md","tags":[],"version":"current","frontMatter":{},"sidebar":"userDocumentation","previous":{"title":"Protocol overview","permalink":"/head-protocol/docs/protocol-overview"},"next":{"title":"Getting started","permalink":"/head-protocol/docs/getting-started"}}');var s=i(74848),o=i(28453);const r={},a="Known issues and limitations",d={},c=[{value:"Head protocol limits",id:"head-protocol-limits",level:3},{value:"Static topology",id:"static-topology",level:3},{value:"Auto-compaction (amount of time a peer can be offline)",id:"auto-compaction-amount-of-time-a-peer-can-be-offline",level:4},{value:"Adapting to new breaking changes",id:"adapting-to-new-breaking-changes",level:4},{value:"Training wheels",id:"training-wheels",level:3},{value:"Deposit periods",id:"deposit-periods",level:3},{value:"Known bugs",id:"known-bugs",level:3}];function l(e){const n={a:"a",code:"code",em:"em",h1:"h1",h3:"h3",h4:"h4",header:"header",li:"li",p:"p",strong:"strong",ul:"ul",...(0,o.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"known-issues-and-limitations",children:"Known issues and limitations"})}),"\n",(0,s.jsx)(n.p,{children:"Before running a Hydra node on the Cardano mainnet, it is important to be aware of several known issues and limitations. Operating a Hydra node requires a deep understanding of the underlying infrastructure, and you may risk your funds if you are unfamiliar with the implementation and usage processes."}),"\n",(0,s.jsx)(n.h3,{id:"head-protocol-limits",children:"Head protocol limits"}),"\n",(0,s.jsx)(n.p,{children:"Due to the limitations on transaction sizes and execution budgets on Cardano, the Hydra protocol has the following constraints:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["The protocol can only handle a maximum number of participants in a head (see ",(0,s.jsx)(n.a,{href:"https://hydra.family/head-protocol/benchmarks/transaction-cost#collectcom-transaction-costs",children:"the cost of CollectCom transaction"}),"). When attempting to configure too many peers, the Hydra node will inform you of the current configured maximum."]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"Currently, participants may be denied access to their funds by other protocol participants at different stages within a Hydra head because of the complexity or size of the UTXO being committed or created while the head is open:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["The Hydra head cannot be ",(0,s.jsx)(n.em,{children:"finalized"})," if it holds more than approximately 80 assets (see ",(0,s.jsx)(n.a,{href:"https://hydra.family/head-protocol/benchmarks/transaction-cost#fanout-transaction-costs",children:"the cost of FanOut transaction"})," for latest numbers), although it can be ",(0,s.jsx)(n.em,{children:"closed"})]}),"\n",(0,s.jsxs)(n.li,{children:["Tokens that are minted and not burned within an open Hydra head will prevent the head from being ",(0,s.jsx)(n.em,{children:"finalized"})]}),"\n",(0,s.jsxs)(n.li,{children:["If one or more participants commit UTXOs that are too large to be processed together in a ",(0,s.jsx)(n.code,{children:"CollectCom"})," or  ",(0,s.jsx)(n.code,{children:"Abort"})," transaction, the Hydra head will remain stuck in the ",(0,s.jsx)(n.em,{children:"initialising"})," stage."]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"See these resources for additional information about reducing the risk of locking up funds in a Hydra head:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://github.com/cardano-scaling/hydra/issues/1329",children:"Directly open heads"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://github.com/cardano-scaling/hydra/issues/699",children:"Always abortable head"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://github.com/cardano-scaling/hydra/issues/698",children:"Limit size/complexity of UTXOs in the head"})}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"https://github.com/cardano-scaling/hydra/issues/370",children:"Only sign closable snapshots"}),"."]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"static-topology",children:"Static topology"}),"\n",(0,s.jsxs)(n.p,{children:["The network topology needs to be statically configured and match across all ",(0,s.jsx)(n.code,{children:"hydra-node"})," instances. Currently this means that the ",(0,s.jsx)(n.code,{children:"--peer"})," command line options need to match between nodes. Otherwise the ",(0,s.jsx)(n.code,{children:"etcd"})," node of the networking later will report errors in the logs."]}),"\n",(0,s.jsx)(n.p,{children:"Known errors are:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"cluster ID mismatch"})," - the cluster was initiated with a different list of ",(0,s.jsx)(n.code,{children:"--peer"}),"s"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["check configuration with other participants. There should be a corresponding log entry ",(0,s.jsx)(n.code,{children:"NetworkClusterIDMismatch"})," with the information on:","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"clusterPeers"})," - loaded peers info received from ",(0,s.jsx)(n.code,{children:"etcd"})," cluster."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"configuredPeers"})," - peers info coming from ",(0,s.jsx)(n.code,{children:"hydra-node"})," arguments."]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"member ... has already been bootstrapped"})," - missing information in ",(0,s.jsx)(n.code,{children:"<persistence-dir>/etcd"})]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["restart your hydra-node with the ",(0,s.jsx)(n.code,{children:"ETCD_INITIAL_CLUSTER_STATE"})," environment variable set to ",(0,s.jsx)(n.code,{children:"existing"})," (",(0,s.jsx)(n.code,{children:"new"})," is the default), see also ",(0,s.jsx)(n.a,{href:"https://etcd.io/docs/v3.3/op-guide/configuration/",children:"https://etcd.io/docs/v3.3/op-guide/configuration/"})]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:["We should be able to work around these UX issues using ",(0,s.jsx)(n.a,{href:"https://etcd.io/docs/v3.5/op-guide/clustering/#etcd-discovery",children:"etcd discovery"})," eventually."]}),"\n",(0,s.jsx)(n.h4,{id:"auto-compaction-amount-of-time-a-peer-can-be-offline",children:"Auto-compaction (amount of time a peer can be offline)"}),"\n",(0,s.jsxs)(n.p,{children:["Because we do not want the hydra-node to take up unbounded disk space, we set\na conservative amount of history that the internal ",(0,s.jsx)(n.code,{children:"etcd"})," process will store."]}),"\n",(0,s.jsxs)(n.p,{children:["This can be controlled via environment variables that you can read more about\nhere: ",(0,s.jsx)(n.a,{href:"configuration#networking-configuring-the-limits-of-etcd-networking-recovery",children:"Etcd Configuration"})]}),"\n",(0,s.jsx)(n.h4,{id:"adapting-to-new-breaking-changes",children:"Adapting to new breaking changes"}),"\n",(0,s.jsxs)(n.p,{children:["If the hydra-node has breaking changes in regards to reading the files it stores in the ",(0,s.jsx)(n.code,{children:"persistence"})," folder, it used to be recommended to just delete the entire folder."]}),"\n",(0,s.jsxs)(n.p,{children:["Now, because of etcd, it is important to only delete the ",(0,s.jsx)(n.code,{children:"hydra-node"})," specific files; not the files associated with ",(0,s.jsx)(n.code,{children:"etcd"}),". In particular you may like to delete the following files:"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"persistence/state*"})}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"Note that, as with any adjustments of this kind, it is good practice to make a backup first!"}),"\n",(0,s.jsx)(n.h3,{id:"training-wheels",children:"Training wheels"}),"\n",(0,s.jsxs)(n.p,{children:["There is a hard-coded limit in hydra-node when used on ",(0,s.jsx)(n.strong,{children:"mainnet"}),": only up to 100 ada can be committed into the Hydra head. This is a safety precaution and will be increased as more experience is gained in running Hydra heads on the mainnet."]}),"\n",(0,s.jsx)(n.h3,{id:"deposit-periods",children:"Deposit periods"}),"\n",(0,s.jsxs)(n.p,{children:["The ",(0,s.jsx)(n.code,{children:"--deposit-period"})," allows an individual ",(0,s.jsx)(n.code,{children:"hydra-node"})," operator to decide how long they want a deposit to have settled at least. However, differences bigger than ",(0,s.jsx)(n.a,{href:"https://hydra.family/head-protocol/haddock/hydra-node/Hydra-Node.html#v:waitDelay",children:(0,s.jsx)(n.code,{children:"defaultTTL * waitDelay"})})," (currently 10 minutes) result in non-approved snapshots. This is due to the way the ",(0,s.jsx)(n.code,{children:"HeadLogic"})," is implemented and snapshot requests are not retried currently. See ",(0,s.jsx)(n.a,{href:"https://github.com/cardano-scaling/hydra/issues/1999",children:"hydra#1999"})," for more context."]}),"\n",(0,s.jsx)(n.h3,{id:"known-bugs",children:"Known bugs"}),"\n",(0,s.jsxs)(n.p,{children:["Refer to the project repository issue tracker for ",(0,s.jsx)(n.a,{href:"https://github.com/cardano-scaling/hydra/issues?q=is%3Aissue+is%3Aopen+label%3A%22bug+%3Abug%3A%22",children:"known issues"}),". If you discover any security-relevant problems, please follow our ",(0,s.jsx)(n.a,{href:"https://github.com/cardano-scaling/hydra?tab=security-ov-file#readme",children:"security policy"}),"."]})]})}function h(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(l,{...e})}):l(e)}},28453:(e,n,i)=>{i.d(n,{R:()=>r,x:()=>a});var t=i(96540);const s={},o=t.createContext(s);function r(e){const n=t.useContext(o);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:r(e.components),t.createElement(o.Provider,{value:n},e.children)}}}]);