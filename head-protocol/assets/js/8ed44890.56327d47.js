"use strict";(self.webpackChunkhydra_head_protocol_docs=self.webpackChunkhydra_head_protocol_docs||[]).push([[6417],{54034:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>c,contentTitle:()=>o,default:()=>h,frontMatter:()=>r,metadata:()=>i,toc:()=>l});const i=JSON.parse('{"id":"payments/pay-per-use-api/index","title":"Pay-per-use API","description":"The pay-per-use API enables micro-payments between a service provider and a client.","source":"@site/use-cases/payments/pay-per-use-api/index.md","sourceDirName":"payments/pay-per-use-api","slug":"/payments/pay-per-use-api/","permalink":"/head-protocol/use-cases/payments/pay-per-use-api/","draft":false,"unlisted":false,"editUrl":"https://github.com/cardano-scaling/hydra/tree/master/docs/use-cases/payments/pay-per-use-api/index.md","tags":[],"version":"current","frontMatter":{},"sidebar":"defaultSidebar","previous":{"title":"Inter-wallet payments","permalink":"/head-protocol/use-cases/payments/inter-wallet-payments/"},"next":{"title":"Lightning network payments","permalink":"/head-protocol/use-cases/payments/lighting-network-like-payments/"}}');var a=n(74848),s=n(28453);const r={},o="Pay-per-use API",c={},l=[];function d(e){const t={admonition:"admonition",h1:"h1",header:"header",img:"img",li:"li",p:"p",ul:"ul",...(0,s.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(t.header,{children:(0,a.jsx)(t.h1,{id:"pay-per-use-api",children:"Pay-per-use API"})}),"\n",(0,a.jsx)(t.p,{children:"The pay-per-use API enables micro-payments between a service provider and a client."}),"\n",(0,a.jsx)(t.admonition,{title:"This is a legacy article",type:"caution",children:(0,a.jsx)(t.p,{children:"The payments category will be restructured into a more consistent use-case-centric roadmap of application scenarios."})}),"\n",(0,a.jsx)(t.p,{children:"Consider a web service for transaction datum resolution provided as an HTTP API. This service returns the pre-image of a given datum hash if it exists. At the same time, a light wallet provider, offering full Cardano smart contract support and prioritizing user experience and security, utilizes this service. The provider's workflow involves looking up datums and scripts included in transactions from various DApps its users interact with. By resolving these datums, the wallet can more accurately display the impact of specific transactions on contracts and their data."}),"\n",(0,a.jsx)(t.p,{children:"To streamline their infrastructure, the light wallet implementors decide to utilize this external service for datum resolution. Given the novelty of their product, it\u2019s challenging to precisely estimate the required resources and potential user base. Consequently, they enter into an agreement with the service provider to create a Hydra head for exchanging short-lived API credentials through micropayments."}),"\n",(0,a.jsx)(t.p,{children:"Specifically, the service provider charges 10 lovelace per API lookup. In the deployed infrastructure, the light wallet backend server maintains a long-running connection with the service provider via a Hydra head. Each user request triggers a corresponding transaction within the head. In return, the API provider issues a one-time token credential that authorizes the API request. This interaction completes with sub-second delays without incurring any transaction fees."}),"\n",(0,a.jsx)(t.p,{children:(0,a.jsx)(t.img,{src:n(69384).A+"",width:"900",height:"475"})}),"\n",(0,a.jsx)(t.p,{children:"Periodically, the light-wallet service replenishes its head with incremental commits (ie, a layer 1 transaction that locks additional value inside the head). Similarly, the service provider occasionally redeems its accumulated funds back to layer 1 through incremental decommits. These financial adjustments occur without needing to close the head."}),"\n",(0,a.jsx)(t.admonition,{title:"Rewards",type:"tip",children:(0,a.jsx)(t.p,{children:"If mutually agreed upon, both parties can delegate the funds locked inside the head. This arrangement might allow, for instance, the light wallet to continue earning rewards on amounts locked in the head until the service provider redeems them. Essentially, participants can still generate passive income through network rewards to offset the operational costs of maintaining the head."})}),"\n",(0,a.jsx)(t.p,{children:"Ultimately, the light wallet service pays only for what it uses, embodying the essence of cloud computing. This setup is also advantageous for the service provider because it allows them to share their Hydra infrastructure across multiple clients, thereby spreading costs and enhancing profit margins. Additionally, they benefit from direct ada earnings and avoid transaction fees on client payments."}),"\n",(0,a.jsx)(t.p,{children:"It\u2019s worth noting that numerous configurations are possible for this type of arrangement between a client and service provider. For example, API tokens could be treated as fungible tokens, like credits, purchased by the client and expended on each request within the head. In such a scenario, the server could:"}),"\n",(0,a.jsxs)(t.ul,{children:["\n",(0,a.jsx)(t.li,{children:"Limit its circulating supply to match its capacity"}),"\n",(0,a.jsx)(t.li,{children:"Create a secondary marketplace for excess credits that clients have purchased but do not intend to use."}),"\n"]})]})}function h(e={}){const{wrapper:t}={...(0,s.R)(),...e.components};return t?(0,a.jsx)(t,{...e,children:(0,a.jsx)(d,{...e})}):d(e)}},69384:(e,t,n)=>{n.d(t,{A:()=>i});const i=n.p+"assets/images/diagram-6b8e7e09bac4d70e7d3c0273a6776308.png"},28453:(e,t,n)=>{n.d(t,{R:()=>r,x:()=>o});var i=n(96540);const a={},s=i.createContext(a);function r(e){const t=i.useContext(s);return i.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function o(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:r(e.components),i.createElement(s.Provider,{value:t},e.children)}}}]);