"use strict";(self.webpackChunkhydra_head_protocol_docs=self.webpackChunkhydra_head_protocol_docs||[]).push([[7344],{86797:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>Ha,contentTitle:()=>ja,default:()=>_a,frontMatter:()=>wa,metadata:()=>a,toc:()=>Ta});const a=JSON.parse('{"id":"dev/architecture/index","title":"Architecture","description":"This document describes the architecture of the current implementation","source":"@site/docs/dev/architecture/index.md","sourceDirName":"dev/architecture","slug":"/dev/architecture/","permalink":"/head-protocol/docs/dev/architecture/","draft":false,"unlisted":false,"editUrl":"https://github.com/cardano-scaling/hydra/tree/master/docs/docs/dev/architecture/index.md","tags":[],"version":"current","frontMatter":{},"sidebar":"developerDocumentation","previous":{"title":"About Hydra","permalink":"/head-protocol/docs/dev/"},"next":{"title":"Event sourcing","permalink":"/head-protocol/docs/dev/architecture/event-sourcing"}}');var i,s,l,o,r,f,c,x,h,y,m,d,g,F,E,S,p,z,L,u,k,b,v,W,w,j,H,T,N,_,C,M,A,P,B,D,I,R,O,q,J,U,X,$,G,K,Q,V,Y,Z,ee,te,ne,ae,ie,se,le,oe,re,fe,ce,xe,he,ye,me,de,ge,Fe,Ee,Se,pe,ze,Le,ue,ke,be,ve,We,we,je,He,Te,Ne,_e,Ce,Me,Ae,Pe,Be,De,Ie,Re,Oe,qe,Je,Ue,Xe,$e,Ge,Ke,Qe,Ve,Ye,Ze,et,tt,nt,at,it,st,lt,ot,rt,ft,ct,xt,ht,yt,mt,dt,gt,Ft,Et,St,pt,zt,Lt,ut,kt,bt,vt,Wt,wt,jt,Ht,Tt,Nt,_t,Ct,Mt,At,Pt,Bt,Dt,It,Rt,Ot,qt,Jt,Ut,Xt,$t,Gt,Kt,Qt,Vt,Yt,Zt,en,tn,nn,an,sn,ln,on,rn,fn,cn,xn,hn,yn,mn,dn,gn,Fn,En,Sn,pn,zn,Ln,un,kn,bn,vn,Wn,wn,jn,Hn,Tn,Nn,_n,Cn,Mn,An,Pn,Bn,Dn,In,Rn,On,qn,Jn,Un,Xn,$n,Gn,Kn,Qn,Vn,Yn,Zn,ea,ta,na,aa,ia,sa,la,oa,ra,fa,ca,xa,ha,ya,ma,da,ga,Fa,Ea,Sa,pa,za,La,ua=n(74848),ka=n(28453),ba=n(96540);function va(){return va=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},va.apply(null,arguments)}const Wa=e=>{let{title:t,titleId:n,...a}=e;return ba.createElement("svg",va({xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:1486,height:843,"data-diagram-type":"DESCRIPTION",preserveAspectRatio:"none",style:{width:1486,height:843,background:"#fff"},viewBox:"0 0 1486 843","aria-labelledby":n},a),void 0===t?ba.createElement("title",{id:n},"Hydra Components"):t?ba.createElement("title",{id:n},t):null,i||(i=ba.createElement("text",{x:661.064,y:22.995,fontFamily:"sans-serif",fontSize:14,fontWeight:"bold",textLength:150.664},"Hydra Components")),ba.createElement("g",{className:"cluster","data-entity":"hydra_node","data-source-line":1593,"data-uid":"ent0002"},ba.createElement("rect",{width:910,height:571.71,x:308.73,y:44.297,fill:"none",rx:2.5,ry:2.5,style:{stroke:"#444",strokeWidth:1,strokeDasharray:"7,7"}}),s||(s=ba.createElement("text",{x:710.621,y:81.148,fill:"#444",fontFamily:"sans-serif",fontSize:16,fontWeight:"bold",textLength:106.219},"Hydra Node")),l||(l=ba.createElement("text",{x:726.022,y:96.061,fill:"#444",fontFamily:"sans-serif",fontSize:12,fontWeight:"bold",textLength:75.416},"[container]"))),ba.createElement("a",{xlinkActuate:"onRequest",xlinkHref:"https://github.com/cardano-scaling/hydra/blob/master/hydra-node/src/Hydra/Events.hs",xlinkShow:"new",xlinkTitle:"https://github.com/cardano-scaling/hydra/blob/master/hydra-node/src/Hydra/Events.hs",xlinkType:"simple",className:"entity","data-entity":"events","data-source-line":68,"data-uid":"ent0003",target:"_top"},ba.createElement("rect",{width:174.759,height:85.188,x:996.35,y:130.427,fill:"#85BBF0",rx:2.5,ry:2.5,style:{stroke:"#78a8d8",strokeWidth:.5}}),o||(o=ba.createElement("text",{x:1042.38,y:151.565,fontFamily:"sans-serif",fontSize:12,fontStyle:"italic",textLength:82.699},"\xabcomponent\xbb")),r||(r=ba.createElement("text",{x:1053.343,y:169.247,fontFamily:"sans-serif",fontSize:16,fontWeight:"bold",textLength:60.773},"Events")),f||(f=ba.createElement("text",{x:1081.504,y:186.016,fontFamily:"sans-serif",fontSize:14,textLength:4.45})),c||(c=ba.createElement("text",{x:1006.35,y:202.313,fontFamily:"sans-serif",fontSize:14,textLength:40.106},"Event")),x||(x=ba.createElement("text",{x:1046.456,y:202.313,fontFamily:"sans-serif",fontSize:14,textLength:4.45})),h||(h=ba.createElement("text",{x:1050.907,y:202.313,fontFamily:"sans-serif",fontSize:14,textLength:46.799},"source")),y||(y=ba.createElement("text",{x:1097.706,y:202.313,fontFamily:"sans-serif",fontSize:14,textLength:4.45})),m||(m=ba.createElement("text",{x:1102.156,y:202.313,fontFamily:"sans-serif",fontSize:14,textLength:26.339},"and")),d||(d=ba.createElement("text",{x:1128.495,y:202.313,fontFamily:"sans-serif",fontSize:14,textLength:4.45})),g||(g=ba.createElement("text",{x:1132.945,y:202.313,fontFamily:"sans-serif",fontSize:14,textLength:28.164},"sink"))),ba.createElement("a",{xlinkActuate:"onRequest",xlinkHref:"https://github.com/cardano-scaling/hydra/blob/master/hydra-node/src/Hydra/Persistence.hs",xlinkShow:"new",xlinkTitle:"https://github.com/cardano-scaling/hydra/blob/master/hydra-node/src/Hydra/Persistence.hs",xlinkType:"simple",className:"entity","data-entity":"persistence","data-source-line":68,"data-uid":"ent0004",target:"_top"},ba.createElement("rect",{width:198.76,height:115.453,x:762.35,y:115.297,fill:"#85BBF0",rx:2.5,ry:2.5,style:{stroke:"#78a8d8",strokeWidth:.5}}),F||(F=ba.createElement("text",{x:820.38,y:136.435,fontFamily:"sans-serif",fontSize:12,fontStyle:"italic",textLength:82.699},"\xabcomponent\xbb")),E||(E=ba.createElement("text",{x:809.117,y:154.117,fontFamily:"sans-serif",fontSize:16,fontWeight:"bold",textLength:105.227},"Persistence")),S||(S=ba.createElement("text",{x:832.978,y:169.029,fontFamily:"sans-serif",fontSize:12,fontStyle:"italic",textLength:57.504},"[JSON/FS]")),p||(p=ba.createElement("text",{x:859.505,y:184.855,fontFamily:"sans-serif",fontSize:14,textLength:4.45})),z||(z=ba.createElement("text",{x:772.35,y:201.151,fontFamily:"sans-serif",fontSize:14,textLength:54.072},"Persists")),L||(L=ba.createElement("text",{x:826.422,y:201.151,fontFamily:"sans-serif",fontSize:14,textLength:4.45})),u||(u=ba.createElement("text",{x:830.872,y:201.151,fontFamily:"sans-serif",fontSize:14,textLength:35.465},"state")),k||(k=ba.createElement("text",{x:866.337,y:201.151,fontFamily:"sans-serif",fontSize:14,textLength:4.45})),b||(b=ba.createElement("text",{x:870.788,y:201.151,fontFamily:"sans-serif",fontSize:14,textLength:13.494},"of")),v||(v=ba.createElement("text",{x:884.282,y:201.151,fontFamily:"sans-serif",fontSize:14,textLength:4.45})),W||(W=ba.createElement("text",{x:888.732,y:201.151,fontFamily:"sans-serif",fontSize:14,textLength:22.976},"the")),w||(w=ba.createElement("text",{x:911.707,y:201.151,fontFamily:"sans-serif",fontSize:14,textLength:4.45})),j||(j=ba.createElement("text",{x:916.158,y:201.151,fontFamily:"sans-serif",fontSize:14,textLength:34.952},"head")),H||(H=ba.createElement("text",{x:836.697,y:217.448,fontFamily:"sans-serif",fontSize:14,textLength:17.439},"on")),T||(T=ba.createElement("text",{x:854.135,y:217.448,fontFamily:"sans-serif",fontSize:14,textLength:4.45})),N||(N=ba.createElement("text",{x:858.585,y:217.448,fontFamily:"sans-serif",fontSize:14,textLength:28.178},"disk"))),ba.createElement("a",{xlinkActuate:"onRequest",xlinkHref:"https://github.com/cardano-scaling/hydra/blob/master/hydra-node/src/Hydra/HeadLogic.hs",xlinkShow:"new",xlinkTitle:"https://github.com/cardano-scaling/hydra/blob/master/hydra-node/src/Hydra/HeadLogic.hs",xlinkType:"simple",className:"entity","data-entity":"head_logic","data-source-line":68,"data-uid":"ent0005",target:"_top"},ba.createElement("rect",{width:212.336,height:101.484,x:652.56,y:291.747,fill:"#85BBF0",rx:2.5,ry:2.5,style:{stroke:"#78a8d8",strokeWidth:.5}}),_||(_=ba.createElement("text",{x:717.378,y:312.885,fontFamily:"sans-serif",fontSize:12,fontStyle:"italic",textLength:82.699},"\xabcomponent\xbb")),C||(C=ba.createElement("text",{x:708.892,y:330.567,fontFamily:"sans-serif",fontSize:16,fontWeight:"bold",textLength:46.492},"Head")),M||(M=ba.createElement("text",{x:755.384,y:330.567,fontFamily:"sans-serif",fontSize:16,fontWeight:"bold",textLength:5.57})),A||(A=ba.createElement("text",{x:760.955,y:330.567,fontFamily:"sans-serif",fontSize:16,fontWeight:"bold",textLength:47.609},"Logic")),P||(P=ba.createElement("text",{x:756.503,y:347.336,fontFamily:"sans-serif",fontSize:14,textLength:4.45})),B||(B=ba.createElement("text",{x:675.22,y:363.633,fontFamily:"sans-serif",fontSize:14,textLength:67.546},"Maintains")),D||(D=ba.createElement("text",{x:742.766,y:363.633,fontFamily:"sans-serif",fontSize:14,textLength:4.45})),I||(I=ba.createElement("text",{x:747.216,y:363.633,fontFamily:"sans-serif",fontSize:14,textLength:53.963},"internal")),R||(R=ba.createElement("text",{x:801.179,y:363.633,fontFamily:"sans-serif",fontSize:14,textLength:4.45})),O||(O=ba.createElement("text",{x:805.629,y:363.633,fontFamily:"sans-serif",fontSize:14,textLength:36.606},"Head")),q||(q=ba.createElement("text",{x:662.56,y:379.93,fontFamily:"sans-serif",fontSize:14,textLength:35.465},"state")),J||(J=ba.createElement("text",{x:698.025,y:379.93,fontFamily:"sans-serif",fontSize:14,textLength:4.45})),U||(U=ba.createElement("text",{x:702.475,y:379.93,fontFamily:"sans-serif",fontSize:14,textLength:26.339},"and")),X||(X=ba.createElement("text",{x:728.814,y:379.93,fontFamily:"sans-serif",fontSize:14,textLength:4.45})),$||($=ba.createElement("text",{x:733.264,y:379.93,fontFamily:"sans-serif",fontSize:14,textLength:70.014},"processes")),G||(G=ba.createElement("text",{x:803.278,y:379.93,fontFamily:"sans-serif",fontSize:14,textLength:4.45})),K||(K=ba.createElement("text",{x:807.728,y:379.93,fontFamily:"sans-serif",fontSize:14,textLength:47.168},"events"))),ba.createElement("a",{xlinkActuate:"onRequest",xlinkHref:"https://github.com/cardano-scaling/hydra/blob/master/hydra-node/src/Hydra/API/Server.hs",xlinkShow:"new",xlinkTitle:"https://github.com/cardano-scaling/hydra/blob/master/hydra-node/src/Hydra/API/Server.hs",xlinkType:"simple",className:"entity","data-entity":"api_server","data-source-line":68,"data-uid":"ent0006",target:"_top"},ba.createElement("rect",{width:210.941,height:101.484,x:992.26,y:291.747,fill:"#85BBF0",rx:2.5,ry:2.5,style:{stroke:"#78a8d8",strokeWidth:.5}}),Q||(Q=ba.createElement("text",{x:1056.381,y:312.885,fontFamily:"sans-serif",fontSize:12,fontStyle:"italic",textLength:82.699},"\xabcomponent\xbb")),V||(V=ba.createElement("text",{x:1050.196,y:330.567,fontFamily:"sans-serif",fontSize:16,fontWeight:"bold",textLength:30.063},"API")),Y||(Y=ba.createElement("text",{x:1080.258,y:330.567,fontFamily:"sans-serif",fontSize:16,fontWeight:"bold",textLength:5.57})),Z||(Z=ba.createElement("text",{x:1085.828,y:330.567,fontFamily:"sans-serif",fontSize:16,fontWeight:"bold",textLength:59.438},"Server")),ee||(ee=ba.createElement("text",{x:1095.506,y:347.336,fontFamily:"sans-serif",fontSize:14,textLength:4.45})),te||(te=ba.createElement("text",{x:1003.101,y:363.633,fontFamily:"sans-serif",fontSize:14,textLength:49.369},"Handle")),ne||(ne=ba.createElement("text",{x:1052.47,y:363.633,fontFamily:"sans-serif",fontSize:14,textLength:4.45})),ae||(ae=ba.createElement("text",{x:1056.92,y:363.633,fontFamily:"sans-serif",fontSize:14,textLength:38.452},"client")),ie||(ie=ba.createElement("text",{x:1095.372,y:363.633,fontFamily:"sans-serif",fontSize:14,textLength:4.45})),se||(se=ba.createElement("text",{x:1099.822,y:363.633,fontFamily:"sans-serif",fontSize:14,textLength:77.171},"commands")),le||(le=ba.createElement("text",{x:1176.993,y:363.633,fontFamily:"sans-serif",fontSize:14,textLength:4.45})),oe||(oe=ba.createElement("text",{x:1181.444,y:363.633,fontFamily:"sans-serif",fontSize:14,textLength:10.917},"&")),re||(re=ba.createElement("text",{x:1002.26,y:379.93,fontFamily:"sans-serif",fontSize:14,textLength:51.926},"queries")),fe||(fe=ba.createElement("text",{x:1054.186,y:379.93,fontFamily:"sans-serif",fontSize:14,textLength:4.45})),ce||(ce=ba.createElement("text",{x:1058.636,y:379.93,fontFamily:"sans-serif",fontSize:14,textLength:26.339},"and")),xe||(xe=ba.createElement("text",{x:1084.975,y:379.93,fontFamily:"sans-serif",fontSize:14,textLength:4.45})),he||(he=ba.createElement("text",{x:1089.425,y:379.93,fontFamily:"sans-serif",fontSize:14,textLength:45.855},"serves")),ye||(ye=ba.createElement("text",{x:1135.281,y:379.93,fontFamily:"sans-serif",fontSize:14,textLength:4.45})),me||(me=ba.createElement("text",{x:1139.731,y:379.93,fontFamily:"sans-serif",fontSize:14,textLength:53.471},"outputs"))),ba.createElement("a",{xlinkActuate:"onRequest",xlinkHref:"https://github.com/cardano-scaling/hydra/blob/master/hydra-node/src/Hydra/Chain.hs",xlinkShow:"new",xlinkTitle:"https://github.com/cardano-scaling/hydra/blob/master/hydra-node/src/Hydra/Chain.hs",xlinkType:"simple",className:"entity","data-entity":"chain","data-source-line":68,"data-uid":"ent0007",target:"_top"},ba.createElement("rect",{width:199.628,height:117.781,x:680.92,y:482.227,fill:"#85BBF0",rx:2.5,ry:2.5,style:{stroke:"#78a8d8",strokeWidth:.5}}),de||(de=ba.createElement("text",{x:739.384,y:503.365,fontFamily:"sans-serif",fontSize:12,fontStyle:"italic",textLength:82.699},"\xabcomponent\xbb")),ge||(ge=ba.createElement("text",{x:755.332,y:521.047,fontFamily:"sans-serif",fontSize:16,fontWeight:"bold",textLength:50.805},"Chain")),Fe||(Fe=ba.createElement("text",{x:778.509,y:537.816,fontFamily:"sans-serif",fontSize:14,textLength:4.45})),Ee||(Ee=ba.createElement("text",{x:700.142,y:554.113,fontFamily:"sans-serif",fontSize:14,textLength:79.215},"Connection")),Se||(Se=ba.createElement("text",{x:779.356,y:554.113,fontFamily:"sans-serif",fontSize:14,textLength:4.45})),pe||(pe=ba.createElement("text",{x:783.807,y:554.113,fontFamily:"sans-serif",fontSize:14,textLength:14.055},"to")),ze||(ze=ba.createElement("text",{x:797.861,y:554.113,fontFamily:"sans-serif",fontSize:14,textLength:4.45})),Le||(Le=ba.createElement("text",{x:802.312,y:554.113,fontFamily:"sans-serif",fontSize:14,textLength:59.015},"Cardano")),ue||(ue=ba.createElement("text",{x:690.92,y:570.409,fontFamily:"sans-serif",fontSize:14,textLength:58.468},"Observe")),ke||(ke=ba.createElement("text",{x:749.388,y:570.409,fontFamily:"sans-serif",fontSize:14,textLength:4.45})),be||(be=ba.createElement("text",{x:753.838,y:570.409,fontFamily:"sans-serif",fontSize:14,textLength:21.068},"txs")),ve||(ve=ba.createElement("text",{x:774.906,y:570.409,fontFamily:"sans-serif",fontSize:14,textLength:4.45})),We||(We=ba.createElement("text",{x:779.356,y:570.409,fontFamily:"sans-serif",fontSize:14,textLength:60.402},"on-chain")),we||(we=ba.createElement("text",{x:839.759,y:570.409,fontFamily:"sans-serif",fontSize:14,textLength:4.45})),je||(je=ba.createElement("text",{x:844.209,y:570.409,fontFamily:"sans-serif",fontSize:14,textLength:26.339},"and")),He||(He=ba.createElement("text",{x:726.07,y:586.706,fontFamily:"sans-serif",fontSize:14,textLength:30.235},"post")),Te||(Te=ba.createElement("text",{x:756.306,y:586.706,fontFamily:"sans-serif",fontSize:14,textLength:4.45})),Ne||(Ne=ba.createElement("text",{x:760.756,y:586.706,fontFamily:"sans-serif",fontSize:14,textLength:13.774},"tx")),_e||(_e=ba.createElement("text",{x:774.53,y:586.706,fontFamily:"sans-serif",fontSize:14,textLength:4.45})),Ce||(Ce=ba.createElement("text",{x:778.981,y:586.706,fontFamily:"sans-serif",fontSize:14,textLength:14.055},"to")),Me||(Me=ba.createElement("text",{x:793.035,y:586.706,fontFamily:"sans-serif",fontSize:14,textLength:4.45})),Ae||(Ae=ba.createElement("text",{x:797.485,y:586.706,fontFamily:"sans-serif",fontSize:14,textLength:37.912},"chain"))),ba.createElement("a",{xlinkActuate:"onRequest",xlinkHref:"https://github.com/cardano-scaling/hydra/blob/master/hydra-node/src/Hydra/Chain/Direct/Wallet.hs",xlinkShow:"new",xlinkTitle:"https://github.com/cardano-scaling/hydra/blob/master/hydra-node/src/Hydra/Chain/Direct/Wallet.hs",xlinkType:"simple",className:"entity","data-entity":"wallet","data-source-line":68,"data-uid":"ent0008",target:"_top"},ba.createElement("rect",{width:201.269,height:101.484,x:325.1,y:490.377,fill:"#85BBF0",rx:2.5,ry:2.5,style:{stroke:"#78a8d8",strokeWidth:.5}}),Pe||(Pe=ba.createElement("text",{x:384.385,y:511.515,fontFamily:"sans-serif",fontSize:12,fontStyle:"italic",textLength:82.699},"\xabcomponent\xbb")),Be||(Be=ba.createElement("text",{x:396.777,y:529.197,fontFamily:"sans-serif",fontSize:16,fontWeight:"bold",textLength:57.914},"Wallet")),De||(De=ba.createElement("text",{x:423.509,y:545.966,fontFamily:"sans-serif",fontSize:14,textLength:4.45})),Ie||(Ie=ba.createElement("text",{x:337.78,y:562.263,fontFamily:"sans-serif",fontSize:14,textLength:75.257},"Embedded")),Re||(Re=ba.createElement("text",{x:413.036,y:562.263,fontFamily:"sans-serif",fontSize:14,textLength:4.45})),Oe||(Oe=ba.createElement("text",{x:417.487,y:562.263,fontFamily:"sans-serif",fontSize:14,textLength:44.304},"Wallet")),qe||(qe=ba.createElement("text",{x:461.79,y:562.263,fontFamily:"sans-serif",fontSize:14,textLength:4.45})),Je||(Je=ba.createElement("text",{x:466.241,y:562.263,fontFamily:"sans-serif",fontSize:14,textLength:14.055},"to")),Ue||(Ue=ba.createElement("text",{x:480.295,y:562.263,fontFamily:"sans-serif",fontSize:14,textLength:4.45})),Xe||(Xe=ba.createElement("text",{x:484.745,y:562.263,fontFamily:"sans-serif",fontSize:14,textLength:28.943},"sign")),$e||($e=ba.createElement("text",{x:335.1,y:578.559,fontFamily:"sans-serif",fontSize:14,textLength:86.379},"transactions")),Ge||(Ge=ba.createElement("text",{x:421.479,y:578.559,fontFamily:"sans-serif",fontSize:14,textLength:4.45})),Ke||(Ke=ba.createElement("text",{x:425.929,y:578.559,fontFamily:"sans-serif",fontSize:14,textLength:26.339},"and")),Qe||(Qe=ba.createElement("text",{x:452.268,y:578.559,fontFamily:"sans-serif",fontSize:14,textLength:4.45})),Ve||(Ve=ba.createElement("text",{x:456.718,y:578.559,fontFamily:"sans-serif",fontSize:14,textLength:25.751},"pay")),Ye||(Ye=ba.createElement("text",{x:482.469,y:578.559,fontFamily:"sans-serif",fontSize:14,textLength:4.45})),Ze||(Ze=ba.createElement("text",{x:486.919,y:578.559,fontFamily:"sans-serif",fontSize:14,textLength:29.449},"fees"))),ba.createElement("a",{xlinkActuate:"onRequest",xlinkHref:"https://github.com/cardano-scaling/hydra/blob/master/hydra-node/src/Hydra/Network.hs",xlinkShow:"new",xlinkTitle:"https://github.com/cardano-scaling/hydra/blob/master/hydra-node/src/Hydra/Network.hs",xlinkType:"simple",className:"entity","data-entity":"network","data-source-line":68,"data-uid":"ent0009",target:"_top"},ba.createElement("rect",{width:190.29,height:101.484,x:324.59,y:291.747,fill:"#85BBF0",rx:2.5,ry:2.5,style:{stroke:"#78a8d8",strokeWidth:.5}}),et||(et=ba.createElement("text",{x:378.385,y:312.885,fontFamily:"sans-serif",fontSize:12,fontStyle:"italic",textLength:82.699},"\xabcomponent\xbb")),tt||(tt=ba.createElement("text",{x:381.637,y:330.567,fontFamily:"sans-serif",fontSize:16,fontWeight:"bold",textLength:76.195},"Network")),nt||(nt=ba.createElement("text",{x:417.51,y:347.336,fontFamily:"sans-serif",fontSize:14,textLength:4.45})),at||(at=ba.createElement("text",{x:334.59,y:363.633,fontFamily:"sans-serif",fontSize:14,textLength:62.904},"Manages")),it||(it=ba.createElement("text",{x:397.494,y:363.633,fontFamily:"sans-serif",fontSize:14,textLength:4.45})),st||(st=ba.createElement("text",{x:401.945,y:363.633,fontFamily:"sans-serif",fontSize:14,textLength:84.431},"connections")),lt||(lt=ba.createElement("text",{x:486.375,y:363.633,fontFamily:"sans-serif",fontSize:14,textLength:4.45})),ot||(ot=ba.createElement("text",{x:490.825,y:363.633,fontFamily:"sans-serif",fontSize:14,textLength:14.055},"to")),rt||(rt=ba.createElement("text",{x:400.154,y:379.93,fontFamily:"sans-serif",fontSize:14,textLength:39.163},"peers"))),ba.createElement("a",{xlinkActuate:"onRequest",xlinkHref:"https://github.com/cardano-scaling/hydra/blob/master/hydra-node/src/Hydra/Logging.hs",xlinkShow:"new",xlinkTitle:"https://github.com/cardano-scaling/hydra/blob/master/hydra-node/src/Hydra/Logging.hs",xlinkType:"simple",className:"entity","data-entity":"logging","data-source-line":68,"data-uid":"ent0010",target:"_top"},ba.createElement("rect",{width:168.689,height:85.188,x:558.39,y:130.427,fill:"#85BBF0",rx:2.5,ry:2.5,style:{stroke:"#78a8d8",strokeWidth:.5}}),ft||(ft=ba.createElement("text",{x:601.385,y:151.565,fontFamily:"sans-serif",fontSize:12,fontStyle:"italic",textLength:82.699},"\xabcomponent\xbb")),ct||(ct=ba.createElement("text",{x:606.523,y:169.247,fontFamily:"sans-serif",fontSize:16,fontWeight:"bold",textLength:72.422},"Logging")),xt||(xt=ba.createElement("text",{x:640.509,y:186.016,fontFamily:"sans-serif",fontSize:14,textLength:4.45})),ht||(ht=ba.createElement("text",{x:568.39,y:202.313,fontFamily:"sans-serif",fontSize:14,textLength:42.178},"Dump")),yt||(yt=ba.createElement("text",{x:610.568,y:202.313,fontFamily:"sans-serif",fontSize:14,textLength:4.45})),mt||(mt=ba.createElement("text",{x:615.018,y:202.313,fontFamily:"sans-serif",fontSize:14,textLength:34.508},"JSON")),dt||(dt=ba.createElement("text",{x:649.526,y:202.313,fontFamily:"sans-serif",fontSize:14,textLength:4.45})),gt||(gt=ba.createElement("text",{x:653.976,y:202.313,fontFamily:"sans-serif",fontSize:14,textLength:14.055},"to")),Ft||(Ft=ba.createElement("text",{x:668.031,y:202.313,fontFamily:"sans-serif",fontSize:14,textLength:4.45})),Et||(Et=ba.createElement("text",{x:672.481,y:202.313,fontFamily:"sans-serif",fontSize:14,textLength:44.598},"stdout"))),ba.createElement("a",{xlinkActuate:"onRequest",xlinkHref:"https://github.com/cardano-scaling/hydra/blob/master/hydra-node/src/Hydra/Logging/Monitoring.hs",xlinkShow:"new",xlinkTitle:"https://github.com/cardano-scaling/hydra/blob/master/hydra-node/src/Hydra/Logging/Monitoring.hs",xlinkType:"simple",className:"entity","data-entity":"monitoring","data-source-line":68,"data-uid":"ent0011",target:"_top"},ba.createElement("rect",{width:166.392,height:101.484,x:356.53,y:122.277,fill:"#85BBF0",rx:2.5,ry:2.5,style:{stroke:"#78a8d8",strokeWidth:.5}}),St||(St=ba.createElement("text",{x:398.376,y:143.416,fontFamily:"sans-serif",fontSize:12,fontStyle:"italic",textLength:82.699},"\xabcomponent\xbb")),pt||(pt=ba.createElement("text",{x:390.402,y:161.097,fontFamily:"sans-serif",fontSize:16,fontWeight:"bold",textLength:98.648},"Monitoring")),zt||(zt=ba.createElement("text",{x:437.501,y:177.866,fontFamily:"sans-serif",fontSize:14,textLength:4.45})),Lt||(Lt=ba.createElement("text",{x:366.53,y:194.163,fontFamily:"sans-serif",fontSize:14,textLength:57.784},"Exposes")),ut||(ut=ba.createElement("text",{x:424.314,y:194.163,fontFamily:"sans-serif",fontSize:14,textLength:4.45})),kt||(kt=ba.createElement("text",{x:428.764,y:194.163,fontFamily:"sans-serif",fontSize:14,textLength:84.157},"Prometheus")),bt||(bt=ba.createElement("text",{x:413.537,y:210.459,fontFamily:"sans-serif",fontSize:14,textLength:52.377},"metrics"))),ba.createElement("g",{className:"entity","data-entity":"ledger","data-source-line":68,"data-uid":"ent0012"},ba.createElement("rect",{width:185.894,height:99.156,x:915.78,y:491.547,fill:"#23AA12",rx:2.5,ry:2.5,style:{stroke:"#78a8d8",strokeWidth:.5}}),vt||(vt=ba.createElement("text",{x:976.422,y:512.686,fontFamily:"sans-serif",fontSize:12,fontStyle:"italic",textLength:64.611},"\xabexternal\xbb")),Wt||(Wt=ba.createElement("text",{x:967.378,y:526.654,fontFamily:"sans-serif",fontSize:12,fontStyle:"italic",textLength:82.699},"\xabcomponent\xbb")),wt||(wt=ba.createElement("text",{x:937.063,y:544.336,fontFamily:"sans-serif",fontSize:16,fontWeight:"bold",textLength:75.063},"Cardano")),jt||(jt=ba.createElement("text",{x:1012.126,y:544.336,fontFamily:"sans-serif",fontSize:16,fontWeight:"bold",textLength:5.57})),Ht||(Ht=ba.createElement("text",{x:1017.696,y:544.336,fontFamily:"sans-serif",fontSize:16,fontWeight:"bold",textLength:62.695},"Ledger")),Tt||(Tt=ba.createElement("text",{x:1006.502,y:561.105,fontFamily:"sans-serif",fontSize:14,textLength:4.45})),Nt||(Nt=ba.createElement("text",{x:925.78,y:577.401,fontFamily:"sans-serif",fontSize:14,textLength:67.546},"Maintains")),_t||(_t=ba.createElement("text",{x:993.326,y:577.401,fontFamily:"sans-serif",fontSize:14,textLength:4.45})),Ct||(Ct=ba.createElement("text",{x:997.776,y:577.401,fontFamily:"sans-serif",fontSize:14,textLength:39.033},"Layer")),Mt||(Mt=ba.createElement("text",{x:1036.809,y:577.401,fontFamily:"sans-serif",fontSize:14,textLength:4.45})),At||(At=ba.createElement("text",{x:1041.259,y:577.401,fontFamily:"sans-serif",fontSize:14,textLength:8.907},"2")),Pt||(Pt=ba.createElement("text",{x:1050.167,y:577.401,fontFamily:"sans-serif",fontSize:14,textLength:4.45})),Bt||(Bt=ba.createElement("text",{x:1054.617,y:577.401,fontFamily:"sans-serif",fontSize:14,textLength:37.058},"State"))),ba.createElement("g",{className:"entity","data-entity":"hydra_node_peer","data-source-line":76,"data-uid":"ent0028"},ba.createElement("rect",{width:187.461,height:66.563,x:7,y:309.207,fill:"#438DD5",rx:2.5,ry:2.5,style:{stroke:"#3c7fc0",strokeWidth:.5}}),Dt||(Dt=ba.createElement("text",{x:64.894,y:330.346,fill:"#FFF",fontFamily:"sans-serif",fontSize:12,fontStyle:"italic",textLength:71.672},"\xabcontainer\xbb")),It||(It=ba.createElement("text",{x:17,y:348.027,fill:"#FFF",fontFamily:"sans-serif",fontSize:16,fontWeight:"bold",textLength:53.961},"Hydra")),Rt||(Rt=ba.createElement("text",{x:70.961,y:348.027,fill:"#FFF",fontFamily:"sans-serif",fontSize:16,fontWeight:"bold",textLength:5.57})),Ot||(Ot=ba.createElement("text",{x:76.531,y:348.027,fill:"#FFF",fontFamily:"sans-serif",fontSize:16,fontWeight:"bold",textLength:46.688},"Node")),qt||(qt=ba.createElement("text",{x:123.219,y:348.027,fill:"#FFF",fontFamily:"sans-serif",fontSize:16,fontWeight:"bold",textLength:5.57})),Jt||(Jt=ba.createElement("text",{x:128.789,y:348.027,fill:"#FFF",fontFamily:"sans-serif",fontSize:16,fontWeight:"bold",textLength:55.672},"(peer)")),Ut||(Ut=ba.createElement("text",{x:36.945,y:362.939,fill:"#FFF",fontFamily:"sans-serif",fontSize:12,fontStyle:"italic",textLength:35.994},"[Local")),Xt||(Xt=ba.createElement("text",{x:72.939,y:362.939,fill:"#FFF",fontFamily:"sans-serif",fontSize:12,fontStyle:"italic",textLength:3.814})),$t||($t=ba.createElement("text",{x:76.754,y:362.939,fill:"#FFF",fontFamily:"sans-serif",fontSize:12,fontStyle:"italic",textLength:87.762},"cardano-node]"))),ba.createElement("g",{className:"entity","data-entity":"cardano_node","data-source-line":76,"data-uid":"ent0029"},ba.createElement("rect",{width:147.32,height:66.563,x:470.07,y:728.917,fill:"#438DD5",rx:2.5,ry:2.5,style:{stroke:"#3c7fc0",strokeWidth:.5}}),Gt||(Gt=ba.createElement("text",{x:507.894,y:750.056,fill:"#FFF",fontFamily:"sans-serif",fontSize:12,fontStyle:"italic",textLength:71.672},"\xabcontainer\xbb")),Kt||(Kt=ba.createElement("text",{x:480.07,y:767.737,fill:"#FFF",fontFamily:"sans-serif",fontSize:16,fontWeight:"bold",textLength:75.063},"Cardano")),Qt||(Qt=ba.createElement("text",{x:555.133,y:767.737,fill:"#FFF",fontFamily:"sans-serif",fontSize:16,fontWeight:"bold",textLength:5.57})),Vt||(Vt=ba.createElement("text",{x:560.703,y:767.737,fill:"#FFF",fontFamily:"sans-serif",fontSize:16,fontWeight:"bold",textLength:46.688},"Node")),Yt||(Yt=ba.createElement("text",{x:482.412,y:782.649,fill:"#FFF",fontFamily:"sans-serif",fontSize:12,fontStyle:"italic",textLength:35.994},"[Local")),Zt||(Zt=ba.createElement("text",{x:518.406,y:782.649,fill:"#FFF",fontFamily:"sans-serif",fontSize:12,fontStyle:"italic",textLength:3.814})),en||(en=ba.createElement("text",{x:522.22,y:782.649,fill:"#FFF",fontFamily:"sans-serif",fontSize:12,fontStyle:"italic",textLength:82.828},"cadano-node]"))),ba.createElement("g",{className:"entity","data-entity":"cardano_node_peer","data-source-line":76,"data-uid":"ent0030"},ba.createElement("rect",{width:208.563,height:66.563,x:60.45,y:507.837,fill:"#438DD5",rx:2.5,ry:2.5,style:{stroke:"#3c7fc0",strokeWidth:.5}}),tn||(tn=ba.createElement("text",{x:128.895,y:528.976,fill:"#FFF",fontFamily:"sans-serif",fontSize:12,fontStyle:"italic",textLength:71.672},"\xabcontainer\xbb")),nn||(nn=ba.createElement("text",{x:70.45,y:546.657,fill:"#FFF",fontFamily:"sans-serif",fontSize:16,fontWeight:"bold",textLength:75.063},"Cardano")),an||(an=ba.createElement("text",{x:145.512,y:546.657,fill:"#FFF",fontFamily:"sans-serif",fontSize:16,fontWeight:"bold",textLength:5.57})),sn||(sn=ba.createElement("text",{x:151.083,y:546.657,fill:"#FFF",fontFamily:"sans-serif",fontSize:16,fontWeight:"bold",textLength:46.688},"Node")),ln||(ln=ba.createElement("text",{x:197.77,y:546.657,fill:"#FFF",fontFamily:"sans-serif",fontSize:16,fontWeight:"bold",textLength:5.57})),on||(on=ba.createElement("text",{x:203.341,y:546.657,fill:"#FFF",fontFamily:"sans-serif",fontSize:16,fontWeight:"bold",textLength:55.672},"(peer)")),rn||(rn=ba.createElement("text",{x:100.946,y:561.569,fill:"#FFF",fontFamily:"sans-serif",fontSize:12,fontStyle:"italic",textLength:35.994},"[Local")),fn||(fn=ba.createElement("text",{x:136.94,y:561.569,fill:"#FFF",fontFamily:"sans-serif",fontSize:12,fontStyle:"italic",textLength:3.814})),cn||(cn=ba.createElement("text",{x:140.755,y:561.569,fill:"#FFF",fontFamily:"sans-serif",fontSize:12,fontStyle:"italic",textLength:87.762},"cardano-node]"))),ba.createElement("g",{className:"entity","data-entity":"hydra_client","data-source-line":76,"data-uid":"ent0031"},ba.createElement("rect",{width:132.133,height:52.594,x:1348.66,y:316.187,fill:"#438DD5",rx:2.5,ry:2.5,style:{stroke:"#3c7fc0",strokeWidth:.5}}),xn||(xn=ba.createElement("text",{x:1378.89,y:337.325,fill:"#FFF",fontFamily:"sans-serif",fontSize:12,fontStyle:"italic",textLength:71.672},"\xabcontainer\xbb")),hn||(hn=ba.createElement("text",{x:1358.66,y:355.007,fill:"#FFF",fontFamily:"sans-serif",fontSize:16,fontWeight:"bold",textLength:53.961},"Hydra")),yn||(yn=ba.createElement("text",{x:1412.621,y:355.007,fill:"#FFF",fontFamily:"sans-serif",fontSize:16,fontWeight:"bold",textLength:5.57})),mn||(mn=ba.createElement("text",{x:1418.191,y:355.007,fill:"#FFF",fontFamily:"sans-serif",fontSize:16,fontWeight:"bold",textLength:52.602},"Client"))),ba.createElement("a",{xlinkActuate:"onRequest",xlinkHref:"https://github.com/cardano-scaling/hydra/tree/master/hydra-plutus",xlinkShow:"new",xlinkTitle:"https://github.com/cardano-scaling/hydra/tree/master/hydra-plutus",xlinkType:"simple",className:"entity","data-entity":"smart_contracts","data-source-line":68,"data-uid":"ent0032",target:"_top"},ba.createElement("rect",{width:214.517,height:150.375,x:673.47,y:687.007,fill:"#85BBF0",rx:2.5,ry:2.5,style:{stroke:"#78a8d8",strokeWidth:.5}}),dn||(dn=ba.createElement("text",{x:739.379,y:708.145,fontFamily:"sans-serif",fontSize:12,fontStyle:"italic",textLength:82.699},"\xabcomponent\xbb")),gn||(gn=ba.createElement("text",{x:723.697,y:725.827,fontFamily:"sans-serif",fontSize:16,fontWeight:"bold",textLength:53.961},"Hydra")),Fn||(Fn=ba.createElement("text",{x:777.658,y:725.827,fontFamily:"sans-serif",fontSize:16,fontWeight:"bold",textLength:5.57})),En||(En=ba.createElement("text",{x:783.228,y:725.827,fontFamily:"sans-serif",fontSize:16,fontWeight:"bold",textLength:54.531},"Smart")),Sn||(Sn=ba.createElement("text",{x:737.17,y:744.452,fontFamily:"sans-serif",fontSize:16,fontWeight:"bold",textLength:87.117},"Contracts")),pn||(pn=ba.createElement("text",{x:757.678,y:759.364,fontFamily:"sans-serif",fontSize:12,fontStyle:"italic",textLength:46.102},"[Plutus]")),zn||(zn=ba.createElement("text",{x:778.503,y:775.189,fontFamily:"sans-serif",fontSize:14,textLength:4.45})),Ln||(Ln=ba.createElement("text",{x:691.752,y:791.486,fontFamily:"sans-serif",fontSize:14,textLength:62.856},"On-chain")),un||(un=ba.createElement("text",{x:754.608,y:791.486,fontFamily:"sans-serif",fontSize:14,textLength:4.45})),kn||(kn=ba.createElement("text",{x:759.058,y:791.486,fontFamily:"sans-serif",fontSize:14,textLength:40.756},"smart")),bn||(bn=ba.createElement("text",{x:799.814,y:791.486,fontFamily:"sans-serif",fontSize:14,textLength:4.45})),vn||(vn=ba.createElement("text",{x:804.264,y:791.486,fontFamily:"sans-serif",fontSize:14,textLength:65.44},"contracts")),Wn||(Wn=ba.createElement("text",{x:683.47,y:807.783,fontFamily:"sans-serif",fontSize:14,textLength:74.375},"controlling")),wn||(wn=ba.createElement("text",{x:757.845,y:807.783,fontFamily:"sans-serif",fontSize:14,textLength:4.45})),jn||(jn=ba.createElement("text",{x:762.295,y:807.783,fontFamily:"sans-serif",fontSize:14,textLength:22.976},"the")),Hn||(Hn=ba.createElement("text",{x:785.271,y:807.783,fontFamily:"sans-serif",fontSize:14,textLength:4.45})),Tn||(Tn=ba.createElement("text",{x:789.721,y:807.783,fontFamily:"sans-serif",fontSize:14,textLength:70.321},"behaviour")),Nn||(Nn=ba.createElement("text",{x:860.042,y:807.783,fontFamily:"sans-serif",fontSize:14,textLength:4.45})),_n||(_n=ba.createElement("text",{x:864.492,y:807.783,fontFamily:"sans-serif",fontSize:14,textLength:13.494},"of")),Cn||(Cn=ba.createElement("text",{x:705.882,y:824.08,fontFamily:"sans-serif",fontSize:14,textLength:22.976},"the")),Mn||(Mn=ba.createElement("text",{x:728.857,y:824.08,fontFamily:"sans-serif",fontSize:14,textLength:4.45})),An||(An=ba.createElement("text",{x:733.307,y:824.08,fontFamily:"sans-serif",fontSize:14,textLength:57.415},"protocol")),Pn||(Pn=ba.createElement("text",{x:790.722,y:824.08,fontFamily:"sans-serif",fontSize:14,textLength:4.45})),Bn||(Bn=ba.createElement("text",{x:795.173,y:824.08,fontFamily:"sans-serif",fontSize:14,textLength:60.402},"on-chain"))),ba.createElement("g",{className:"link","data-entity-1":"network","data-entity-2":"head_logic","data-source-line":1765,"data-uid":"lnk22"},ba.createElement("path",{fill:"none",d:"M523.06 342.487H644.2",style:{stroke:"#666",strokeWidth:1}}),ba.createElement("path",{fill:"#666",d:"m515.06 342.487 8 3v-6zM652.2 342.487l-8-3v6z",style:{stroke:"#666",strokeWidth:1}}),Dn||(Dn=ba.createElement("text",{x:533.22,y:322.625,fill:"#666",fontFamily:"sans-serif",fontSize:12,fontWeight:"bold",textLength:40.471},"Hydra")),In||(In=ba.createElement("text",{x:573.691,y:322.625,fill:"#666",fontFamily:"sans-serif",fontSize:12,fontWeight:"bold",textLength:4.178})),Rn||(Rn=ba.createElement("text",{x:577.868,y:322.625,fill:"#666",fontFamily:"sans-serif",fontSize:12,fontWeight:"bold",textLength:56.408},"Protocol")),On||(On=ba.createElement("text",{x:550.581,y:336.594,fill:"#666",fontFamily:"sans-serif",fontSize:12,fontWeight:"bold",textLength:66.334},"Messages"))),ba.createElement("g",{className:"link","data-entity-1":"head_logic","data-entity-2":"api_server","data-source-line":1779,"data-uid":"lnk23"},ba.createElement("path",{fill:"none",d:"M873.06 342.487h110.72",style:{stroke:"#666",strokeWidth:1}}),ba.createElement("path",{fill:"#666",d:"m865.06 342.487 8 3v-6zM991.78 342.487l-8-3v6z",style:{stroke:"#666",strokeWidth:1}}),qn||(qn=ba.createElement("text",{x:884.058,y:322.625,fill:"#666",fontFamily:"sans-serif",fontSize:12,fontWeight:"bold",textLength:75.328},"ClientInput")),Jn||(Jn=ba.createElement("text",{x:959.387,y:322.625,fill:"#666",fontFamily:"sans-serif",fontSize:12,fontWeight:"bold",textLength:4.178})),Un||(Un=ba.createElement("text",{x:963.564,y:322.625,fill:"#666",fontFamily:"sans-serif",fontSize:12,fontWeight:"bold",textLength:10.465},"&")),Xn||(Xn=ba.createElement("text",{x:883.08,y:336.594,fill:"#666",fontFamily:"sans-serif",fontSize:12,fontWeight:"bold",textLength:91.928},"ServerOutput"))),ba.createElement("g",{className:"link","data-entity-1":"head_logic","data-entity-2":"chain","data-source-line":1737,"data-uid":"lnk24"},ba.createElement("path",{fill:"none",d:"M765.23 401.567c3.02 26.97 4.968 44.46 8.118 72.55",style:{stroke:"#666",strokeWidth:1}}),ba.createElement("path",{fill:"#666",d:"m764.34 393.617-2.091 8.284 5.963-.668zM774.24 482.067l2.09-8.285-5.963.669z",style:{stroke:"#666",strokeWidth:1}}),$n||($n=ba.createElement("text",{x:771.39,y:435.365,fill:"#666",fontFamily:"sans-serif",fontSize:12,fontWeight:"bold",textLength:82.547},"Observation")),Gn||(Gn=ba.createElement("text",{x:853.937,y:435.365,fill:"#666",fontFamily:"sans-serif",fontSize:12,fontWeight:"bold",textLength:4.178})),Kn||(Kn=ba.createElement("text",{x:858.115,y:435.365,fill:"#666",fontFamily:"sans-serif",fontSize:12,fontWeight:"bold",textLength:10.465},"&")),Qn||(Qn=ba.createElement("text",{x:783.598,y:449.334,fill:"#666",fontFamily:"sans-serif",fontSize:12,fontWeight:"bold",textLength:72.773},"OnChainTx"))),ba.createElement("g",{className:"link","data-entity-1":"head_logic","data-entity-2":"ledger","data-source-line":1730,"data-uid":"lnk25"},ba.createElement("path",{fill:"none",d:"M836.96 393.657c13.82 9.5 27.9 19.59 40.77 29.57 27.22 21.11 50.045 40.942 73.625 62.572",style:{stroke:"#666",strokeWidth:1}}),ba.createElement("path",{fill:"#666",d:"m957.25 491.207-3.867-7.619-4.056 4.422z",style:{stroke:"#666",strokeWidth:1}}),Vn||(Vn=ba.createElement("text",{x:912.33,y:442.365,fill:"#666",fontFamily:"sans-serif",fontSize:12,fontWeight:"bold",textLength:38.402},"Apply")),Yn||(Yn=ba.createElement("text",{x:950.732,y:442.365,fill:"#666",fontFamily:"sans-serif",fontSize:12,fontWeight:"bold",textLength:4.178})),Zn||(Zn=ba.createElement("text",{x:954.91,y:442.365,fill:"#666",fontFamily:"sans-serif",fontSize:12,fontWeight:"bold",textLength:15.926},"Tx"))),ba.createElement("g",{className:"link","data-entity-1":"wallet","data-entity-2":"chain","data-source-line":1758,"data-uid":"lnk27"},ba.createElement("path",{fill:"none",d:"M534.51 541.117h146.11",style:{stroke:"#666",strokeWidth:1}}),ba.createElement("path",{fill:"#666",d:"m526.51 541.117 8 3v-6z",style:{stroke:"#666",strokeWidth:1}}),ea||(ea=ba.createElement("text",{x:544.64,y:535.255,fill:"#666",fontFamily:"sans-serif",fontSize:12,fontWeight:"bold",textLength:29.889},"Sign")),ta||(ta=ba.createElement("text",{x:574.529,y:535.255,fill:"#666",fontFamily:"sans-serif",fontSize:12,fontWeight:"bold",textLength:4.178})),na||(na=ba.createElement("text",{x:578.706,y:535.255,fill:"#666",fontFamily:"sans-serif",fontSize:12,fontWeight:"bold",textLength:84.428},"transactions"))),ba.createElement("g",{className:"link","data-entity-1":"chain","data-entity-2":"smart_contracts","data-source-line":1706,"data-uid":"lnk33"},ba.createElement("path",{fill:"none",d:"M780.73 600.257v78.39",style:{stroke:"#666",strokeWidth:1}}),ba.createElement("path",{fill:"#666",d:"m780.73 686.647 3-8h-6z",style:{stroke:"#666",strokeWidth:1}}),aa||(aa=ba.createElement("text",{x:781.73,y:649.145,fill:"#666",fontFamily:"sans-serif",fontSize:12,fontWeight:"bold",textLength:25.025},"Use"))),ba.createElement("g",{className:"link","data-entity-1":"chain","data-entity-2":"cardano_node","data-source-line":1737,"data-uid":"lnk34"},ba.createElement("path",{fill:"none",d:"M711.965 605.687c-44.43 41.07-90.6 83.75-127.15 117.53",style:{stroke:"#666",strokeWidth:1}}),ba.createElement("path",{fill:"#666",d:"m717.84 600.257-7.911 3.227 4.073 4.406zM578.94 728.647l7.911-3.227-4.072-4.406z",style:{stroke:"#666",strokeWidth:1}}),ia||(ia=ba.createElement("text",{x:728.15,y:633.007,fill:"#666",fontFamily:"sans-serif",fontSize:0,textLength:0},".")),sa||(sa=ba.createElement("text",{x:684.46,y:654.145,fill:"#666",fontFamily:"sans-serif",fontSize:12,fontStyle:"italic",textLength:29.672},"[N2C")),la||(la=ba.createElement("text",{x:714.132,y:654.145,fill:"#666",fontFamily:"sans-serif",fontSize:12,fontStyle:"italic",textLength:3.814})),oa||(oa=ba.createElement("text",{x:717.946,y:654.145,fill:"#666",fontFamily:"sans-serif",fontSize:12,fontStyle:"italic",textLength:53.895},"protocol]"))),ba.createElement("g",{className:"link","data-entity-1":"cardano_node_peer","data-entity-2":"cardano_node","data-source-line":1765,"data-uid":"lnk36"},ba.createElement("path",{fill:"none",d:"M227.986 578.69c71.55 41.36 180.478 104.324 252.178 145.764",style:{stroke:"#666",strokeWidth:1}}),ba.createElement("path",{fill:"#666",d:"m221.06 574.687 5.425 6.6 3.002-5.194zM487.09 728.457l-5.425-6.6-3.003 5.194z",style:{stroke:"#666",strokeWidth:1}}),ra||(ra=ba.createElement("text",{x:399.219,y:633.007,fill:"#666",fontFamily:"sans-serif",fontSize:0,textLength:0},".")),fa||(fa=ba.createElement("text",{x:355.23,y:654.145,fill:"#666",fontFamily:"sans-serif",fontSize:12,fontStyle:"italic",textLength:30.27},"[N2N")),ca||(ca=ba.createElement("text",{x:385.5,y:654.145,fill:"#666",fontFamily:"sans-serif",fontSize:12,fontStyle:"italic",textLength:3.814})),xa||(xa=ba.createElement("text",{x:389.314,y:654.145,fill:"#666",fontFamily:"sans-serif",fontSize:12,fontStyle:"italic",textLength:53.895},"protocol]"))),ba.createElement("g",{className:"link","data-entity-1":"hydra_node_peer","data-entity-2":"cardano_node_peer","data-source-line":1710,"data-uid":"lnk37"},ba.createElement("path",{fill:"none",d:"M113.777 383.564c11.86 36.43 26.026 79.976 37.896 116.436",style:{stroke:"#666",strokeWidth:1}}),ba.createElement("path",{fill:"#666",d:"m111.3 375.957-.376 8.536 5.705-1.858zM154.15 507.607l.376-8.536-5.705 1.858z",style:{stroke:"#666",strokeWidth:1}}),ha||(ha=ba.createElement("text",{x:179.34,y:426.227,fill:"#666",fontFamily:"sans-serif",fontSize:0,textLength:0},".")),ya||(ya=ba.createElement("text",{x:135.65,y:447.365,fill:"#666",fontFamily:"sans-serif",fontSize:12,fontStyle:"italic",textLength:29.672},"[N2C")),ma||(ma=ba.createElement("text",{x:165.322,y:447.365,fill:"#666",fontFamily:"sans-serif",fontSize:12,fontStyle:"italic",textLength:3.814})),da||(da=ba.createElement("text",{x:169.136,y:447.365,fill:"#666",fontFamily:"sans-serif",fontSize:12,fontStyle:"italic",textLength:53.895},"protocol]"))),ba.createElement("g",{className:"link","data-entity-1":"hydra_node_peer","data-entity-2":"network","data-source-line":1765,"data-uid":"lnk39"},ba.createElement("path",{fill:"none",d:"M202.72 342.487h113.49",style:{stroke:"#666",strokeWidth:1}}),ba.createElement("path",{fill:"#666",d:"m194.72 342.487 8 3v-6zM324.21 342.487l-8-3v6z",style:{stroke:"#666",strokeWidth:1}}),ga||(ga=ba.createElement("text",{x:259.834,y:301.487,fill:"#666",fontFamily:"sans-serif",fontSize:0,textLength:0},".")),Fa||(Fa=ba.createElement("text",{x:212.52,y:322.625,fill:"#666",fontFamily:"sans-serif",fontSize:12,fontStyle:"italic",textLength:40.711},"[Hydra")),Ea||(Ea=ba.createElement("text",{x:253.231,y:322.625,fill:"#666",fontFamily:"sans-serif",fontSize:12,fontStyle:"italic",textLength:3.814})),Sa||(Sa=ba.createElement("text",{x:257.045,y:322.625,fill:"#666",fontFamily:"sans-serif",fontSize:12,fontStyle:"italic",textLength:50.103},"Network")),pa||(pa=ba.createElement("text",{x:232.887,y:336.594,fill:"#666",fontFamily:"sans-serif",fontSize:12,fontStyle:"italic",textLength:53.895},"protocol]"))),ba.createElement("g",{className:"link","data-entity-1":"api_server","data-entity-2":"hydra_client","data-source-line":1779,"data-uid":"lnk40"},ba.createElement("path",{fill:"none",d:"M1211.29 342.487h129.09",style:{stroke:"#666",strokeWidth:1}}),ba.createElement("path",{fill:"#666",d:"m1203.29 342.487 8 3v-6zM1348.38 342.487l-8-3v6z",style:{stroke:"#666",strokeWidth:1}}),za||(za=ba.createElement("text",{x:1275.969,y:315.487,fill:"#666",fontFamily:"sans-serif",fontSize:0,textLength:0},".")),La||(La=ba.createElement("text",{x:1221.43,y:336.625,fill:"#666",fontFamily:"sans-serif",fontSize:12,fontStyle:"italic",textLength:109.078},"[JSON/Websocket]"))))},wa={},ja="Architecture",Ha={},Ta=[{value:"Event sourcing",id:"event-sourcing",level:3},{value:"Network",id:"network",level:3},{value:"Chain interaction",id:"chain-interaction",level:3},{value:"Chain",id:"chain",level:4},{value:"Wallet",id:"wallet",level:4},{value:"Head logic",id:"head-logic",level:3},{value:"Hydra smart contracts",id:"hydra-smart-contracts",level:3},{value:"API",id:"api",level:3},{value:"Persistence",id:"persistence",level:3},{value:"Logging",id:"logging",level:3},{value:"Monitoring",id:"monitoring",level:3}];function Na(e){const t={a:"a",admonition:"admonition",code:"code",em:"em",h1:"h1",h3:"h3",h4:"h4",header:"header",p:"p",pre:"pre",...(0,ka.R)(),...e.components};return(0,ua.jsxs)(ua.Fragment,{children:[(0,ua.jsx)(t.header,{children:(0,ua.jsx)(t.h1,{id:"architecture",children:"Architecture"})}),"\n",(0,ua.jsxs)(t.p,{children:["This document describes the architecture of the current implementation\nof a ",(0,ua.jsx)(t.code,{children:"hydra-node"}),". The following diagram represents the main\ncomponents of a Hydra node using the ",(0,ua.jsx)(t.a,{href:"https://c4model.com/#ComponentDiagram",children:"C4 Component\nDiagram"})," notation."]}),"\n","\n",(0,ua.jsx)(Wa,{className:"architecture"}),"\n",(0,ua.jsxs)(t.admonition,{type:"info",children:[(0,ua.jsxs)(t.p,{children:["This diagram is manually produced using the ",(0,ua.jsx)(t.a,{href:"https://plantuml.com",children:"PlantUML"})," graphing tool with ",(0,ua.jsx)(t.a,{href:"https://github.com/plantuml-stdlib/C4-PlantUML",children:"C4 extensions"}),"."]}),(0,ua.jsx)(t.pre,{children:(0,ua.jsx)(t.code,{children:"$ plantuml -Tsvg architecture-c4.puml\n"})})]}),"\n",(0,ua.jsx)(t.h3,{id:"event-sourcing",children:"Event sourcing"}),"\n",(0,ua.jsxs)(t.p,{children:["The ",(0,ua.jsx)(t.code,{children:"hydra-node"})," is an event sourced application. This means that the main logic is processing ",(0,ua.jsx)(t.em,{children:"inputs"})," (also called commands) and produces ",(0,ua.jsx)(t.em,{children:"events"}),". These events are saved and loaded to persist application state across restarts. Also, most events are transformed to ",(0,ua.jsx)(t.em,{children:"outputs"})," and can be observed on the API. See ",(0,ua.jsx)(t.a,{href:"./architecture/event-sourcing",children:"Event Sourcing"})," for details."]}),"\n",(0,ua.jsx)(t.h3,{id:"network",children:"Network"}),"\n",(0,ua.jsxs)(t.p,{children:["The ",(0,ua.jsx)(t.em,{children:"network"})," component is responsible for communication between Hydra nodes related to the off-chain part of the Hydra protocol. See ",(0,ua.jsx)(t.a,{href:"./architecture/networking",children:"Networking"})," for details."]}),"\n",(0,ua.jsx)(t.h3,{id:"chain-interaction",children:"Chain interaction"}),"\n",(0,ua.jsx)(t.h4,{id:"chain",children:"Chain"}),"\n",(0,ua.jsxs)(t.p,{children:["The ",(0,ua.jsx)(t.em,{children:"chain"})," component interfaces the Hydra node with the Cardano (layer 1) chain. The current implementation, called ",(0,ua.jsx)(t.code,{children:"Direct"}),", uses the ",(0,ua.jsx)(t.code,{children:"node-to-client"})," protocol to both 'follow the chain' and observe new blocks and transactions that can change the state of the head. It also submits transactions in response to client requests or as needed to advance the protocol's state. This component connects to a locally spun ",(0,ua.jsx)(t.code,{children:"cardano-node"})," using the ",(0,ua.jsx)(t.em,{children:"local socket"})," and contains the ",(0,ua.jsx)(t.em,{children:"off-chain"})," logic, based on ",(0,ua.jsx)(t.code,{children:"cardano-api"}),", which knows how to observe and build transactions relevant to the Hydra protocol. For more details, see ",(0,ua.jsx)(t.a,{href:"/adr/10",children:"ADR-10"}),"."]}),"\n",(0,ua.jsx)(t.h4,{id:"wallet",children:"Wallet"}),"\n",(0,ua.jsxs)(t.p,{children:["The Hydra node maintains an internal wallet using the Cardano signing key provided to the ",(0,ua.jsx)(t.code,{children:"hydra-node"}),". This wallet is used to handle the payment of transaction fees and to sign transactions."]}),"\n",(0,ua.jsx)(t.h3,{id:"head-logic",children:"Head logic"}),"\n",(0,ua.jsxs)(t.p,{children:["This component is at the core of the Hydra node, implementing the protocol's ",(0,ua.jsx)(t.em,{children:"state machine"}),". It is structured around the concepts of ",(0,ua.jsx)(t.code,{children:"Input"}),"s and ",(0,ua.jsx)(t.code,{children:"Effect"}),"s. ",(0,ua.jsx)(t.code,{children:"Input"}),"s from the outside world are interpreted against the current state, potentially resulting in internal ",(0,ua.jsx)(t.code,{children:"Event"}),"s, which are aggregated into an updated state. This can then produce ",(0,ua.jsx)(t.code,{children:"Effect"}),"s, leading to 'side effects' on the outside world. The state available to the ",(0,ua.jsx)(t.em,{children:"head logic"})," consists of the head's content (eg, current ledger, pending transactions) ",(0,ua.jsx)(t.em,{children:"and"})," the data from layer 1 needed to observe and trigger on-chain transitions."]}),"\n",(0,ua.jsx)(t.h3,{id:"hydra-smart-contracts",children:"Hydra smart contracts"}),"\n",(0,ua.jsxs)(t.p,{children:["This component represents all the Hydra smart contracts needed for the Hydra Head protocol operation. Currently, the contracts are written using ",(0,ua.jsx)(t.code,{children:"Plutus-Tx"}),". The scripts are optimized using a custom ",(0,ua.jsx)(t.code,{children:"ScriptContext"})," and specific error codes."]}),"\n",(0,ua.jsx)(t.h3,{id:"api",children:"API"}),"\n",(0,ua.jsxs)(t.p,{children:["The ",(0,ua.jsx)(t.code,{children:"hydra-node"})," component exposes an ",(0,ua.jsx)(t.a,{href:"https://hydra.family/head-protocol/unstable/api-reference",children:"asynchronous API"})," through a WebSocket server. This API is available to the ",(0,ua.jsx)(t.em,{children:"Hydra client"})," for sending commands and observing changes in the state of the Hydra head. Upon startup, the API server loads all historical messages from the persistence layer and serves them to clients interested in observing them."]}),"\n",(0,ua.jsx)(t.h3,{id:"persistence",children:"Persistence"}),"\n",(0,ua.jsxs)(t.p,{children:["The ",(0,ua.jsx)(t.code,{children:"hydra-node"})," state is preserved on disk. The persistence layer is responsible for loading historical messages and Hydra state from disk, as well as storing them in so-called event log files. Depending on the rotation configuration used at startup, these event log files will be rotated to improve restart times. So far, there hasn\u2019t been a need to increase the complexity of this layer or to use a database."]}),"\n",(0,ua.jsx)(t.h3,{id:"logging",children:"Logging"}),"\n",(0,ua.jsxs)(t.p,{children:["The Hydra node logs all internal side effects as JSON-formatted messages to its ",(0,ua.jsx)(t.em,{children:"standard output"})," stream."]}),"\n",(0,ua.jsx)(t.h3,{id:"monitoring",children:"Monitoring"}),"\n",(0,ua.jsxs)(t.p,{children:["The Hydra node ",(0,ua.jsx)(t.a,{href:"https://hydra.family/head-protocol/docs/getting-started/quickstart#hydra-node-options",children:"optionally"})," exposes ",(0,ua.jsx)(t.a,{href:"https://prometheus.io/",children:"Prometheus"}),"-compliant ",(0,ua.jsx)(t.em,{children:"metrics"})," through an HTTP server, on the standard ",(0,ua.jsx)(t.code,{children:"/metrics"})," endpoint."]})]})}function _a(e={}){const{wrapper:t}={...(0,ka.R)(),...e.components};return t?(0,ua.jsx)(t,{...e,children:(0,ua.jsx)(Na,{...e})}):Na(e)}},28453:(e,t,n)=>{n.d(t,{R:()=>l,x:()=>o});var a=n(96540);const i={},s=a.createContext(i);function l(e){const t=a.useContext(s);return a.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function o(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:l(e.components),a.createElement(s.Provider,{value:t},e.children)}}}]);