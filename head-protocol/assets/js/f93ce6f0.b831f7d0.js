"use strict";(self.webpackChunkhydra_head_protocol_docs=self.webpackChunkhydra_head_protocol_docs||[]).push([[5777],{41206:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>a,contentTitle:()=>c,default:()=>h,frontMatter:()=>r,metadata:()=>s,toc:()=>l});var s=t(3500),o=t(74848),i=t(28453);const r={slug:3,title:"3. Asynchronous Duplex Client API",authors:[],tags:["Accepted"]},c=void 0,a={authorsImageUrls:[]},l=[{value:"Status",id:"status",level:2},{value:"Context",id:"context",level:2},{value:"Decision",id:"decision",level:2},{value:"Consequences",id:"consequences",level:2}];function d(e){const n={a:"a",code:"code",em:"em",h2:"h2",li:"li",p:"p",ul:"ul",...(0,i.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.h2,{id:"status",children:"Status"}),"\n",(0,o.jsx)(n.p,{children:"Accepted"}),"\n",(0,o.jsx)(n.h2,{id:"context",children:"Context"}),"\n",(0,o.jsxs)(n.p,{children:["The ",(0,o.jsxs)(n.a,{href:"/adr/2",children:[(0,o.jsx)(n.em,{children:"reactive"})," nature of the Hydra node"]})," means that\nclients produce a ",(0,o.jsx)(n.em,{children:"stream"})," of ",(0,o.jsx)(n.em,{children:"inputs"})," to a node which in turns issues a stream\nof ",(0,o.jsx)(n.em,{children:"outputs"})," representing the outcome of previous inputs or resulting from\ninteraction with peers in the network."]}),"\n",(0,o.jsxs)(n.p,{children:["For example, a client may send a ",(0,o.jsx)(n.em,{children:"command"})," as ",(0,o.jsx)(n.em,{children:"input"}),", upon which the node might\ndo something. When that something is finished, a ",(0,o.jsx)(n.em,{children:"output"})," does indicate that.\nHowever, there might also be an ",(0,o.jsx)(n.em,{children:"output"}),' emitted to the client when another peer\ninteracted with "our" node.']}),"\n",(0,o.jsx)(n.p,{children:"Queries, messages by clients which do only fetch information from the node, are\nnot in scope of this ADR."}),"\n",(0,o.jsx)(n.h2,{id:"decision",children:"Decision"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"We use a single, full-duplex communication channel per client connected to a Hydra node"}),"\n",(0,o.jsxs)(n.li,{children:["This is implemented using a simple ",(0,o.jsx)(n.a,{href:"https://datatracker.ietf.org/doc/html/rfc6455",children:"Websocket"})," with messages corresponding to ",(0,o.jsx)(n.code,{children:"Input"}),"s and ",(0,o.jsx)(n.code,{children:"Output"}),"s."]}),"\n"]}),"\n",(0,o.jsx)(n.h2,{id:"consequences",children:"Consequences"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"Clients needing a synchronous API need to implement it on top"}),"\n",(0,o.jsxs)(n.li,{children:["Clients can receive ",(0,o.jsx)(n.em,{children:"outputs"})," decorrelated from any ",(0,o.jsx)(n.em,{children:"inputs"})," and at any time"]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(d,{...e})}):d(e)}},28453:(e,n,t)=>{t.d(n,{R:()=>r,x:()=>c});var s=t(96540);const o={},i=s.createContext(o);function r(e){const n=s.useContext(i);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:r(e.components),s.createElement(i.Provider,{value:n},e.children)}},3500:e=>{e.exports=JSON.parse('{"permalink":"/head-protocol/adr/3","source":"@site/adr/2021-06-07_003-asynchronous-duplex-api.md","title":"3. Asynchronous Duplex Client API","description":"Status","date":"2021-06-07T00:00:00.000Z","tags":[{"inline":true,"label":"Accepted","permalink":"/head-protocol/adr/tags/accepted"}],"readingTime":0.845,"hasTruncateMarker":false,"authors":[],"frontMatter":{"slug":"3","title":"3. Asynchronous Duplex Client API","authors":[],"tags":["Accepted"]},"unlisted":false,"prevItem":{"title":"2. Reactive Core\\n","permalink":"/head-protocol/adr/2"},"nextItem":{"title":"4. Use Handle to model Effects\\n","permalink":"/head-protocol/adr/4"}}')}}]);