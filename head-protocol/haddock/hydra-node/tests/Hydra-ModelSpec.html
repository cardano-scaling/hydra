<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><meta name="viewport" content="width=device-width, initial-scale=1" /><title>Hydra.ModelSpec</title><link href="linuwial.css" rel="stylesheet" type="text/css" title="Linuwial" /><link rel="stylesheet" type="text/css" href="quick-jump.css" /><link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=PT+Sans:400,400i,700" /><script src="haddock-bundle.min.js" async="async" type="text/javascript"></script><script type="text/x-mathjax-config">MathJax.Hub.Config({ tex2jax: { processClass: "mathjax", ignoreClass: ".*" } });</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script></head><body><div id="package-header"><span class="caption">tests</span><ul class="links" id="page-menu"><li><a href="src/Hydra.ModelSpec.html">Source</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul></div><div id="content"><div id="module-header"><table class="info"><tr><th>Safe Haskell</th><td>Safe-Inferred</td></tr><tr><th>Language</th><td>GHC2021</td></tr></table><p class="caption">Hydra.ModelSpec</p></div><div id="table-of-contents"><div id="contents-list"><p class="caption" onclick="window.scrollTo(0,0)">Contents</p><ul><li><a href="#g:1">Utilities for <code>IOSim</code></a></li></ul></div></div><div id="description"><p class="caption">Description</p><div class="doc"><p>Model-Based testing of Hydra Head protocol implementation.</p><ul><li>Troubleshooting</li><li>* Deadlocks</li></ul><p>One of the most annoying problems one can face with those very high level properties involving multithreading and a lot
 of complex moving parts is when the test execution deadlocks. Here is a short guide on what one can do to troubleshoort
 this kind of issue:</p><ul><li>**Check generators**: <code>suchThat</code> combinator from QuickCheck is useful when one wants to refine another <code>Gen</code>erator's behaviour
   but it can lead to deadlock if the filtering leads to no value being generated. Avoid it.</li><li>**Dump nodes' logs**: In case of a &quot;normal&quot; failure of the tests, the logs from the nodes are dumped. However, if the test does
   not even complete then no logs are produced because they are kept in memory. In this case. replacing <code><a href="Test-Util.html#v:traceInIOSim" title="Test.Util">traceInIOSim</a></code> with
   `traceInIOSim &lt;&gt; traceDebug` will ensure the logs are dumped on the <code><a href="file:///nix/store/6hbgd0w57swq4rl9pcga8m90m9ayylh2-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/GHC-IO-StdHandles.html#v:stderr" title="GHC.IO.StdHandles">stderr</a></code>. It could be a good idea to store them in a file
   as they can be quite large.</li><li>**Use** <code><a href="file:///nix/store/6hbgd0w57swq4rl9pcga8m90m9ayylh2-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/Debug-Trace.html#v:trace" title="Debug.Trace">trace</a></code> liberally: Because getting a proper stack trace is hard in Haskell, esp. in pure code, sprinkling
   <code>trace</code> statements at key points might help understand what's going on and zoom in on the culprits</li><li>**Dump IOSim trace**: In case the deadlock (or race condition) is caused by having two or more concurrent threads competing
   to access a resource, dumping the trace of IOSim's runtime scheduleer execution can help. io-sim generate its trace lazily which
   means that even when it deadlocks, one can capture at least a significant prefix of the trace and dump it to <code><a href="file:///nix/store/6hbgd0w57swq4rl9pcga8m90m9ayylh2-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/GHC-IO-StdHandles.html#v:stderr" title="GHC.IO.StdHandles">stderr</a></code>. One can
   `map ( t -&gt; trace (ppEvents t) t) . traceEvents` over the <code>SimTrace</code> returned by <code>runSimTrace</code> to get some pretty-printed
   output similar to:</li></ul><p>@<code>
   Time 380.1s - ThreadId [4]  node-94455e3e - EventThrow AsyncCancelled
   Time 380.1s - ThreadId [4]  node-94455e3e - EventMask MaskedInterruptible
   Time 380.1s - ThreadId [4]  node-94455e3e - EventMask MaskedInterruptible
   Time 380.1s - ThreadId [4]  node-94455e3e - EventDeschedule Interruptable
   Time 380.1s - ThreadId [4]  node-94455e3e - EventTxCommitted [Labelled (TVarId 25) (Just &quot;async-ThreadId [4]&quot;)] [] Nothing
   Time 380.1s - ThreadId []   main          - EventTxWakeup [Labelled (TVarId 25) (Just &quot;async-ThreadId [4]&quot;)]
   Time 380.1s - ThreadId [4]  node-94455e3e - EventUnblocked [ThreadId []]
   Time 380.1s - ThreadId [4]  node-94455e3e - EventDeschedule Yield
   Time 380.1s - ThreadId []   main          - EventTxCommitted [] [] Nothing
   Time 380.1s - ThreadId []   main          - EventUnblocked []
   Time 380.1s - ThreadId []   main          - EventDeschedule Yield
   Time 380.1s - ThreadId [4]  node-94455e3e - EventThreadFinished
   Time 380.1s - ThreadId [4]  node-94455e3e - EventDeschedule Terminated
   Time 380.1s - ThreadId []   main          - EventThreadFinished
   </code>@</p><ul><li>* Recording trace failures</li></ul><p>When a property fails it will dump the sequence of actions leading to the failure.
 This sequence can be copy/pasted and reused directly as a test against either the <code>Model</code> or the implementation
 as exemplified by the following sample:</p><p>@@
  it &quot;runs actions against actual nodes&quot; $ do
    let Actions act =
          Actions
            [ Var 1
                := Seed
                  { seedKeys =
                      [ (HydraSigningKey (SignKeyEd25519DSIGN &quot;00000000000000000000000000000000000000000000000000000000000000003b6a27bcceb6a42d62a3a8d02a6f0d73653215771de243a63ac048a18b59da29&quot;),
                                          &quot;0100000008030606080507030707000607020508050000020207070508040800&quot;)
                      , (HydraSigningKey (SignKeyEd25519DSIGN &quot;2e00000000000000000000000000000000000000000000000000000000000000264a0707979e0d6691f74b055429b5f318d39c2883bb509310b67424252e9ef2&quot;),
                                          &quot;0106010101070600040403010600080805020003040508030307080706060608&quot;)
                      , (HydraSigningKey (SignKeyEd25519DSIGN &quot;ed785af0fb0000000000000000000000000000000000000000000000000000001c02babf6d3d51b725db8b72043823d66634b39db74836b1494bdb647073d566&quot;),
                                          &quot;0000070304040705060101030802010105080806050605070104030603010503&quot;)
                      ]
                  }
            , Var 2 := Command{Model.party = Party{vkey = HydraVerificationKey (VerKeyEd25519DSIGN &quot;3b6a27bcceb6a42d62a3a8d02a6f0d73653215771de243a63ac048a18b59da29&quot;)},
                               command = Init{contestationPeriod = -6.413670805613}}
            , Var 3 := Command{Model.party = Party{vkey = HydraVerificationKey (VerKeyEd25519DSIGN &quot;264a0707979e0d6691f74b055429b5f318d39c2883bb509310b67424252e9ef2&quot;)},
                               command = Commit{Input.utxo = [(&quot;0106010101070600040403010600080805020003040508030307080706060608&quot;, fromList [(AdaAssetId, 18470954)])]}}
            , Var 4 := Command{Model.party = Party{vkey = HydraVerificationKey (VerKeyEd25519DSIGN &quot;1c02babf6d3d51b725db8b72043823d66634b39db74836b1494bdb647073d566&quot;)},
                               command = Commit{Input.utxo = [(&quot;0000070304040705060101030802010105080806050605070104030603010503&quot;, fromList [(AdaAssetId, 19691416)])]}}
            , Var 5 := Command{Model.party = Party{vkey = HydraVerificationKey (VerKeyEd25519DSIGN &quot;3b6a27bcceb6a42d62a3a8d02a6f0d73653215771de243a63ac048a18b59da29&quot;)},
                               command = Commit{Input.utxo = [(&quot;0100000008030606080507030707000607020508050000020207070508040800&quot;, fromList [(AdaAssetId, 7003529)])]}}
            , Var 6
                := Command
                  { Model.party = Party{vkey = HydraVerificationKey (VerKeyEd25519DSIGN &quot;3b6a27bcceb6a42d62a3a8d02a6f0d73653215771de243a63ac048a18b59da29&quot;)}
                  , command =
                      NewTx
                        { Input.transaction =
                            Payment
                              { from = &quot;0100000008030606080507030707000607020508050000020207070508040800&quot;
                              , to = &quot;0106010101070600040403010600080805020003040508030307080706060608&quot;
                              , value = fromList [(AdaAssetId, 7003529)]
                              }
                        }
                  }
            ]
        -- env and model state are unused in perform
        env = []</p><p>dummyState :: WorldState (IOSim s)
        dummyState = WorldState{hydraParties = mempty, hydraState = Start}</p><p>loop [] = pure ()
        loop ((Var{} := a) : as) = do
          void $ perform dummyState a (lookUpVar env)
          loop as
        tr =
          runSimTrace $
            evalStateT
              (loop act)
              (Nodes mempty traceInIOSim)
        traceDump = printTrace (Proxy :: Proxy Tx) tr
    print traceDump
    True <code>shouldBe</code> True
 @@</p></div></div><div id="synopsis"><details id="syn"><summary>Synopsis</summary><ul class="details-toggle" data-details-id="syn"><li class="src short"><a href="#v:spec">spec</a> :: Spec</li><li class="src short"><a href="#v:prop_checkModel">prop_checkModel</a> :: Property</li><li class="src short"><a href="#v:assertBalancesInOpenHeadAreConsistent">assertBalancesInOpenHeadAreConsistent</a> :: <a href="Hydra-Model.html#t:GlobalState" title="Hydra.Model">GlobalState</a> -&gt; <a href="file:///nix/store/6hbgd0w57swq4rl9pcga8m90m9ayylh2-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/Cabal-syntax-3.10.3.0/Distribution-Compat-Prelude.html#t:Map" title="Distribution.Compat.Prelude">Map</a> Party (<a href="Hydra-BehaviorSpec.html#t:TestHydraClient" title="Hydra.BehaviorSpec">TestHydraClient</a> Tx (IOSim s)) -&gt; Party -&gt; PropertyM (<a href="Hydra-Model.html#t:RunMonad" title="Hydra.Model">RunMonad</a> (IOSim s)) ()</li><li class="src short"><a href="#v:propIsDistributive">propIsDistributive</a> :: (<a href="file:///nix/store/6hbgd0w57swq4rl9pcga8m90m9ayylh2-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/Cabal-syntax-3.10.3.0/Distribution-Compat-Prelude.html#t:Show" title="Distribution.Compat.Prelude">Show</a> b, <a href="file:///nix/store/6hbgd0w57swq4rl9pcga8m90m9ayylh2-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/Cabal-syntax-3.10.3.0/Distribution-Compat-Prelude.html#t:Eq" title="Distribution.Compat.Prelude">Eq</a> b, <a href="file:///nix/store/6hbgd0w57swq4rl9pcga8m90m9ayylh2-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/Cabal-syntax-3.10.3.0/Distribution-Compat-Semigroup.html#t:Semigroup" title="Distribution.Compat.Semigroup">Semigroup</a> a, <a href="file:///nix/store/6hbgd0w57swq4rl9pcga8m90m9ayylh2-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/Cabal-syntax-3.10.3.0/Distribution-Compat-Semigroup.html#t:Semigroup" title="Distribution.Compat.Semigroup">Semigroup</a> b) =&gt; (a -&gt; b) -&gt; a -&gt; a -&gt; Property</li><li class="src short"><a href="#v:prop_partyContestsToWrongClosedSnapshot">prop_partyContestsToWrongClosedSnapshot</a> :: Property</li><li class="src short"><a href="#v:partyContestsToWrongClosedSnapshot">partyContestsToWrongClosedSnapshot</a> :: DL <a href="Hydra-Model.html#t:WorldState" title="Hydra.Model">WorldState</a> ()</li><li class="src short"><a href="#v:prop_fanoutContainsWholeConfirmedUTxO">prop_fanoutContainsWholeConfirmedUTxO</a> :: Property</li><li class="src short"><a href="#v:fanoutContainsWholeConfirmedUTxO">fanoutContainsWholeConfirmedUTxO</a> :: DL <a href="Hydra-Model.html#t:WorldState" title="Hydra.Model">WorldState</a> ()</li><li class="src short"><a href="#v:prop_checkHeadOpensIfAllPartiesCommit">prop_checkHeadOpensIfAllPartiesCommit</a> :: Property</li><li class="src short"><a href="#v:headOpensIfAllPartiesCommit">headOpensIfAllPartiesCommit</a> :: DL <a href="Hydra-Model.html#t:WorldState" title="Hydra.Model">WorldState</a> ()</li><li class="src short"><a href="#v:prop_checkConflictFreeLiveness">prop_checkConflictFreeLiveness</a> :: Property</li><li class="src short"><a href="#v:prop_HydraModel">prop_HydraModel</a> :: Actions <a href="Hydra-Model.html#t:WorldState" title="Hydra.Model">WorldState</a> -&gt; Property</li><li class="src short"><a href="#v:conflictFreeLiveness">conflictFreeLiveness</a> :: DL <a href="Hydra-Model.html#t:WorldState" title="Hydra.Model">WorldState</a> ()</li><li class="src short"><a href="#v:prop_generateTraces">prop_generateTraces</a> :: Actions <a href="Hydra-Model.html#t:WorldState" title="Hydra.Model">WorldState</a> -&gt; Property</li><li class="src short"><a href="#v:prop_doesNotGenerate0AdaUTxO">prop_doesNotGenerate0AdaUTxO</a> :: Actions <a href="Hydra-Model.html#t:WorldState" title="Hydra.Model">WorldState</a> -&gt; <a href="file:///nix/store/6hbgd0w57swq4rl9pcga8m90m9ayylh2-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/Cabal-syntax-3.10.3.0/Distribution-Compat-Prelude.html#t:Bool" title="Distribution.Compat.Prelude">Bool</a></li><li class="src short"><a href="#v:runIOSimProp">runIOSimProp</a> :: Testable a =&gt; (<span class="keyword">forall</span> s. PropertyM (<a href="Hydra-Model.html#t:RunMonad" title="Hydra.Model">RunMonad</a> (IOSim s)) a) -&gt; Property</li><li class="src short"><a href="#v:runRunMonadIOSimGen">runRunMonadIOSimGen</a> :: <span class="keyword">forall</span> a. Testable a =&gt; (<span class="keyword">forall</span> s. Gen (<a href="Hydra-Model.html#t:RunMonad" title="Hydra.Model">RunMonad</a> (IOSim s) a)) -&gt; Gen Property</li><li class="src short"><a href="#v:nonConflictingTx">nonConflictingTx</a> :: <a href="Hydra-Model.html#t:WorldState" title="Hydra.Model">WorldState</a> -&gt; Quantification (Party, <a href="Hydra-Model-Payment.html#t:Payment" title="Hydra.Model.Payment">Payment</a>)</li><li class="src short"><a href="#v:eventually">eventually</a> :: Action <a href="Hydra-Model.html#t:WorldState" title="Hydra.Model">WorldState</a> () -&gt; DL <a href="Hydra-Model.html#t:WorldState" title="Hydra.Model">WorldState</a> ()</li><li class="src short"><a href="#v:action_">action_</a> :: Action <a href="Hydra-Model.html#t:WorldState" title="Hydra.Model">WorldState</a> () -&gt; DL <a href="Hydra-Model.html#t:WorldState" title="Hydra.Model">WorldState</a> ()</li><li class="src short"><a href="#v:unwrapAddress">unwrapAddress</a> :: AddressInEra -&gt; <a href="file:///nix/store/6hbgd0w57swq4rl9pcga8m90m9ayylh2-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/text-2.0.2/Data-Text.html#t:Text" title="Data.Text">Text</a></li></ul></details></div><div id="interface"><h1>Documentation</h1><div class="top"><p class="src"><a id="v:spec" class="def">spec</a> :: Spec <a href="src/Hydra.ModelSpec.html#spec" class="link">Source</a> <a href="#v:spec" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:prop_checkModel" class="def">prop_checkModel</a> :: Property <a href="src/Hydra.ModelSpec.html#prop_checkModel" class="link">Source</a> <a href="#v:prop_checkModel" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:assertBalancesInOpenHeadAreConsistent" class="def">assertBalancesInOpenHeadAreConsistent</a> :: <a href="Hydra-Model.html#t:GlobalState" title="Hydra.Model">GlobalState</a> -&gt; <a href="file:///nix/store/6hbgd0w57swq4rl9pcga8m90m9ayylh2-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/Cabal-syntax-3.10.3.0/Distribution-Compat-Prelude.html#t:Map" title="Distribution.Compat.Prelude">Map</a> Party (<a href="Hydra-BehaviorSpec.html#t:TestHydraClient" title="Hydra.BehaviorSpec">TestHydraClient</a> Tx (IOSim s)) -&gt; Party -&gt; PropertyM (<a href="Hydra-Model.html#t:RunMonad" title="Hydra.Model">RunMonad</a> (IOSim s)) () <a href="src/Hydra.ModelSpec.html#assertBalancesInOpenHeadAreConsistent" class="link">Source</a> <a href="#v:assertBalancesInOpenHeadAreConsistent" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:propIsDistributive" class="def">propIsDistributive</a> :: (<a href="file:///nix/store/6hbgd0w57swq4rl9pcga8m90m9ayylh2-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/Cabal-syntax-3.10.3.0/Distribution-Compat-Prelude.html#t:Show" title="Distribution.Compat.Prelude">Show</a> b, <a href="file:///nix/store/6hbgd0w57swq4rl9pcga8m90m9ayylh2-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/Cabal-syntax-3.10.3.0/Distribution-Compat-Prelude.html#t:Eq" title="Distribution.Compat.Prelude">Eq</a> b, <a href="file:///nix/store/6hbgd0w57swq4rl9pcga8m90m9ayylh2-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/Cabal-syntax-3.10.3.0/Distribution-Compat-Semigroup.html#t:Semigroup" title="Distribution.Compat.Semigroup">Semigroup</a> a, <a href="file:///nix/store/6hbgd0w57swq4rl9pcga8m90m9ayylh2-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/Cabal-syntax-3.10.3.0/Distribution-Compat-Semigroup.html#t:Semigroup" title="Distribution.Compat.Semigroup">Semigroup</a> b) =&gt; (a -&gt; b) -&gt; a -&gt; a -&gt; Property <a href="src/Hydra.ModelSpec.html#propIsDistributive" class="link">Source</a> <a href="#v:propIsDistributive" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:prop_partyContestsToWrongClosedSnapshot" class="def">prop_partyContestsToWrongClosedSnapshot</a> :: Property <a href="src/Hydra.ModelSpec.html#prop_partyContestsToWrongClosedSnapshot" class="link">Source</a> <a href="#v:prop_partyContestsToWrongClosedSnapshot" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:partyContestsToWrongClosedSnapshot" class="def">partyContestsToWrongClosedSnapshot</a> :: DL <a href="Hydra-Model.html#t:WorldState" title="Hydra.Model">WorldState</a> () <a href="src/Hydra.ModelSpec.html#partyContestsToWrongClosedSnapshot" class="link">Source</a> <a href="#v:partyContestsToWrongClosedSnapshot" class="selflink">#</a></p><div class="doc"><p>Expect to see contestations when trying to close with
 an old snapshot</p></div></div><div class="top"><p class="src"><a id="v:prop_fanoutContainsWholeConfirmedUTxO" class="def">prop_fanoutContainsWholeConfirmedUTxO</a> :: Property <a href="src/Hydra.ModelSpec.html#prop_fanoutContainsWholeConfirmedUTxO" class="link">Source</a> <a href="#v:prop_fanoutContainsWholeConfirmedUTxO" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:fanoutContainsWholeConfirmedUTxO" class="def">fanoutContainsWholeConfirmedUTxO</a> :: DL <a href="Hydra-Model.html#t:WorldState" title="Hydra.Model">WorldState</a> () <a href="src/Hydra.ModelSpec.html#fanoutContainsWholeConfirmedUTxO" class="link">Source</a> <a href="#v:fanoutContainsWholeConfirmedUTxO" class="selflink">#</a></p><div class="doc"><p>Given any random walk of the model, if the Head is open a NewTx getting
 confirmed must be part of the UTxO after finalization.</p></div></div><div class="top"><p class="src"><a id="v:prop_checkHeadOpensIfAllPartiesCommit" class="def">prop_checkHeadOpensIfAllPartiesCommit</a> :: Property <a href="src/Hydra.ModelSpec.html#prop_checkHeadOpensIfAllPartiesCommit" class="link">Source</a> <a href="#v:prop_checkHeadOpensIfAllPartiesCommit" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:headOpensIfAllPartiesCommit" class="def">headOpensIfAllPartiesCommit</a> :: DL <a href="Hydra-Model.html#t:WorldState" title="Hydra.Model">WorldState</a> () <a href="src/Hydra.ModelSpec.html#headOpensIfAllPartiesCommit" class="link">Source</a> <a href="#v:headOpensIfAllPartiesCommit" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:prop_checkConflictFreeLiveness" class="def">prop_checkConflictFreeLiveness</a> :: Property <a href="src/Hydra.ModelSpec.html#prop_checkConflictFreeLiveness" class="link">Source</a> <a href="#v:prop_checkConflictFreeLiveness" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:prop_HydraModel" class="def">prop_HydraModel</a> :: Actions <a href="Hydra-Model.html#t:WorldState" title="Hydra.Model">WorldState</a> -&gt; Property <a href="src/Hydra.ModelSpec.html#prop_HydraModel" class="link">Source</a> <a href="#v:prop_HydraModel" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:conflictFreeLiveness" class="def">conflictFreeLiveness</a> :: DL <a href="Hydra-Model.html#t:WorldState" title="Hydra.Model">WorldState</a> () <a href="src/Hydra.ModelSpec.html#conflictFreeLiveness" class="link">Source</a> <a href="#v:conflictFreeLiveness" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:prop_generateTraces" class="def">prop_generateTraces</a> :: Actions <a href="Hydra-Model.html#t:WorldState" title="Hydra.Model">WorldState</a> -&gt; Property <a href="src/Hydra.ModelSpec.html#prop_generateTraces" class="link">Source</a> <a href="#v:prop_generateTraces" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:prop_doesNotGenerate0AdaUTxO" class="def">prop_doesNotGenerate0AdaUTxO</a> :: Actions <a href="Hydra-Model.html#t:WorldState" title="Hydra.Model">WorldState</a> -&gt; <a href="file:///nix/store/6hbgd0w57swq4rl9pcga8m90m9ayylh2-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/Cabal-syntax-3.10.3.0/Distribution-Compat-Prelude.html#t:Bool" title="Distribution.Compat.Prelude">Bool</a> <a href="src/Hydra.ModelSpec.html#prop_doesNotGenerate0AdaUTxO" class="link">Source</a> <a href="#v:prop_doesNotGenerate0AdaUTxO" class="selflink">#</a></p></div><a href="#g:1" id="g:1"><h1>Utilities for <code>IOSim</code></h1></a><div class="top"><p class="src"><a id="v:runIOSimProp" class="def">runIOSimProp</a> :: Testable a =&gt; (<span class="keyword">forall</span> s. PropertyM (<a href="Hydra-Model.html#t:RunMonad" title="Hydra.Model">RunMonad</a> (IOSim s)) a) -&gt; Property <a href="src/Hydra.ModelSpec.html#runIOSimProp" class="link">Source</a> <a href="#v:runIOSimProp" class="selflink">#</a></p><div class="doc"><p>Specialised runner similar to <a href="monadicST">https://hackage.haskell.org/package/QuickCheck-2.14.3/docs/Test-QuickCheck-Monadic.html#v:monadicST</a>.</p></div></div><div class="top"><p class="src"><a id="v:runRunMonadIOSimGen" class="def">runRunMonadIOSimGen</a> :: <span class="keyword">forall</span> a. Testable a =&gt; (<span class="keyword">forall</span> s. Gen (<a href="Hydra-Model.html#t:RunMonad" title="Hydra.Model">RunMonad</a> (IOSim s) a)) -&gt; Gen Property <a href="src/Hydra.ModelSpec.html#runRunMonadIOSimGen" class="link">Source</a> <a href="#v:runRunMonadIOSimGen" class="selflink">#</a></p><div class="doc"><p>Similar to <a href="runSTGen">https://hackage.haskell.org/package/QuickCheck-2.14.3/docs/Test-QuickCheck-Monadic.html#v:runSTGen</a></p><p>It returns <code>Property</code> rather than `Gen a`, what allows to enhance the logging
 in case of failures.</p></div></div><div class="top"><p class="src"><a id="v:nonConflictingTx" class="def">nonConflictingTx</a> :: <a href="Hydra-Model.html#t:WorldState" title="Hydra.Model">WorldState</a> -&gt; Quantification (Party, <a href="Hydra-Model-Payment.html#t:Payment" title="Hydra.Model.Payment">Payment</a>) <a href="src/Hydra.ModelSpec.html#nonConflictingTx" class="link">Source</a> <a href="#v:nonConflictingTx" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:eventually" class="def">eventually</a> :: Action <a href="Hydra-Model.html#t:WorldState" title="Hydra.Model">WorldState</a> () -&gt; DL <a href="Hydra-Model.html#t:WorldState" title="Hydra.Model">WorldState</a> () <a href="src/Hydra.ModelSpec.html#eventually" class="link">Source</a> <a href="#v:eventually" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:action_" class="def">action_</a> :: Action <a href="Hydra-Model.html#t:WorldState" title="Hydra.Model">WorldState</a> () -&gt; DL <a href="Hydra-Model.html#t:WorldState" title="Hydra.Model">WorldState</a> () <a href="src/Hydra.ModelSpec.html#action_" class="link">Source</a> <a href="#v:action_" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:unwrapAddress" class="def">unwrapAddress</a> :: AddressInEra -&gt; <a href="file:///nix/store/6hbgd0w57swq4rl9pcga8m90m9ayylh2-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/text-2.0.2/Data-Text.html#t:Text" title="Data.Text">Text</a> <a href="src/Hydra.ModelSpec.html#unwrapAddress" class="link">Source</a> <a href="#v:unwrapAddress" class="selflink">#</a></p></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.29.2</p></div></body></html>