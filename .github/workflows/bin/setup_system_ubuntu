#!/usr/bin/env bash

set -euo pipefail

set -x

# Install netbase to work around https://github.com/input-output-hk/cardano-node/issues/2752
sudo apt-get install -y netbase

# Install cardano-node dependencies see https://developers.cardano.org/docs/get-started/installing-cardano-node/#linux
sudo apt-get install -y \
  libffi-dev \
  libgmp-dev \
  libssl-dev \
  libtinfo-dev \
  libsystemd-dev \
  zlib1g-dev

# Install ghcup dependencies
sudo apt-get install -y --no-install-recommends \
    libnuma-dev \
    zlib1g-dev \
    libgmp-dev \
    libgmp10 \
    lsb-release \
    software-properties-common \
    gnupg2 \
    apt-transport-https \
    gcc \
    autoconf \
    automake \
    build-essential